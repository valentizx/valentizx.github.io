<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.3.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="115 106 99">
<meta property="og:type" content="website">
<meta property="og:title" content="I&#39;M REXZX">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="I&#39;M REXZX">
<meta property="og:description" content="115 106 99">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="I&#39;M REXZX">
<meta name="twitter:description" content="115 106 99">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>I'M REXZX</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">I'M REXZX</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">
    <a href="/404/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />Commonweal 404</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/24/pushstreaming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="115 106 99">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="I'M REXZX">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/24/pushstreaming/" itemprop="url">
                  macOS ç³»ç»Ÿ nginx + rtmp æµåª’ä½“ä¼ è¾“å®è·µ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-24 13:18:11 / Modified: 18:41:46" itemprop="dateCreated datePublished" datetime="2018-11-24T13:18:11+08:00">2018-11-24</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æµåª’ä½“ä¼ è¾“æ˜¯â€œç›´æ’­â€ä¸­è‡³å…³é‡è¦çš„ç¯èŠ‚ï¼Œåœ¨ç½‘ç»œä¼ è¾“åª’ä½“æµçš„æ—¶å€™æœ‰ç€ä¸åŒçš„<strong>æµåª’ä½“ä¼ è¾“åè®®</strong>ã€‚</p>
<p>åšäº†ä¸€äº›å°è°ƒæŸ¥ï¼Œåœ¨æ•´ä¸ªâ€œç›´æ’­â€äº§å“æ„å»ºçš„è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨æœ€å¹¿çš„ä¸¤ä¸ªæµåª’ä½“ä¼ è¾“åè®®å°±æ˜¯ <strong>RTMP</strong> å’Œ <strong>HLS</strong> ä¸¤ä¸ªåè®®ï¼Œå…¶ä¸­ <strong>RTMP</strong> åœ¨å›½å†…ç›´æ’­å‘å±•çš„é•¿æ²³ä¸­æ‰®æ¼”ç€æå…¶é‡è¦çš„è§’è‰²ï¼Œå„ä¸ªå¹³å°ä¸ <strong>RTMP</strong> çš„â€œç»“åˆâ€å·²å˜å¾—å¾ˆæˆç†Ÿã€‚</p>
<h2 id="ä¸¤ç§ä¸åŒçš„æµåª’ä½“ä¼ è¾“åè®®"><a href="#ä¸¤ç§ä¸åŒçš„æµåª’ä½“ä¼ è¾“åè®®" class="headerlink" title="ä¸¤ç§ä¸åŒçš„æµåª’ä½“ä¼ è¾“åè®®"></a>ä¸¤ç§ä¸åŒçš„æµåª’ä½“ä¼ è¾“åè®®</h2><h3 id="RTMP"><a href="#RTMP" class="headerlink" title="RTMP"></a>RTMP</h3><p>RTMP (Real Time Messaging Protocol) ï¼šå®æ—¶æ¶ˆæ¯ä¼ è¾“åè®®ï¼Œå±<strong>åº”ç”¨å±‚åè®®</strong>ï¼ŒåŸºäºä¼ è¾“å±‚ <strong>TCP åè®®</strong>é•¿é“¾æ¥æ¥è¿›è¡Œä¼ è¾“ï¼Œæœ‰ N å¤šå˜ç§ï¼Œæœ€æ—©ç”± Macromedia å…¬å¸å¼€å‘ï¼Œè€Œå Macromedia è¢« Adobe å…¬å¸æ”¶è´­ã€‚</p>
<h4 id="RTMP-çš„ä¸»è¦ç‰¹æ€§"><a href="#RTMP-çš„ä¸»è¦ç‰¹æ€§" class="headerlink" title="RTMP çš„ä¸»è¦ç‰¹æ€§"></a>RTMP çš„ä¸»è¦ç‰¹æ€§</h4><ul>
<li>å¸‚åœºå¹¿é˜”ï¼ŒåŸºæœ¬æ‰€æœ‰çš„ç¼–ç å™¨éƒ½æ”¯æŒ RTMPï¼›</li>
<li>å»¶è¿Ÿä½ï¼ŒRTMP çš„å®æ—¶æ€§åœ¨ 1ï½3 ç§’å·¦å³ï¼Œå³ä½¿ç»è¿‡ CDN (Content Delivery Network å†…å®¹åˆ†å‘ç½‘ç»œ)å¤šå±‚åˆ†å‘ä¹Ÿèƒ½ä¿è¯å®æ—¶æ€§åœ¨ 3 ç§’å·¦å³ï¼Œæ­¤ç‰¹æ€§å·²ç»å®Œå…¨æ»¡è¶³ç°åœ¨çš„ç›´æ’­äº§ä¸šéœ€æ±‚ï¼›</li>
<li>ç¨³å®šæ€§ã€å¯é æ€§é«˜ï¼ŒåŸºäº TCP ä¿è¯åª’ä½“æµåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ä¸ä¼šä¸¢å¤±ï¼Œä½†è¿™ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œåœ¨ç½‘ç»œçŠ¶æ€ä¸å¥½çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šç­‰å¾…æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå‡ºç°å»¶è¿Ÿï¼Œç­‰åŒ…æ¥å—å®Œæ•´å†å°†å®Œæ•´çš„åŒ…æ¨ç»™ Client ç«¯ï¼›</li>
<li>HTML5 æ’­æ”¾éœ€è¦æ’ä»¶ï¼Œå¹¶ä¸”è·¨å¹³å°è¾ƒå·®</li>
</ul>
<h4 id="RTMP-åŸç†"><a href="#RTMP-åŸç†" class="headerlink" title="RTMP åŸç†"></a>RTMP åŸç†</h4><p>RTMP é€šè¿‡<strong>æ¡æ‰‹</strong>çš„æ–¹å¼å»ºç«‹ RTMP Connectionï¼Œ</p>
<p>è‹¥ Client ç«¯è¦æŒ‰åºå‘é€ C0ã€C1ã€C2ï¼ŒServer ç«¯æŒ‰åºå‘é€ S0ã€S1ã€S2ï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-leVcMoCy_Ho/W_j6QUWNzsI/AAAAAAAAAcU/2YwbK5rIYw4Vr85ERW4PHliSXV_TwjtUgCHMYCw/I/15430436475817.png" alt=""></p>
<p>ä¸ºä¿è¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œæ— è®ºæ˜¯ Client ç«¯è¿˜æ˜¯ Server ç«¯éƒ½ä¼šç­‰å¾…ä¸€æ¬¡ Chunk æ¥æ”¶å®Œæ¯•å†è¿›è¡Œä¸‹ä¸€æ¬¡é€šä¿¡ã€‚</p>
<ul>
<li><strong>Chunk</strong> æ˜¯ RTMP åœ¨è¿›è¡Œæ•°æ®æµä¼ è¾“è¿‡ç¨‹ä¸­çš„æœ€å°å•ä½ï¼Œæ¯ä¸ª Chunk ç”± Message æ‹†åˆ†ï¼Œå½“ç„¶ä¹Ÿå¯èƒ½æ¯ä¸ªç‹¬ç«‹çš„ Message ä½œä¸º Chunk è¿›è¡Œä¼ è¾“ï¼›</li>
<li><strong>Message</strong> æ˜¯æ»¡è¶³ RTMP å¹¶ä¸”ç»è¿‡ã€Œæ ¼å¼åŒ–ã€çš„æ•°æ®ï¼ŒMessage æœ‰ç€è‡ªå·±çš„â€œæ•°æ®ç»“æ„â€ï¼Œæ ‡è¯†æ¯ä¸ª Message çš„å­—æ®µä¸º <strong>Message ID</strong>ï¼Œè¯¥å­—æ®µæ˜¯æ‹†åˆ†æˆ Chunk å’Œè¿˜åŸ Chunk çš„å‡­å€Ÿã€‚</li>
</ul>
<h3 id="HLS"><a href="#HLS" class="headerlink" title="HLS"></a>HLS</h3><p>HLS (HTTP Live Streaming)ï¼šæ˜¯ Apple å…¬å¸åŸºäº <strong>HTTP</strong> å®ç°çš„æµåª’ä½“ä¼ è¾“åè®®ã€‚</p>
<h4 id="HLS-çš„ä¸»è¦ç‰¹æ€§"><a href="#HLS-çš„ä¸»è¦ç‰¹æ€§" class="headerlink" title="HLS çš„ä¸»è¦ç‰¹æ€§"></a>HLS çš„ä¸»è¦ç‰¹æ€§</h4><ul>
<li>å¯¹äº Apple è‡ªå®¶å¹³å°çš„ç¡¬ä»¶è®¾å¤‡ä¸Šæœ€å¤§åŒ–æ”¯æŒï¼Œä¸ç”¨è‡ªè¡Œå¼€å‘ç‰¹æœ‰æ’­æ”¾å™¨ï¼Œåœ¨ Android çš„è®¾å¤‡ä¸Šæ”¯æŒè¡¨ç°ç•¥å·®ï¼›</li>
<li>HLS ä¼šå°†è§†é¢‘æºåˆ†æˆç´¢å¼•æ–‡ä»¶å’Œè§†é¢‘åˆ‡ç‰‡è¿›è¡Œä¼ è¾“ï¼Œæ‰€ä»¥å¯ä»¥å®ç°<strong>å¹³æ»‘</strong>çš„åˆ‡æ¢ç ç‡ï¼Œä½†è¿™ä¹Ÿæ˜¯ HLS ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œè¿™ç§æœºåˆ¶ä¼šå¯¼è‡´ HLS çš„å®æ—¶æ€§å¾ˆå·®ï¼Œå»¶è¿Ÿå¯è¾¾åˆ°æ•°åç§’ï¼›</li>
<li>åŸºäº HTTP ï¼Œä¸å­˜åœ¨é˜²ç«å¢™å’Œä»£ç†çš„é—®é¢˜ï¼Œä½†éœ€è¦å’Œ Server ç«¯ä¸æ–­è¿›è¡Œè¿æ¥é€šä¿¡ï¼›</li>
<li>HTML5 å¯ä»¥ç›´æ¥æ’­æ”¾ç›´æ’­é“¾æ¥ï¼Œä¸è®¸ä»»ä½•ç‹¬ç«‹çš„ Applicationæ”¯æŒã€‚</li>
</ul>
<h4 id="HLS-ä¸»è¦åŸç†"><a href="#HLS-ä¸»è¦åŸç†" class="headerlink" title="HLS ä¸»è¦åŸç†"></a>HLS ä¸»è¦åŸç†</h4><p>HLS ä¼ è¾“å†…å®¹åŒ…æ‹¬ï¼š<strong>m3u8</strong> ç´¢å¼•æ–‡ä»¶ä»¥åŠ <strong>ts</strong> è§†é¢‘åˆ‡ç‰‡ã€‚</p>
<p>æ— è®ºæ˜¯ç›´æ’­è¿˜æ˜¯ç‚¹æ’­ï¼ŒHLS åè®®éƒ½å°†è§†é¢‘æºæŒ‰ç­–ç•¥åˆ†å‰²æˆä¸€ä¸ªç´¢å¼•æ–‡ä»¶å’Œè‹¥å¹² ts è§†é¢‘åˆ‡ç‰‡ï¼Œç”±ç´¢å¼•æ–‡ä»¶ç®¡ç†è§†é¢‘åˆ‡ç‰‡ï¼ŒServer åˆ™ä¸æ–­çš„å°†è¿™äº›æœ€è§†é¢‘åˆ‡ç‰‡æ¨ç»™ Client ç«¯ï¼Œæ‰€ä»¥å¯¹äºç›´æ’­è€Œè¨€ï¼ŒClient ä¼šä¸æ–­æ¥å—ä» Server ç«¯æ¨è¿‡æ¥çš„è§†é¢‘åˆ‡ç‰‡ï¼Œä»¥â€œç‚¹æ’­â€çš„æ–¹å¼è¾¾åˆ°ç›´æ’­çš„æ•ˆæœï¼Œä½†ç”±äºåˆ‡ç‰‡çš„è¿‡ç¨‹ä¼šé€ æˆ<strong>é«˜å»¶è¿Ÿ</strong>ï¼Œæ‰€ä»¥åœ¨å›½å†…çš„ç›´æ’­äº§ä¸šä¸­å¹¶ä¸è¢«çœ‹å¥½ï¼Œå³ä½¿æ˜¯å°† ts æ–‡ä»¶çš„åˆ‡ç‰‡è®¾ç½®æœ€å°ï¼Œè¡¨ç°ä¹Ÿä»æ—§ä¸å¦‚ RTMPã€‚</p>
<h3 id="RTMP-Vs-HLS"><a href="#RTMP-Vs-HLS" class="headerlink" title="RTMP Vs. HLS"></a>RTMP Vs. HLS</h3><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œå¯¹äº<strong>è§†é¢‘é‡‡é›† -&gt; å¤„ç†/ç¼–ç  -&gt; æ¨æµåˆ†å‘ -&gt; Client ç«¯æ’­æ”¾</strong>æ•´ä¸ªè¿‡ç¨‹ä¸­ RTMP å’Œ HLS çš„å·¥ä½œå†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-5CPZkRTj12U/W_j5yubYj5I/AAAAAAAAAcM/EIp0Fvb_ByAE99WS3ut_pdxeVZrs7MamgCHMYCw/I/15430435174139.jpg" alt="RTMP"></p>
<p><img src="https://lh3.googleusercontent.com/-lnObWno95vE/W_jp_LdY8yI/AAAAAAAAAcA/1AaNtt-x-twOns5bWJMGhU9uE3NMIqh6QCHMYCw/I/15430394795180.png" alt="HLS"></p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒRTMP æ—¢èƒ½<strong>æ¨æµ</strong>ä¹Ÿèƒ½<strong>æ‹‰æµ</strong>ï¼Œè€Œ HLS <strong>åªèƒ½æ‹‰æµ</strong>ã€‚<br>æ‰€ä»¥æ ¹æ®å„è‡ªçš„ç‰¹ç‚¹ï¼ŒRTMP æ›´é€‚ç”¨äºå®æ—¶æ€§ã€äº’åŠ¨æ€§è¾ƒé«˜çš„ç›´æ’­ï¼ŒHLS æ›´é€‚åˆ HTTP ç‚¹æ’­ã€‚</p>
<h2 id="æœ¬åœ°æµåª’ä½“ä¼ è¾“å®è·µ"><a href="#æœ¬åœ°æµåª’ä½“ä¼ è¾“å®è·µ" class="headerlink" title="æœ¬åœ°æµåª’ä½“ä¼ è¾“å®è·µ"></a>æœ¬åœ°æµåª’ä½“ä¼ è¾“å®è·µ</h2><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>a. å®‰è£… <code>HomeBrew</code>ï¼Œç»ˆç«¯é”®å…¥ï¼š</p>
<p><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</code></p>
<blockquote>
<p>å‡çº§ <code>Homebrew</code>ï¼š<code>brew update</code></p>
</blockquote>
<p>b. æ¨æµæ­å»ºæœ¬åœ°æœåŠ¡å™¨éœ€ <strong>nginx</strong>ï¼Œç»ˆç«¯é”®å…¥ï¼š<code>brew tap denji/nginx</code></p>
<blockquote>
<p>ä½¿ç”¨ <code>brew tap homebrew/nginx</code> ä¼šæŠ¥ <strong>Error: homebrew/nginx was deprecated. This tap is now empty as all its formulae were migrated.</strong></p>
</blockquote>
<p>c. å®‰è£… <strong>rtmp</strong> æ¨¡å—ï¼Œç»ˆç«¯é”®å…¥ï¼š</p>
<p><code>brew install nginx-full --with-rtmp-module</code></p>
<p>d. æ­¤æ—¶ï¼Œ<strong>nginx</strong> å’Œ <strong>rtmp</strong> æ¨¡å—éƒ½å·²å®‰è£…å®Œæˆï¼Œç»ˆç«¯é”®å…¥ï¼š<code>nginx</code> (æƒé™é—®é¢˜é”®å…¥ <code>sudo nginx</code>)ï¼Œå¯åŠ¨ nginx æœåŠ¡ï¼Œæµè§ˆå™¨é”®å…¥ <code>http://localhost:8080</code> å‡ºç° <strong>Welcome to nginx!</strong> æ¬¢è¿è¯­è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p>
<blockquote>
<p>é‡å¯ nginx æœåŠ¡å‘½ä»¤ï¼š<code>nginx -s reload</code><br>åœæ­¢ nginx æœåŠ¡å‘½ä»¤ï¼š<code>nginx -s stop</code><br>æœ‰åºé€€å‡º nginx æœåŠ¡å‘½ä»¤ï¼š<code>nginx -s quit</code></p>
</blockquote>
<p>e. é…ç½® <strong>nginx.conf</strong> (HLS + RTMP)</p>
<blockquote>
<p>nginx.conf è·¯å¾„ä¸ºï¼š<strong>/usr/local/etc/nginx/nginx.conf</strong></p>
</blockquote>
<p>æ–‡æœ¬æ‰“å¼€è¯¥æ–‡ä»¶åœ¨ <strong>http</strong> ä½œç”¨åŸŸå†…é”®å…¥ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location /hls &#123;</span><br><span class="line">        #Serve HLS config</span><br><span class="line">        types &#123;</span><br><span class="line">            application/vnd.apple.mpegurl    m3u8;</span><br><span class="line">            video/mp2t ts;</span><br><span class="line">        &#125;</span><br><span class="line">        root /usr/local/var/www;</span><br><span class="line">        add_header Cache-Control    no-cache;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æœ€åé”®å…¥ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rtmp &#123;</span><br><span class="line">	    server &#123;</span><br><span class="line">	        listen 1935;</span><br><span class="line">	        application rtmplive &#123;</span><br><span class="line">	            live on;</span><br><span class="line">	            max_connections 1024;</span><br><span class="line">	        &#125;</span><br><span class="line">	        application hls&#123;</span><br><span class="line">	            live on;</span><br><span class="line">	            hls on;</span><br><span class="line">	            hls_path /usr/local/var/www/hls;</span><br><span class="line">	            hls_fragment 1s;</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>RTMP <strong>é»˜è®¤ç«¯å£ 1935</strong>ï¼Œ<strong>rtmp é…ç½®ä¿¡æ¯ä¸å±äºä»»ä½•ä½œç”¨åŸŸ</strong>ï¼Œå†™åœ¨ä»»ä½•ä½œç”¨åŸŸé‡Œéƒ½ä¼šæŠ¥é”™ <strong>nginx: [emerg] â€œrtmpâ€ directive is not allowed here in /etc/nginx/nginx.conf:èµ·å§‹è¡Œæ•°</strong></p>
</blockquote>
<p>é…ç½®å®Œæ¯•é‡å¯ nginx æœåŠ¡ã€‚</p>
<p>f. å®‰è£… <strong>ffmepg</strong> å·¥å…·ï¼Œç»ˆç«¯é”®å…¥ï¼š</p>
<p><code>brew install ffmpeg</code></p>
<p>g. å®‰è£…æ”¯æŒ HLS å’Œ RTMP çš„æ’­æ”¾å™¨ï¼Œ<a href="https://www.videolan.org/vlc/index.html" target="_blank" rel="noopener">VLC</a> å’Œ <a href="https://mpv.io/" target="_blank" rel="noopener">mpv</a> éƒ½å¯ï¼Œåœ¨æ­¤ç”¨çš„æ˜¯ mpvã€‚</p>
<h3 id="å®è·µæœ¬åœ°æ¨æµè‡³-nginx"><a href="#å®è·µæœ¬åœ°æ¨æµè‡³-nginx" class="headerlink" title="å®è·µæœ¬åœ°æ¨æµè‡³ nginx"></a>å®è·µæœ¬åœ°æ¨æµè‡³ nginx</h3><p>ä¸€åˆ‡éƒ½å‡†å¤‡å°±ç»ªåï¼Œå³å¯å®è·µæ¨æµæœåŠ¡ï¼Œç»ˆç«¯é”®å…¥ï¼š</p>
<p><code>ffmpeg -re -i ç›®æ ‡è§†é¢‘.mp4 -vcodec libx264 -vprofile baseline -acodec aac -ar 44100 -strict -2 -ac 1 -f flv -s 1280x720 -q 10 rtmp://localhost:1935/xx/xx</code></p>
<p><strong>æ¨æµå‘½ä»¤å…·ä½“å‚æ•°ï¼š</strong><br> å‚æ•°|è¯´æ˜|<br>â€”|â€”|â€”<br>-vcodec libx264|è§†é¢‘çš„ç¼–ç å™¨ä¸º H.264|<br>vprofile baseline | è®¾ç½®éŸ³è§†é¢‘ç¼–ç å™¨çš„ç±»<br>-acodec aac|æŒ‡å®šå£°éŸ³çš„ç¼–ç å™¨ä¸ºAAC<br>-ar 44100|éŸ³é¢‘ç¼–è§£ç å™¨çš„é‡‡æ ·ç‡ï¼Œå•ä½ä¸ºèµ«å…¹<br>-ac 1|è®¾ç½®éŸ³é¢‘ç¼–è§£ç å™¨çš„å£°é“æ•°ç›®<br>-f flv|å¼ºåˆ¶è®¾å®šè¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶æ ¼å¼ä¸º flv æ ¼å¼<br>-s 1280x720 | åˆ†è¾¨ç‡</p>
<p>æ¨é€è¿‡ç¨‹ä¼šåœ¨ç»ˆç«¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-HKeUcGhPnNs/W_kW8_gvwVI/AAAAAAAAAcg/eFET15J0vAEP2dkpmjf1qRdjXIXutejGACHMYCw/I/Jietu20181124-171400%25402x.jpg" alt=""></p>
<p>æ¨é€å®Œæ¯•å¦‚ä¸‹ï¼š<br><img src="https://lh3.googleusercontent.com/-D_bXkjNRNiU/W_kY6_wOgUI/AAAAAAAAAc0/_EQY1y-aObsRDWFMKSgtGSXxsX9-UMKDgCHMYCw/I/15430514948876.jpg" alt=""></p>
<h4 id="RTMP-æ‹‰æµ"><a href="#RTMP-æ‹‰æµ" class="headerlink" title="RTMP æ‹‰æµ"></a>RTMP æ‹‰æµ</h4><p>æ¨æµè‡³ RTMP æœåŠ¡å™¨ç”Ÿæˆåœ°å€ï¼š <strong>rtmp://localhost:1935/xx/xx</strong></p>
<p>æ­¤æ—¶åœ¨ mpv å·¥å…·æ  <strong>File - Open URL - é”®å…¥ rtmp://localhost:1935/rtmplive/xx</strong></p>
<p>æ’­æ”¾å³å¯æ’­æ”¾ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-TIlna7CEZ3A/W_kXeDvoNyI/AAAAAAAAAco/EiYxJONT10Y3YX5x6FoEhG3ULbJ9-8DHwCHMYCw/I/Jietu20181124-171439%25402x.jpg" alt="Jietu20181124-171439@2x"></p>
<h4 id="HLS-æ‹‰æµ"><a href="#HLS-æ‹‰æµ" class="headerlink" title="HLS æ‹‰æµ"></a>HLS æ‹‰æµ</h4><p>æ¨æµè‡³ HLS æœåŠ¡å™¨ç”Ÿæˆåœ°å€ï¼š<br><strong><a href="http://localhost:8080/hls/xx.m3u8" target="_blank" rel="noopener">http://localhost:8080/hls/xx.m3u8</a></strong></p>
<p>åœ¨æµè§ˆå™¨æˆ–è€… mpv ä¸­æ’­æ”¾è¡¨ç°å¦‚ä¸‹ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-Ukd-6VJKbhY/W_kbakzT1JI/AAAAAAAAAdA/oMsdcComgYkNhJWp0Ws1BOE2y3232bWYACHMYCw/I/Jietu20181124-173220%25402x.jpg" alt="Safari æ’­æ”¾"></p>
<p><img src="https://lh3.googleusercontent.com/-ZdhM-lWEE7E/W_kbfIy0ztI/AAAAAAAAAdE/SHPCm-EqqHQJqOZGT0gJVg_AKDTjXMslQCHMYCw/I/Jietu20181124-173249%25402x.jpg" alt="mpv æ’­æ”¾å™¨æ’­æ”¾"></p>
<h2 id="å®è·µè¿œç¨‹æ¨æµ"><a href="#å®è·µè¿œç¨‹æ¨æµ" class="headerlink" title="å®è·µè¿œç¨‹æ¨æµ"></a>å®è·µè¿œç¨‹æ¨æµ</h2><p>æ‰‹å¤´åˆšå¥½æœ‰ä¸ªç§‘å­¦ä¸Šç½‘ä¹°çš„ VPS æ­£å¥½å¯ä»¥å½“ä½œè¿œç¨‹æœåŠ¡å™¨ä½¿ç”¨ï¼Œæ–°åŠ å¡èŠ‚ç‚¹ï¼Œä½†åº”è¯¥ä¹Ÿæ˜¯ç»•åˆ°ç¾å›½çš„çº¿è·¯ï¼Œæ‰€ä»¥å¯æƒ³è€ŒçŸ¥ï¼Œæ’­æ”¾è¿‡ç¨‹å¼‚å¸¸çš„è‰°è¾›ï¼Œåå‡ ç§’æ’­æ”¾ä¸€å¸§å·²ç»ç®—æ˜¯ç»™é¢å­äº†ï¼Œä½†å¥½åœ¨å·²ç»æœ‰æˆæœã€‚</p>
<p>æˆ‘çš„æœåŠ¡å™¨æ˜¯ CentOS ç³»ç»Ÿï¼Œå¯èƒ½å®‰è£…æ¨¡å—çš„å‘½ä»¤å’Œ Ubuntu ç³»ç»Ÿæœ‰ç»†å°çš„å·®åˆ«ã€‚</p>
<p>åœ¨æ­¤è¿æ¥ VPS çš„å·¥å…·é€‰æ‹©çš„æ˜¯ <strong>ShellCraft</strong>ï¼ŒmacOS è‡ªå¸¦çš„ç»ˆç«¯å·¥å…·ä¹Ÿå¯ä»¥è¿æ¥ï¼Œå¯è§†åŒ– CentOS æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ä¸º <a href="https://filezilla-project.org/" target="_blank" rel="noopener">FileZilla</a>ï¼Œæ·»åŠ  VPS ç«™ç‚¹æ­¥éª¤åœ¨æœ¬æ–‡æœ€åã€‚</p>
<h3 id="å‡†å¤‡-1"><a href="#å‡†å¤‡-1" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>a. å®‰è£… gitï¼ŒCentOS ç³»ç»Ÿä¸‹å®‰è£… Git çš„å‘½ä»¤ä¸ºï¼š</p>
<p><code>yum install git</code></p>
<p>b. clone <strong>srs</strong>ï¼Œé”®å…¥ï¼š<br><code>git clone srs</code></p>
<blockquote>
<p>srs çš„ä½œè€…å°†å®ƒå®šä¹‰ä¸ºç›´æ’­æœåŠ¡å™¨é›†ç¾¤ï¼Œæ›´å¤šçš„ä¿¡æ¯ï¼Œè¯·ç‚¹ <a href="https://github.com/ossrs/srs" target="_blank" rel="noopener">srs Github ä¸»é¡µ</a>ã€‚</p>
</blockquote>
<p>è‹¥ clone è¿‡ç¨‹ä¸­å‡ºç° <strong>Please make sure you have the correct access rights and the repository exists.</strong> è¯´æ˜ï¼ŒSSH Key å‡ºç°äº†é—®é¢˜å¯¼è‡´æ— æ³•æ­£å¸¸ git æ“ä½œï¼Œè§£å†³å¦‚ä¸‹ä¾æ¬¡é”®å…¥ï¼š</p>
<ul>
<li><code>git config --global user.name &quot;yourname&quot;</code></li>
<li><code>git config --global user.email &quot;your@email.com&quot;</code></li>
<li><code>ssh-keygen -t rsa -C &quot;your@email.com&quot;</code></li>
<li><code>vi /root/.ssh/id_rsa.pub</code></li>
<li>å°†è¯¥æ–‡ä»¶çš„ä¸€å¤§ä¸²ä¿¡æ¯å¤åˆ¶å¹¶æ·»åŠ åˆ° Github ä¸ªäººè®¾ç½®é‡Œæ–°å»ºçš„ SSH Key ä¸­ã€‚</li>
</ul>
<p>c. cd åˆ° srs ç›®å½•ï¼Œä¾æ¬¡é”®å…¥ï¼š</p>
<p><code>git checkout 2.0release</code><br><code>git pull</code><br><code>cd trunk</code></p>
<p>d. é…ç½®è¿œç¨‹æœåŠ¡å™¨ï¼Œè¯¥è¿‡ç¨‹æå…¶æ¼«é•¿ï¼Œé”®å…¥ï¼š<br><code>./configure --disable-all --with-ssl --with-nginx --with-hls --with-http-callback --with-http-server --with-http-api --with-ffmpeg --with-transcode --with-librtmp --with-dvr &amp;&amp; make</code></p>
<p>å‡ºç°ä¸‹å›¾æ‰€ç¤ºè¡¨ç¤ºé…ç½®ç¯å¢ƒå®Œæˆï¼š<br><img src="https://lh3.googleusercontent.com/-m1LDECnVXs4/W_kiMVpYXTI/AAAAAAAAAdQ/idOv_6owTtMJCLNWDD0DCpIOMzGi-i7CgCHMYCw/I/15430538665743.jpg" alt=""></p>
<p>e. æ‰§è¡Œé…ç½®ï¼Œé”®å…¥<br><code>./objs/srs -c conf/srs.conf</code></p>
<p><img src="https://lh3.googleusercontent.com/-NEcCv6KArWI/W_kivew2BWI/AAAAAAAAAdY/GpneQQ2q1CsYCIwJDBUWgQO14fpn82sxwCHMYCw/I/Jietu20181124-180634%25402x.jpg" alt=""></p>
<h3 id="å®è·µè¿œç¨‹æ¨æµä¸æ‹‰æµ"><a href="#å®è·µè¿œç¨‹æ¨æµä¸æ‹‰æµ" class="headerlink" title="å®è·µè¿œç¨‹æ¨æµä¸æ‹‰æµ"></a>å®è·µè¿œç¨‹æ¨æµä¸æ‹‰æµ</h3><p>æ¨æµæ‹‰æµè¿‡ç¨‹å’Œæœ¬åœ°æ¨æµå‘½ä»¤ä¸€æ ·ï¼Œåªä¸è¿‡æœåŠ¡å™¨åœ°å€çš„ <strong>localhost:æ¥å£</strong> è¦æ¢æˆ<strong>æœåŠ¡å™¨åœ°å€</strong>ï¼Œå€˜è‹¥å‡ºç°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯åˆ™è¯´æ˜éœ€è¦å…³é—­ CentOS çš„é˜²ç«å¢™ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-K7Ti2qPpqY0/W_kkSGtvRCI/AAAAAAAAAdk/5VT_n3m1Jho-ENKPWdO4PGZeTNXZ7KDXQCHMYCw/I/Jietu20181124-181217%25402x.jpg" alt=""></p>
<blockquote>
<p>é”™è¯¯ä¿¡æ¯ï¼š<br>[tcp @ 0x7fd255c02b80] Connection to tcp://207.148.66.232:1935 failed: Connection refused<br>[rtmp @ 0x7fd255d0b100] Cannot open connection tcp://207.148.66.232:1935<br>rtmp://207.148.66.232/live/demo: Connection refused</p>
</blockquote>
<p><strong>å…³é—­é˜²ç«å¢™çš„å‘½ä»¤ä¸ºï¼š<code>systemctl stop firewalld.service</code></strong>ã€‚</p>
<h2 id="FileZilla-æ·»åŠ ç«™ç‚¹"><a href="#FileZilla-æ·»åŠ ç«™ç‚¹" class="headerlink" title="FileZilla æ·»åŠ ç«™ç‚¹"></a>FileZilla æ·»åŠ ç«™ç‚¹</h2><p>File -&gt; Site Manager å¼¹å‡ºå¦‚ä¸‹ç•Œé¢ï¼š</p>
<p><img src="https://lh3.googleusercontent.com/-lQGsi8EPCEQ/W_kl5cSJDKI/AAAAAAAAAd8/1MU3SqJulLcDWLH8QDKkEUbJRE3Sk_jjwCHMYCw/I/15430548184358.jpg" alt=""></p>
<p>New Site -&gt; General -&gt; Protocol é€‰æ‹©å¦‚å›¾æ‰€ç¤ºçš„ <strong>SFTP</strong>ï¼ŒLogon Type ä¸º <strong>Normal</strong>ï¼ŒHostã€User ä»¥åŠ Password è‡ªè¡Œå¡«å†™ï¼ŒConnectã€‚</p>
<p>ç•Œé¢å¦‚ä¸‹ï¼š<br><img src="https://lh3.googleusercontent.com/-a346KYF4T-Q/W_kmflf2FRI/AAAAAAAAAeI/aCD8fe4AoqQGrv9V2o8XBjB0PYN-b12oQCHMYCw/I/15430549672565.jpg" alt=""></p>
<p>ğŸ‘done!ğŸ‰</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/29/rshare-android-version/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="115 106 99">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="I'M REXZX">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/29/rshare-android-version/" itemprop="url">
                  ã€ŒRSHAREã€ ä¸€é”®åˆ†äº« Android ç‰ˆ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-29 17:03:59" itemprop="dateCreated datePublished" datetime="2018-08-29T17:03:59+08:00">2018-08-29</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-09-12 09:43:26" itemprop="dateModified" datetime="2018-09-12T09:43:26+08:00">2018-09-12</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å› ä¸ºå…¬å¸çš„é¡¹ç›®é‡Œé›†æˆäº†ä¸€é”®åˆ†äº«çš„è¿™ä¸ªæ¨¡å—, è€Œåœ¨æˆ‘è®¾è®¡çš„æ—¶å€™å‘ç°å›½å†…çš„å®˜æ–¹æ–‡æ¡£å’Œæä¾›çš„ Sample æœ‰æ··ä¹±å’Œå®¹æ˜“æ··æ·†çš„åœ°æ–¹, è€Œä¸”é™¤äº†æ™®é€šçš„ç½‘é¡µã€å›¾ç‰‡ã€æ–‡å­—åˆ†äº«åˆ°å„å¤§ Social å¹³å°ä»¥å¤–, å¯¹äºè§†é¢‘ã€æ–‡ä»¶å’Œå…¶ä»–å†…å®¹çš„åˆ†äº« Demo åœ¨ç™¾åº¦æˆ–è€… Google å‡ ä¹æœä¸åˆ°. è‡ªå·±ä¹Ÿæ˜¯è¸©äº†å¾ˆå¤šå‘æ‰æŠŠå¾ˆå¤šé—®é¢˜è§£å†³.</p>
<h2 id="æµ‹è¯•è®¾å¤‡"><a href="#æµ‹è¯•è®¾å¤‡" class="headerlink" title="æµ‹è¯•è®¾å¤‡"></a>æµ‹è¯•è®¾å¤‡</h2><p>Samsung S9 Plus, Android 8.0.0.</p>
<h2 id="æ”¯æŒå¹³å°"><a href="#æ”¯æŒå¹³å°" class="headerlink" title="æ”¯æŒå¹³å°"></a>æ”¯æŒå¹³å°</h2><p><strong>RSHARE</strong> è¿™ä¸ª Demo ä¸­æ”¯æŒ: å¾®ä¿¡ã€QQã€æ–°æµªå¾®åšã€Facebookã€GooglePlus(Google +)ã€Twitterã€WhatsAppã€Lineã€Tumblrã€Instagramã€Pinterest 11 ä¸ª Social å¹³å°.</p>
<h3 id="å¹³å°å·®å¼‚"><a href="#å¹³å°å·®å¼‚" class="headerlink" title="å¹³å°å·®å¼‚"></a>å¹³å°å·®å¼‚</h3><p>ä¸»è¦ç½—åˆ—äº†å¸¸ç”¨çš„ 5 ä¸ªåˆ†äº«å†…å®¹çš„å¯¹æ¯”èœå•(ç½‘é¡µã€æ–‡å­—ã€å›¾ç‰‡ã€æœ¬åœ°è§†é¢‘ã€æ–‡ä»¶).<br><strong>æ³¨æ„èœå•å†…å­—æ¯ä»¥åŠèœå•åé¢å¯¹åº”å­—æ¯çš„æ³¨é‡Šâš ï¸</strong></p>
<table>
<thead>
<tr>
<th>â¤ï¸</th>
<th>QQ</th>
<th>å¾®ä¿¡</th>
<th>å¾®åš</th>
<th>Facebook</th>
<th>Twitter</th>
<th>Instagram</th>
<th>WhatsApp</th>
<th>Line</th>
<th>Tumblr</th>
<th>Pinterest</th>
<th>Google+</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç½‘é¡µ</td>
<td>âœ“a</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“b</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
</tr>
<tr>
<td>æ–‡å­—</td>
<td>âœ—c</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
<tr>
<td>å›¾ç‰‡</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“d</td>
<td>âœ“d</td>
<td>âœ—</td>
</tr>
<tr>
<td>è§†é¢‘</td>
<td>?e</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
<tr>
<td>æ–‡ä»¶</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
</tbody>
</table>
<p>a. QQ è™½æ”¯æŒç½‘é¡µåˆ†äº«, ä½†æ˜¯ä¸å…è®¸å¸¦ç€ç½‘é¡µçš„ <code>description</code> å­—æ®µ, è¿™å’Œ iOS è¡¨ç°ä¸åŒ;<br>b. Facebook çš„ç½‘é¡µåˆ†äº«æ”¯æŒ <strong>hashtag</strong>;<br>c. iOS ç«¯åˆ†äº«æ–‡å­—åˆ° QQ å®¢æˆ·ç«¯æ˜¯å¯è¡Œçš„, ä½†æ˜¯ Android ç«¯ä¸å…è®¸, å…¶å® QQ çš„åˆ†äº«ç›®åœ°å°±æ˜¯<strong>è®©ç”¨æˆ·è‡ªè¡Œè¾“å…¥æœ‰ä»·å€¼ã€æœ‰æ„ä¹‰çš„æ–‡å­—ä¿¡æ¯</strong>;<br>d. Pinterest å’Œ Tumblr è™½æ”¯æŒå›¾ç‰‡åˆ†äº«, ä½†ä»…ä»…æ”¯æŒåˆ†äº«å›¾ç‰‡çš„ URL, å®ƒä¼šè‡ªè¡Œè§£æå¹¶æ˜¾ç¤º;<br>e. åªæ”¯æŒåˆ†äº«åˆ° QQ ç©ºé—´.</p>
<p>âš ï¸ 1. å¯¹äº <strong>QQ åˆ†äº« Android ç«¯</strong>, <strong>ä¸æ”¯æŒé€šè¿‡ SDK ç›´æ¥åˆ†äº«åˆ°æ•°æ®çº¿(æˆ‘çš„ç”µè„‘)å’Œæˆ‘çš„æ”¶è—.</strong><br>âš ï¸ 2. å¯¹äº <strong>WhatsApp åˆ†äº« Android ç«¯</strong>, <strong>æ”¯æŒå›¾æ–‡å¹¶å­˜.</strong> </p>
<blockquote>
<ol>
<li>å¯¹æ¯”åˆ—è¡¨å¾—çŸ¥, å›½å†…çš„å¹³å°åˆ†äº«å†…å®¹æ˜¯æœ€ä¸°å¯Œçš„, ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªä¸»è¦çš„é—®é¢˜(ä¸»è¦æ˜¯ QQ), iOS å’Œ Android åŒç«¯çš„æ¥å£ä»¥åŠå®ç°çš„åŠŸèƒ½ä¹Ÿå¹¶ä¸ç»Ÿä¸€(åé¢çš„éƒ¨åˆ†ä¼šå…·ä½“è¯´); å¾®ä¿¡åŒç«¯å½“åˆ†äº«çš„å›¾ç‰‡è¿‡å¤§çš„æ—¶å€™çš„è¡¨ç°ä¹Ÿæœ‰ä¸ç»Ÿä¸€çš„æ—¶å€™, å…¶ä½™éƒ½å¾ˆå®Œå–„; æ–°æµªçš„è¡¨ç°æ˜¯æœ€ç»Ÿä¸€çš„, ä¸”æ²¡æœ‰è¿‡å¤šé™åˆ¶; å›½å†…çš„å¹³å°åˆ†äº«æœ€è®©äººå¤´ç–¼çš„å°±æ˜¯å®˜æ–¹çš„ Sample å¾ˆæ··ä¹±, ä½†æ˜¯åœ¨å®è·µä»£ç çš„æ—¶å€™è¿˜æ˜¯è¦ä»¥å®˜æ–¹ä¸ºä¸».</li>
<li>å›½å¤–çš„æ–‡æ¡£å’Œ Sample å¾ˆæ˜äº†ä¸”æ³¨é‡Šè¯¦ç»†, ä½†ä¹Ÿå­˜åœ¨åŒç«¯ä¸ç»Ÿä¸€çš„æƒ…å†µ, Twitter çš„åŒç«¯è¡¨ç°å°±ä¸ä¸€æ ·(åé¢ç»†è¯´), ä½†æ˜¯å›½å¤–çš„å¹³å°åˆ†äº«å‡ ä¹æ²¡æœ‰å›è°ƒ, Facebook çš„å›è°ƒåªæœ‰ Feed å½¢å¼çš„åˆ†äº«æ‰æœ‰æ•ˆ, Instagramã€Lineã€Google+è¿™äº›æ˜¯æ²¡æœ‰ SDK çš„, ä»…ä»…æ˜¯é€šè¿‡æ‰“å¼€ Application URL scheme æ¥åˆ†äº«.</li>
</ol>
</blockquote>
<h2 id="åˆ†äº«æ€»ä½“è®¾è®¡"><a href="#åˆ†äº«æ€»ä½“è®¾è®¡" class="headerlink" title="åˆ†äº«æ€»ä½“è®¾è®¡"></a>åˆ†äº«æ€»ä½“è®¾è®¡</h2><p>å¤§æ¦‚çš„åˆ†äº«é€»è¾‘å¦‚ä¸‹:</p>
<p><img src="https://lh3.googleusercontent.com/-9k6SFlwycnU/W4dQ67__G3I/AAAAAAAAAUg/Qd5u_D4WwjodH_gUDzD5N1T7KR_fWP7qwCHMYCw/I/Android%2B" alt="Android åˆ†äº«é€»è¾‘"></p>
<p>Android çš„åˆ†äº«æ˜¯å‚ç…§å„å¤§å¹³å°çš„åˆ†äº«é€»è¾‘å¾—åˆ°æ¯”è¾ƒç»Ÿä¸€æ€è·¯, å³: å…ˆåˆ¤æ–­æ˜¯å¦å®‰è£…å¯¹åº”åº”ç”¨, ç„¶ååˆå§‹åŒ– SDK ä¸å®˜æ–¹å¹³å°è¿æ¥, ç„¶ååŒ…è£…åˆ†äº«å‚æ•°è¿›è¡Œåˆ†äº«, æœ€åå¤„ç†åˆ†äº«å›è°ƒ, åªä¸è¿‡ä¸ iOS ç«¯ä¸åŒçš„æ˜¯, åˆå§‹åŒ– SDK çš„å·¥ä½œæ˜¯åœ¨åˆ†äº«é€»è¾‘å†…å®Œæˆçš„, å¹¶ä¸å¯¹å¤–å¼€æ”¾(çµæ„Ÿæ¥è‡ª ShareSDK çš„ Android ç‰ˆ), <strong><code>AppID</code>ã€<code>Key</code> ä»¥åŠ <code>Secret</code> ä¿¡æ¯åœ¨ <code>RShare.xml</code> æ–‡ä»¶ä¸­é…ç½®.</strong></p>
<blockquote>
<ol>
<li>æœ‰äº›å¹³å°ä¸å­˜åœ¨ SDK, æ‰€ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦å¹³å°å®‰è£…ç„¶ååŒ…è£…åˆ†äº«å‚æ•°è¿›è¡Œåˆ†äº«;</li>
<li>Tumblr æ¯”è¾ƒç‰¹æ®Š, æœ‰ SDK ä½†æ˜¯ä¸éœ€è¦åˆ¤æ–­åº”ç”¨æ˜¯å¦å®‰è£…å°±å¯ä»¥åˆ†äº«, Twitter ä¹Ÿå¦‚æ­¤, å…·ä½“æƒ…å†µåœ¨ Twitter çš„éƒ¨åˆ†è¯´æ˜;</li>
<li>SDK çš„åˆå§‹åŒ–, ç»Ÿä¸€å‡½æ•°åå­—ä¸º <code>sdkInitialize</code>(<strong>ä½†å¹¶æœªå¯¹å¤–å¼€æ”¾</strong>), <code>Key</code>ã€<code>Secret</code> ä»¥åŠ <code>AppID</code> ç­‰ä¿¡æ¯åœ¨æ³¨é‡Šä¸­æœ‰æ ‡æ˜.</li>
</ol>
</blockquote>
<h2 id="è¯¦ç»†é€»è¾‘"><a href="#è¯¦ç»†é€»è¾‘" class="headerlink" title="è¯¦ç»†é€»è¾‘"></a>è¯¦ç»†é€»è¾‘</h2><p><strong>å…³äºå„ä¸ªå¹³å°çš„å¼€å‘è€…ä¸»é¡µå’Œæ–‡æ¡£ä¿¡æ¯ä»¥è¿™é‡Œä¸ºä¸», ä»£ç æ³¨é‡Šçš„å¯èƒ½ä¸å‡†ç¡®.</strong></p>
<p>å¹³å°åˆ†äº«éƒ½æ˜¯é€šè¿‡<strong>å•ä¾‹æ¨¡å¼</strong>å®ç°.</p>
<h3 id="åŸºç±»"><a href="#åŸºç±»" class="headerlink" title="åŸºç±»"></a>åŸºç±»</h3><p>å­å¹³å° Manager éƒ½æ˜¯ç»§æ‰¿è‡ª <strong>RShare</strong>, è¿™ä¸ªç±»ä¸­å®šä¹‰äº†åˆ†äº« <strong>Mode (ä»£ç æ³¨é‡Šä¸­æœ‰æ ‡æ˜)</strong>ã€åˆ†äº«å†…å®¹ç±»å‹æšä¸¾(å†…éƒ¨ä½¿ç”¨) <strong>ShareContentType</strong> ä»¥åŠ<strong>åˆ†äº«å›è°ƒ</strong>.<br>Java ä¸­åˆ›å»ºç›‘å¬å™¨æ¥ç›‘å¬åˆ†äº«ç»“æœ:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RShareListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">(RSharePlatform.Platform platform)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onFail</span><span class="params">(RSharePlatform.Platform platform, String errorInfo)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(RSharePlatform.Platform platform)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Kotlin ä¸­é€šè¿‡ callback æ¥ç›‘å¬åˆ†äº«ç»“æœ:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">typealias RShareCallback = ((platform : RSharePlatform, state : ShareState, errorInfo : String?) -&gt;</span><br><span class="line"><span class="built_in">Unit</span>)</span><br></pre></td></tr></table></figure>
<p><strong>Mode(ä»…å¯¹ Facebookã€Twitterã€Instagram æœ‰æ•ˆ, iOS äº¦ç„¶):</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Mode &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é»˜è®¤çš„åˆ†äº«æ–¹å¼</span></span><br><span class="line"><span class="comment">     * Facebook: ä¼˜å…ˆå®¢æˆ·ç«¯åˆ†äº«, å®¢æˆ·ç«¯æ— æ³•åˆ†äº«ä¼šè½¬ç”±ç½‘é¡µå½¢å¼åˆ†äº«.</span></span><br><span class="line"><span class="comment">     * Twitter: ä¼˜å…ˆåº”ç”¨å†…åˆ†äº«.</span></span><br><span class="line"><span class="comment">     * Instagram: é»˜è®¤å®¢æˆ·ç«¯åˆ†äº«.</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    Automatic,</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * åŸç”Ÿåº”ç”¨åˆ†äº«.</span></span><br><span class="line"><span class="comment">      * Facebookã€Twitter: æ— å›è°ƒ.</span></span><br><span class="line"><span class="comment">      ** */</span></span><br><span class="line">    Native,</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * ç½‘é¡µåˆ†äº«, æœ‰å›è°ƒ, ä»…å¯¹Facebookç”Ÿæ•ˆ.</span></span><br><span class="line"><span class="comment">       * */</span></span><br><span class="line">    Web,</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * åé¦ˆç½‘é¡µå½¢å¼åˆ†äº«, æœ‰å›è°ƒ, ä»…å¯¹Facebookç”Ÿæ•ˆ.</span></span><br><span class="line"><span class="comment">      * */</span></span><br><span class="line">    Feed,</span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * è°ƒç”¨ Android ç³»ç»Ÿåˆ†äº«.</span></span><br><span class="line"><span class="comment">      * */</span></span><br><span class="line">    System,</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ShareContentType:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> ShareContentType &#123;</span><br><span class="line">    Webpage,</span><br><span class="line">    Photo,</span><br><span class="line">    Video,</span><br><span class="line">    Text,</span><br><span class="line">    Media,</span><br><span class="line">    File,</span><br><span class="line">    Music,</span><br><span class="line">    App</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><p>åœ¨ <code>src/main</code> ç›®å½•ä¸‹æ–°å»ºèµ„æºæ–‡ä»¶å¤¹ <code>assets</code>, å¹¶åˆ›å»º <strong>RShare.xml</strong> é…ç½®æ–‡ä»¶, æ–‡ä»¶å†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Platform</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Twitter</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ConsumerKey</span>= <span class="string">yourKey</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ConsumerSecret</span>= <span class="string">yourAppSecret</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Facebook</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppID</span>= <span class="string">yourAppID</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppSecret</span>= <span class="string">yourAppSecret</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">WeChat</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppId</span>= <span class="string">yourAppID</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppSecret</span>= <span class="string">yourAppSecret</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Sina</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppKey</span>= <span class="string">yourAppKey</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppSecret</span>= <span class="string">yourAppSecret</span></span></span><br><span class="line"><span class="tag">        <span class="attr">RedirectUrl</span>= <span class="string">yourRedirectUrl</span></span></span><br><span class="line"><span class="tag">        <span class="attr">Scope</span>=<span class="string">"all"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">QQ</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppID</span>= <span class="string">yourAppID</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppSecret</span>= <span class="string">yourAppSecret</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Tumblr</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ConsumerKey</span>= <span class="string">yourKey</span></span></span><br><span class="line"><span class="tag">        <span class="attr">ConsumerSecret</span>= <span class="string">yourAppSecret</span>        </span></span><br><span class="line"><span class="tag">        <span class="attr">FlurryKey</span>= <span class="string">yourFlurryKey</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Pinterest</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppId</span>= <span class="string">yourAppID</span></span></span><br><span class="line"><span class="tag">        <span class="attr">AppSecret</span>= <span class="string">yourAppSecret</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">Platform</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>å…³äºå“ªäº›å­—æ®µä¸éœ€è¦, åœ¨åé¢ä¼šè®²æ˜.</strong></p>
<p>å·¥å…·ç±» <code>RPlatformHelper</code> ä¸­å°è£…äº†è§£æ <strong>RShare.xml</strong> å¹¶è·å–å„ä¸ªå¹³å° <code>Id</code>ã€<code>key</code> ä»¥åŠ <code>secret</code> ä¿¡æ¯çš„æ–¹æ³•.</p>
<h3 id="å›¾ç‰‡çš„å¤„ç†"><a href="#å›¾ç‰‡çš„å¤„ç†" class="headerlink" title="å›¾ç‰‡çš„å¤„ç†"></a>å›¾ç‰‡çš„å¤„ç†</h3><p>ä¸ iOS ä¸åŒçš„æ˜¯, Android ç«¯å¹³å°åˆ†äº«å›¾ç‰‡çš„é€šè¿‡<strong>å›¾ç‰‡çš„ Url</strong> æ¥è¿›è¡Œå‚æ•°çš„åŒ…è£…åˆ°åˆ†äº«. åœ¨æ­¤, æˆ‘å°è£…çš„æ¥å£ä¼ å›¾ç‰‡å‚æ•°æ˜¯ä»¥ Bitmap å½¢å¼ä¼ å€¼çš„, ç„¶åä¿å­˜å›¾ç‰‡æ•°æ®åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹, è·å–æ•°æ®çš„ Url åŒ…è£…åˆ°å¹³å° SDK æˆ–è€…åŒ…è£…åˆ° Intent ä¸­åˆ†äº«.</p>
<p><strong>âš ï¸ å‡å¦‚è¿™ä¸ªå›¾ç‰‡æ˜¯ç½‘ç»œè¯·æ±‚ä¸‹æ¥çš„, é‚£ä¹ˆå®Œæ•´çš„åˆ†äº«æ­¥éª¤å°±æ˜¯:</strong><br><img src="https://lh3.googleusercontent.com/-MXlzlURYzn4/W4yX50h8eXI/AAAAAAAAAU4/6NxMqPrEnvsSscJwcEPxPN4sjYB2Z8XDgCHMYCw/I/15359405805597.jpg" alt=""></p>
<p><strong>å¤šå‡ºä¸€æ­¥å†ä¿å­˜, é€ æˆä¸å¿…è¦çš„å¼€é”€.</strong></p>
<p>Java ç‰ˆæœ¬ä¸­, ä¿å­˜å›¾ç‰‡çš„æ¥å£å°è£…åˆ°å·¥å…·ç±» <code>RFileHelper</code> ä¸­; Kotlin ç‰ˆæœ¬ä¸­, ç”¨<strong>é¡¶å±‚å‡½æ•°</strong>æ›¿ä»£äº†å·¥å…·ç±», æ•´åˆåˆ°äº† <code>RFileHelper.kt</code> æ–‡ä»¶ä¸­:</p>
<p>ä¿å­˜å›¾ç‰‡:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFileHelper.saveBitmapToExternalSharePath(context, targetImage);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">saveBitmapToExternalSharePath(context, targetImage)</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤å›¾ç‰‡:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFileHelper.deleteExternalShareDirectory(context);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deleteExternalShareDir(context)</span><br></pre></td></tr></table></figure>
<h4 id="æ–‡ä»¶å…±äº«"><a href="#æ–‡ä»¶å…±äº«" class="headerlink" title="æ–‡ä»¶å…±äº«"></a>æ–‡ä»¶å…±äº«</h4><p>ä» Android 7.0 å¼€å§‹, å…¶ä»–åº”ç”¨ä½¿ç”¨æœ¬åº”ç”¨çš„æŸæ–‡ä»¶ <code>file://</code> æ ¼å¼çš„ <strong>URI</strong> ä¼šæŠ› <strong>FileUriExposedException</strong> çš„å¼‚å¸¸(æ–°æµª SDK å°±å­˜åœ¨è¿™ä¸ªé—®é¢˜), æ‰€ä»¥åœ¨ <code>RFileHelper</code> ä¸­å°è£…å¥½äº†å¯¹åº”æ–¹æ³•:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RFileHelper.detectFileUriExposure();</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">Kotlin:</span><br><span class="line"></span><br><span class="line">```kotlin</span><br><span class="line">detectFileUriExposure()</span><br></pre></td></tr></table></figure>
<h3 id="QQ"><a href="#QQ" class="headerlink" title="QQ"></a>QQ</h3><h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="http://open.qq.com/" target="_blank" rel="noopener">è…¾è®¯å¼€å‘è€…ä¸»é¡µ</a>, <a href="http://wiki.open.qq.com/wiki/mobile/SDK%E4%B8%8B%E8%BD%BD" target="_blank" rel="noopener">SDK ä¸‹è½½</a>, QQ SDK ç›®å‰<strong>ä¸æ”¯æŒ compile é›†æˆ</strong>, Android API è°ƒç”¨è¯´æ˜<a href="http://wiki.open.qq.com/wiki/mobile/API%E8%B0%83%E7%94%A8%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener">æ–‡æ¡£</a>.</p>
<h4 id="é›†æˆ"><a href="#é›†æˆ" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. æ‰‹åŠ¨æ·»åŠ  SDK åˆ° <code>libs</code> æ–‡ä»¶å¤¹, å¹¶:</p>
<p><img src="https://lh3.googleusercontent.com/-7DCJppBupJA/W4eaDI_LncI/AAAAAAAAAUs/hpVlStBvt_celCw2za386XN9rVRPD932ACHMYCw/I/Snip20180830_7.png" alt="Snip20180830_7"></p>
<p>b. åœ¨ <strong>AndroidManifest.xml</strong> çš„ <code>&lt;application&gt;</code> èŠ‚ç‚¹ä¸‹å¢åŠ :</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:name</span>=<span class="string">"com.tencent.tauth.AuthActivity"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:noHistory</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:launchMode</span>=<span class="string">"singleTask"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></span><br><span class="line">       	<span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line">       	<span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.BROWSABLE"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"tencentYOURAPPID"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>c. æ·»åŠ ä»¥ä¸‹æƒé™:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_EXTERNAL_STORAGE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£åŠå†…éƒ¨å®ç°"><a href="#æ¥å£åŠå†…éƒ¨å®ç°" class="headerlink" title="æ¥å£åŠå†…éƒ¨å®ç°"></a>æ¥å£åŠå†…éƒ¨å®ç°</h4><p><strong>a. å†…éƒ¨åˆå§‹åŒ– SDK</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Tencent mTencent;</span><br><span class="line">mTencent = Tencent.createInstance(appId, context);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTencent : Tencent</span><br><span class="line">mTencent = Tencent.createInstance(appId, context)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>åŠŸèƒ½çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p>QQ Android SDK åˆ†äº«æ˜¯é€šè¿‡ <strong>Bundle</strong> è¿›è¡Œæ•°æ®åŒ…è£…ä¼ è¾“, åœ¨è¿™é‡Œåˆ†äº«éŸ³ä¹ã€ç½‘é¡µã€åº”ç”¨ç­‰ç­‰çš„é”®å€¼å¯¹éƒ½å°è£…åœ¨ <code>QQShare.class</code> ä¸­, å¾ˆå®¹æ˜“æ··æ·†å’Œè¯¯ä¼š, å®Œå–„å†…å®¹åˆ†äº«çš„æ—¶å€™<strong>ä¸€å®šè¦å‚ç…§å®˜æ–¹çš„ç¤ºä¾‹ç¨‹åº!</strong></p>
<p>QQ å®¢æˆ·ç«¯å’Œ QQ ç©ºé—´çš„åˆ†äº«æ¨¡å‹éƒ½å°è£…åœ¨ <code>RQqHelper</code> ä¸­, ä½†æ˜¯åˆ†äº«å¯åŠ¨çš„ Activity å°† QQ å®¢æˆ·ç«¯å’Œ QQ ç©ºé—´çš„åˆ†å¼€, åˆ†åˆ«æ˜¯ <code>RQqActivity</code> å’Œ <code>RQZoneActivity</code> åœ¨åˆ†äº« Activity ä¸­å®ç°æ¥å£ <code>IUiListener</code> ç”¨æ¥ç›‘å¬åˆ†äº«ç»“æœ.</p>
<p>å¦, Android ç«¯<strong>ä¸æ”¯æŒç›´æ¥æ‰“å¼€â€˜æˆ‘çš„æ”¶è—â€™å’Œâ€˜æ•°æ®çº¿(æˆ‘çš„ç”µè„‘)â€™åˆ†äº«</strong>, éœ€è‡ªè¡Œé€‰æ‹©, å¹¶ä¸”<strong>ä¸æ”¯æŒçº¯æ–‡å­—åˆ†äº«</strong>.</p>
<p>âš ï¸æœ€å, <strong>QQ åˆ†äº«ä¸€å®šè¦åœ¨ä¸»çº¿ç¨‹é‡Œå®Œæˆ!!!</strong> è·å– <code>mainHandler</code> å·²å°è£…åˆ°äº† <code>RThreadManager</code> ä¸­(å†™æ³•æœ‰è¯¯æˆ–è€…å†™æ³•æœ‰ä¸è¶³è¯·ä¸¥å‰æŒ‡å‡º):</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">å†…éƒ¨:</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Object mMainHandlerLock = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Handler <span class="title">getMainHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mManinHandler == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (mMainHandlerLock) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mManinHandler == <span class="keyword">null</span>) &#123;</span><br><span class="line">                mManinHandler = <span class="keyword">new</span> Handler(Looper.getMainLooper());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> mManinHandler;</span><br><span class="line">&#125;</span><br><span class="line">è°ƒç”¨:</span><br><span class="line">RThreadManager.getMainHandler().post(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">/// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">å†…éƒ¨:</span><br><span class="line">private var mMainHandlerLock = Any()</span><br><span class="line">internal val mainHandler : Handler = Handler()</span><br><span class="line">    get() &#123;</span><br><span class="line">        if (field == null) &#123;</span><br><span class="line">            synchronized(mMainHandlerLock) &#123;</span><br><span class="line">                if (field == null) &#123;</span><br><span class="line">                    field = Handler(Looper.getMainLooper())</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return field</span><br><span class="line">    &#125;</span><br><span class="line">è°ƒç”¨:</span><br><span class="line">mainHandler.post(</span><br><span class="line">    Runnable &#123;</span><br><span class="line">        kotlin.run &#123;</span><br><span class="line">            /// ...</span><br><span class="line">       &#125;</span><br><span class="line"> )</span><br></pre></td></tr></table></figure>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().shareWebpage(context, webapgeUrl, title, description, thumbImage, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.shareWebpage(context, webpageUrl, title, description, thumbImageUrl, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-lQNWh_xUCIM/W43gU-RtgNI/AAAAAAAAAVE/avOZBakVVpgtmw8RW4qf2ZDzmtpkC21PwCHMYCw/I/15360246543930.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().shareImage( context, targetImage, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.shareImage(context, targetImage, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-aherZ9UNyxE/W43jH4GEkBI/AAAAAAAAAVQ/QaPWBeRGtHEW6C-IZ7KbubjKqqRSm3UCgCHMYCw/I/15360253735120.jpg" alt=""></p>
<p><strong>éŸ³é¢‘é“¾åˆ†äº«:</strong></p>
<p>å¤§è‡´å’Œç½‘é¡µçš„åˆ†äº«ç›¸åŒ, ä½†æ˜¯å¤šäº†ä¸€ä¸ª <code>audioStreamUrl</code> çš„å­—æ®µ.</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().shareMusic(context, audioStreamUrl, musicWebapgeUrl, title, description, thumbImage, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.shareMusic(context, audioStreamUrl, musicWebpageUrl, title, description, thumbImageUrl, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. åœ¨è‡ªå®šä¹‰ Bundle åŒ…è£…åˆ†äº«éŸ³é¢‘å‚æ•°çš„æ—¶å€™, <code>QQShare.SHARE_TO_QQ_TARGET_URL</code> è®¾ç½®éŸ³é¢‘ç½‘é¡µé“¾æ¥, <code>QQShare.SHARE_TO_QQ_AUDIO_URL</code> è®¾ç½®éŸ³é¢‘æµé“¾.<br>âš ï¸ 2. <code>audioStreamUrl</code> è¯·è®¾ç½®éŸ³é¢‘çš„éŸ³é¢‘æµé“¾æ¥, ä¸è¦æŠŠéŸ³ä¹å¹³å°åˆ†äº«çš„éŸ³ä¹ç½‘é“¾ç›´æ¥èµ‹å€¼åœ¨è¯¥å­—æ®µä¸Š, å¦åˆ™ç‚¹å‡»æ’­æ”¾æŒ‰é’®æ˜¯æ— æ³•æ’­æ”¾çš„, éŸ³ä¹ç½‘é“¾æ˜¯æ”¾åœ¨ <code>webpageUrl</code> å­—æ®µä¸Šçš„.</p>
</blockquote>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-D-jkZ9akfE8/W43mzu-YkvI/AAAAAAAAAVc/9qmI6Sc2HK8Uc2TaIZAvPdyLtF2z-jMuwCHMYCw/I/15360263169688.jpg" alt=""></p>
<p><strong>åº”ç”¨åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().shareApp(context, appUrl, title, description, thumbImage, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.shareApp(context, appUrl, title, description, thumbImageUrl, callback)</span><br></pre></td></tr></table></figure>
<p>ç‚¹å‡»æ¶ˆæ¯å¯¹è¯æ¡†ä¼šè‡ªåŠ¨è·³è½¬åˆ°ã€Œåº”ç”¨å®ã€å¯¹åº” App ä¸»é¡µ.</p>
<p><strong>åˆ†äº«ç½‘é¡µåˆ°ç©ºé—´:</strong></p>
<p>Java:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().shareWebpageToZone(context, webapgeUrl, title, description, imageUrlList, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.shareWebpageToZone(context, webpageUrl, title, description, imageUrlList, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. è¿™é‡Œçš„ç¼©ç•¥å›¾æ•°ç»„é‡Œé¢æ˜¯<strong>å›¾ç‰‡çš„ç½‘ç»œé“¾æ¥</strong>.<br>âš ï¸ 2. ç¼©ç•¥å›¾å›¾ç‰‡æ˜¯ä»¥æ•°ç»„åŒ…è£…çš„, ä½†æ˜¯ä»…ä»…ä¼šæ˜¾ç¤ºç¬¬ä¸€å¼ , ä¹Ÿå°±æ˜¯è¯´ç›®å‰çš„ SDK (3.3.3 ç‰ˆæœ¬) æ˜¯ä¸å…·å¤‡ç½‘ç»œå¤šå›¾åˆ†äº«çš„, ä½†è…¾è®¯å·²è¯´æ˜å¤šç½‘ç»œå›¾åé¢ä¼šå®Œå–„å’Œè¡¥å…¨.</p>
</blockquote>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-vOtMU3GUtQs/W43poY1ypPI/AAAAAAAAAVo/HN7T-g7TL8IoRid3cHW9JC-XnmOX3oR6ACHMYCw/I/15360270395528.jpg" alt=""></p>
<p><strong>åˆ†äº«å›¾ç‰‡åˆ°ç©ºé—´:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().publishImagesToZone(context, targetImages, description, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.publishImagesToZone(context, targetImages, description, callback)</span><br></pre></td></tr></table></figure>
<p><code>description</code> å­—æ®µå®é™…æ˜¯å¤±æ•ˆçš„.</p>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-jewSxMbq3kA/W43ra0e7vTI/AAAAAAAAAV0/WZshp4eAaM4RYNSJz1FtGBsbH-TjYNSmQCHMYCw/I/15360274983078.jpg" alt=""></p>
<p><strong>åˆ†äº«æœ¬åœ°è§†é¢‘åˆ°ç©ºé—´:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.getInstance().publishVideoToZone(context, localVideoUrl, description, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RQqManager.instance.publishVideoToZone(context, localVideoUrl, description, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-6j1kjXWbnKo/W43ss4tVYpI/AAAAAAAAAWA/OTdMUq3hRZAK2kBIOT9WdMltMKQ_d_ySwCHMYCw/I/15360278242935.jpg" alt=""></p>
<h3 id="å¾®ä¿¡"><a href="#å¾®ä¿¡" class="headerlink" title="å¾®ä¿¡"></a>å¾®ä¿¡</h3><h4 id="å‡†å¤‡-1"><a href="#å‡†å¤‡-1" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://open.weixin.qq.com/" target="_blank" rel="noopener">å¾®ä¿¡å¼€æ”¾å¹³å°</a>, <a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419319167&amp;token=&amp;lang=zh_CN" target="_blank" rel="noopener">SDK ä¸‹è½½</a>, å¾®ä¿¡ SDK <strong>æ”¯æŒ compile é›†æˆ</strong>, <a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419317340&amp;token=&amp;lang=zh_CN" target="_blank" rel="noopener">åˆ†äº« &amp; æ”¶è— API è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-1"><a href="#é›†æˆ-1" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a.<br>åœ¨ <strong>Application çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile 'com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile 'com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‰è€…åŒ…æ‹¬ç»Ÿè®¡åŠŸèƒ½.</p>
<p>b. æ·»åŠ ä»¥ä¸‹æƒé™:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.READ_PHONE_STATE"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>c. å½“éœ€è¦åœ¨åˆ†äº«å®Œæ¯•åæ¥å—å¾®ä¿¡çš„ä¼ å€¼éœ€è¦<strong>åœ¨ä½ çš„åŒ…åç›¸åº”ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª wxapi ç›®å½•ï¼Œå¹¶åœ¨è¯¥ wxapi ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª <code>WXEntryActivity</code> ç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ª <code>Activity</code></strong>, åœ¨ <strong>AndroidManifest.xml</strong> çš„ <code>&lt;application&gt;</code> èŠ‚ç‚¹ä¸‹å¢åŠ :</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".wxapi.WXEntryActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£åŠå†…éƒ¨å®ç°-1"><a href="#æ¥å£åŠå†…éƒ¨å®ç°-1" class="headerlink" title="æ¥å£åŠå†…éƒ¨å®ç°"></a>æ¥å£åŠå†…éƒ¨å®ç°</h4><p><strong>a. å†…éƒ¨åˆå§‹åŒ– SDK</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IWXAPI mIwxapi = WXAPIFactory.createWXAPI(context, appId);</span><br><span class="line">mIwxapi.registerApp(appId);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> mIWXApi = WXAPIFactory.createWXAPI(context, appId)</span><br><span class="line">mIWXApi.registerApp(appId)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>åŠŸèƒ½çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p>å¾®ä¿¡åˆ†äº«çš„å†…å®¹åŒ…è£…åŒæ ·é€šè¿‡ä¸€ä¸ª <code>RWechatHelper</code> è¿›è¡Œå•ç‹¬å¤„ç†, å¯¹äºæ–‡å­—ã€ç½‘é¡µã€å›¾ç‰‡ã€è§†é¢‘ç½‘é“¾ã€å°ç¨‹åºã€æ–‡ä»¶çš„åˆ†äº«å†…å®¹å¤„ç†éƒ½å¾ˆç®€å•, ç‰¹åˆ«æ³¨æ„çš„å°±æ˜¯å¯¹äºéŸ³ä¹é“¾çš„åˆ†äº«, åŒ QQ ä¸€æ ·, éœ€è¦åŒºåˆ«ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªæ˜¯<strong>éŸ³é¢‘æµ</strong>é“¾, ä¸€ä¸ªæ˜¯<strong>éŸ³é¢‘ç½‘é¡µ</strong>, æ’­æ”¾çš„æ˜¯éŸ³é¢‘æµ, ç‚¹å‡»èƒŒæ™¯è¿›å…¥çš„æ˜¯éŸ³é¢‘ç½‘é¡µ:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WXMusicObject obj = <span class="keyword">new</span> WXMusicObject();</span><br><span class="line">obj.musicUrl = webpageUrl;</span><br><span class="line">obj.musicDataUrl = streamUrl;</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> obj : WXMusicObject = WXMusicObject()</span><br><span class="line">obj.musicUrl = webpageUrl</span><br><span class="line">obj.musicDataUrl = streamUrl</span><br></pre></td></tr></table></figure>
<p>åœ¨ç¨‹åºéœ€è¦æ¥å—å¾®ä¿¡å‘é€çš„è¯·æ±‚çš„æ—¶å€™, éœ€è¦åœ¨ <code>WXEntryActivity</code> ä¸­å®ç° <code>IWXAPIEventHandler</code> æ¥å£ï¼Œå¾®ä¿¡å‘é€çš„è¯·æ±‚å°†å›è°ƒåˆ° <code>onReq</code> æ–¹æ³•ï¼Œå‘é€åˆ°å¾®ä¿¡è¯·æ±‚çš„å“åº”ç»“æœå°†å›è°ƒåˆ° <code>onResp</code> æ–¹æ³•, åœ¨ <code>WXEntryActivity</code> ä¸­å°†æ¥æ”¶åˆ°çš„ <code>intent</code> åŠå®ç°äº† <code>IWXAPIEventHandler</code> æ¥å£çš„å¯¹è±¡ä¼ é€’ç»™ <code>IWXAPI</code> æ¥å£çš„ <code>handleIntent</code> æ–¹æ³•. ä¸ºäº†è®© <code>RWechatManager</code> å¤„ç†ç»“æœ, åœ¨ <code>RWechatManager</code> ä¸­å°è£…äº† <code>onResp</code> æ–¹æ³•.</p>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.getInstance().shareText(context, description, scene, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.instance.shareText(context, description, scene, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹):</p>
<p><img src="https://lh3.googleusercontent.com/-zlfWRC10SJI/W44xTp6FUUI/AAAAAAAAAWM/j3UlQcde5LgRDxALeJUlOJqdBj2wVVyLwCHMYCw/I/15360453876894.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.getInstance().shareImage(context, targetImage, scene, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.instance.shareImage(context, targetImage, scene, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ å›¾ç‰‡è¿‡å¤§æ— æ³•è°ƒèµ·å¾®ä¿¡å®¢æˆ·ç«¯åˆ†äº«.</p>
</blockquote>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹):</p>
<p><img src="https://lh3.googleusercontent.com/-BFFGh29k4RY/W44y4BgsUMI/AAAAAAAAAWY/7lFoyibp1WUW-np_HEDCKo_GbH1p6SGjwCHMYCw/I/15360457905870.jpg" alt=""></p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.getInstance().shareWebpage(context, webapgeUrl, title, description, thumbImage, scene, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.instance.shareWebpage(context, webpageUrl, title, description, thumbImage, scene, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. <code>thumbImage</code> å­—æ®µçš„ç¼©ç•¥å›¾å¤§å°ä¸èƒ½è¶…è¿‡ 32 Kb, ä½†å®é™…æµ‹è¯• 100 Kb å·¦å³ä¹Ÿæ˜¯å®Œå…¨å¯è¡Œçš„, ä½†ä¸€å®šä¸èƒ½è¿‡å¤§.<br>âš ï¸ 2. Android  å¯¹äºç¼©ç•¥å›¾çš„å¤„ç†ç›¸å¯¹å‹å¥½å¾ˆå¤š, å¯¹äº iOS æ— æ³•åˆ†äº«çš„è¿‡å¤§çš„ç¼©ç•¥å›¾æ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹ Android éƒ½èƒ½æˆåŠŸå¯åŠ¨å¾®ä¿¡å®¢æˆ·ç«¯å¹¶ä¸”æˆåŠŸåˆ†äº«(äº²æµ‹).<br>âš ï¸ 3. åœ¨ç¼©ç•¥å›¾æ²¡æœ‰ç¬¦åˆè§„èŒƒçš„æ—¶å€™, å³ä½¿æˆåŠŸåˆ†äº«åœ¨ iOS ç«¯ä¹Ÿä¼šå‡ºç°<strong>ç¼©ç•¥å›¾ä¸æ˜¾ç¤º</strong>çš„æƒ…å†µ, Android å‡ ä¹éƒ½ä¼šæ˜¾ç¤º.</p>
</blockquote>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹):<br><img src="https://lh3.googleusercontent.com/-7oN-sXKGMQ8/W440TO936mI/AAAAAAAAAWk/6vI9YPJVUWMcl9DpFXEW1PjP9VElZIvJgCHMYCw/I/15360461549519.jpg" alt=""></p>
<p><strong>è§†é¢‘é“¾åˆ†äº«:</strong><br>å®è´¨å°±æ˜¯ç½‘é¡µçš„åˆ†äº«, åœ¨æ­¤ä¸ä½œä»£ç ç¤ºä¾‹.</p>
<p><strong>éŸ³é¢‘é“¾åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.getInstance().shareMusic(context, audioStreamUrl, title, description, thumbImage, musicWebapgeUrl, scene, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.instance.shareMusic(context, audioStreamUrl, title, description, thumbImage, musicWebapgeUrl, scene, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹):</p>
<p><img src="https://lh3.googleusercontent.com/-CcKR16KLjD4/W441by2jDAI/AAAAAAAAAWw/DFJRiBzve28k3tf6lwfdr5CshnZWiBejwCHMYCw/I/15360464461727.jpg" alt=""></p>
<p><strong>å°ç¨‹åºåˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.getInstance().shareMiniProgram(context, userName, path, MiniProgramType, webapgeUrl, title, description, thumbImage, scene, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.instance.shareMiniProgram(context, userName, path, MINIPROGRAM_TYPE, webpageUrl,title, description, thumbImage, scene, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. demo ä¸­ç¬”è€…å¹¶æ²¡æœ‰ç¼–å†™å°ç¨‹åº, ä»…ä»…ä¾ç…§å¾®ä¿¡çš„ SDK è¿›è¡Œäº†å‚æ•°çš„è®¾ç½®, æ‰€ä»¥æ— æ³•åˆ†äº«, ä½†å…·ä½“çš„å‚æ•°è®¾ç½®å½¢å¼åœ¨ demo ä¸­æ˜ç¡®æ ‡æ˜.<br>âš ï¸ 2. å°ç¨‹åºåˆ†ä¸‰ç§ç±»å‹, <code>type</code> å­—æ®µåˆ†: <strong>å‘å¸ƒ</strong>ã€<strong>é¢„è§ˆ</strong>ä»¥åŠ<strong>ä½“éªŒ</strong>ä¸‰ä¸ªç‰ˆæœ¬.</p>
</blockquote>
<p><strong>æ–‡ä»¶åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.getInstance().shareFile(context, localFileUrl, title, thumbImage, scene, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWechatManager.instance.shareFile(context, localFileUrl, title, thumbImage, scene, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. è§†é¢‘æ–‡ä»¶æ— æ³•æ‰“å¼€, éœ€è¦åˆ«çš„åº”ç”¨æ”¯æŒ, å›¾ç‰‡å’Œæ™®é€šæ–‡æ¡£å¯ä»¥æ‰“å¼€.<br>âš ï¸ 2. æ–‡ä»¶åˆ†äº«<strong>ä¸æ”¯æŒåˆ†äº«åˆ°æœ‹å‹åœˆ</strong>.<br>âš ï¸ 3. åœ¨è®¾ç½®<strong>ç¼©ç•¥å›¾</strong>çš„æƒ…å†µä¸‹, iOS ç«¯çš„å¯¹è¯æ¡†æ˜¯ä¸æ˜¾ç¤ºç¼©ç•¥å›¾çš„, ä½†æ˜¯ Android å¯ä»¥, ä½†ä¹Ÿä»…é™äºå‘é€æ–¹èƒ½çœ‹è§.</p>
</blockquote>
<p>è¡¨ç°(åˆ†äº«è§†é¢‘åˆ°å¾®ä¿¡å¥½å‹):<br><img src="https://lh3.googleusercontent.com/-OrqFKygZa6k/W45JKvdpI-I/AAAAAAAAAW8/d4Y4Z3t2LVMwQDs55fpwoOyUPfq23eouQCHMYCw/I/15360514953939.jpg" alt=""><br><img src="https://lh3.googleusercontent.com/-_d5Fmi8rENk/W45JMexbPEI/AAAAAAAAAXA/NkL3Wlo_45wRAotYADgDMaK3-UplPvn2QCHMYCw/I/15360515040489.jpg" alt=""></p>
<h3 id="æ–°æµª"><a href="#æ–°æµª" class="headerlink" title="æ–°æµª"></a>æ–°æµª</h3><h4 id="å‡†å¤‡-2"><a href="#å‡†å¤‡-2" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="http://open.weibo.com/" target="_blank" rel="noopener">æ–°æµªå¼€æ”¾å¹³å°</a>, <a href="http://open.weibo.com/wiki/SDK#android_SDK" target="_blank" rel="noopener">SDK ä¸‹è½½</a>, æ–°æµª SDK <strong>æ”¯æŒ compile é›†æˆ</strong>, <a href="https://github.com/sinaweibosdk/weibo_android_sdk" target="_blank" rel="noopener">Android æ¥å£è°ƒç”¨æ–‡æ¡£</a>.</p>
<h4 id="é›†æˆ-2"><a href="#é›†æˆ-2" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a.<br>åœ¨ <strong>Project çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        maven &#123; url "https://dl.bintray.com/thelasterstar/maven/" &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <strong>Application çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile 'com.sina.weibo.sdk:core:4.3.0:openDefaultRelease@aar'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£åŠå†…éƒ¨å®ç°-2"><a href="#æ¥å£åŠå†…éƒ¨å®ç°-2" class="headerlink" title="æ¥å£åŠå†…éƒ¨å®ç°"></a>æ¥å£åŠå†…éƒ¨å®ç°</h4><p><strong>a. å†…éƒ¨åˆå§‹åŒ– SDK</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WbSdk.install(context, <span class="keyword">new</span> AuthInfo(context, key, redirectUrl, scope));</span><br><span class="line">WbShareHandler handler = <span class="keyword">new</span> WbShareHandler((Activity) context);</span><br><span class="line">handler.registerApp();</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WbSdk.install(context, AuthInfo(context, key, redirectUrl, scope))</span><br><span class="line"><span class="keyword">val</span> handler = WbShareHandler(context <span class="keyword">as</span> Activity)</span><br><span class="line">handler.registerApp()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p>åœ¨ demo ä¸­, å‘å¸ƒå¾®åšå’Œå‘å¸ƒç…§ç‰‡/è§†é¢‘åˆ°ã€Œå¾®åšæ•…äº‹ã€ç¬”è€…æ‹†åˆ†åˆ° <code>RSinaWeiboActivity</code> å’Œ<code>RSinaWeiboStoryActivity</code> ä¸­åˆ†åˆ«å¤„ç†, é¿å…ç¨å¾®éº»çƒ¦çš„åˆ¤æ–­.</p>
<p>æ–°æµªåˆ†äº«å†…å®¹æ¨¡å‹éƒ½ç»§æ‰¿è‡ª <code>BaseMediaObject</code>: <strong>TextObject</strong>ã€<strong>MultiImageObject</strong>ã€<strong>WebpageObject</strong>ã€<strong>VideoSourceObject</strong>ã€<strong>TextObject</strong> è®¾ç½®å¯¹åº”å±æ€§ç„¶åé€šè¿‡ <code>WeiboMultiMessage</code> å‘é€åˆ†äº«è¯·æ±‚æ¶ˆæ¯ä½“, å€¼å¾—ä¸€æçš„æ˜¯, åœ¨åˆ†äº«ç½‘ç»œé“¾æ¥æ—¶å€™, <strong>èµ‹å€¼åˆ°æ¶ˆæ¯ä½“çš„å±æ€§ä¸º <code>mediaObject</code></strong>.</p>
<p>âš ï¸ <strong>åœ¨è¿›è¡Œæœ¬åœ°è§†é¢‘åˆ†äº«çš„æ—¶å€™ä¸€å®šä¸€å®šè¦å…ˆå¯¹æ¶ˆæ¯ä½“è¿›è¡Œæ–‡å­—åˆ†äº«æ¨¡å‹èµ‹å€¼, å¦åˆ™æ— è®ºå¦‚ä½•éƒ½æ— æ³•åˆ†äº«.</strong> </p>
<p>ä¾‹ (Java):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ…</span><br><span class="line">WeiboMultiMessage message = <span class="keyword">new</span> WeiboMultiMessage();</span><br><span class="line">message.textObject = textObj;<span class="comment">// a TextObject instance</span></span><br><span class="line">message.videoSourceObject = localVideoObj;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âŒ</span><br><span class="line">WeiboMultiMessage message = <span class="keyword">new</span> WeiboMultiMessage();</span><br><span class="line">message.videoSourceObject = localVideoObj;</span><br></pre></td></tr></table></figure>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.getInstance().shareText(context, text, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.instance.shareText(context, text, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-GSsYGRe_qeg/W45RXUDPbhI/AAAAAAAAAXQ/Gz9oC33gt4YqU4S5WlFy42gZH8fUfh-zQCHMYCw/I/15360535953706.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.getInstance().sharePhoto(context, targetImages, description, isToStory(<span class="keyword">true</span> or <span class="keyword">false</span>), listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.instance.sharePhoto(context, targetImages, description, isToStory(<span class="literal">true</span> or <span class="literal">false</span>), callback)</span><br></pre></td></tr></table></figure>
<p>ä¸ºç»Ÿä¸€æ¥å£, å›¾ç‰‡ç”¨æ•°ç»„åŒ…è£…; åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€åŠŸèƒ½ä¸­ <code>descripiton</code> å­—æ®µä¼šå¤±æ•ˆ.</p>
<blockquote>
<p>âš ï¸ 1. å¼€å¯ã€Œåˆ†äº«åˆ°å¾®åšæ•…äº‹ã€åŠŸèƒ½å›¾ç‰‡åªèƒ½ä¼ ä¸€å¼ ; å¤šå¼ å›¾ç‰‡åˆ†äº«çš„æƒ…å†µä¸‹ã€Œåˆ†äº«åˆ°å¾®åšæ•…äº‹ã€çš„åŠŸèƒ½å¿…é¡»å…³é—­!<br>âš ï¸ 2. å›¾ç‰‡å•å¼ ä¸èƒ½è¶…è¿‡ 10 MB, æœ€å¤š 9 å¼ å›¾ç‰‡.<br>âš ï¸ 3. åœ¨åˆ†äº«å›¾ç‰‡çš„æ—¶å€™æœ€å¥½æå‰æ‰“å¼€å¾®åšå®¢æˆ·ç«¯, å¦åˆ™ä¼šå¾ˆæ…¢, æˆ–è€…å‹æ ¹ä¸è°ƒèµ·å®¢æˆ·ç«¯.</p>
</blockquote>
<p>è¡¨ç°:<br>åˆ†äº«åˆ°å¾®åš:<br><img src="https://lh3.googleusercontent.com/-N5QLcImNntc/W45TR4j7hZI/AAAAAAAAAXo/aKyWZLFkzOYBhhzW2kDgbHgFPJUy5Qz2ACHMYCw/I/15360540872534.jpg" alt=""></p>
<p>åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€:<br><img src="https://lh3.googleusercontent.com/-4RLl_LN0sac/W45TD5-fRRI/AAAAAAAAAXk/zhXMgiy7LOkW4UlZG2Da699UK2BTq6QTwCHMYCw/I/15360540282306.jpg" alt=""></p>
<p><strong>æœ¬åœ°è§†é¢‘åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.getInstance().shareLocalVideo(context, localVideoUrl, description, isToStory(<span class="keyword">true</span> or <span class="keyword">false</span>), listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.instance.shareLocalVideo(context, localVideoUrl, description, isToStory(<span class="literal">true</span> or <span class="literal">false</span>), callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(åˆ†äº«åˆ°å¾®åš):</p>
<p><img src="https://lh3.googleusercontent.com/-YVT2ayySR6I/W5chW1iHrMI/AAAAAAAAAX4/GMCxl-itNoEk_jJa89nplur8JFkzvedFgCHMYCw/I/15366311285837.jpg" alt=""></p>
<p>è¡¨ç°(åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€):<br><img src="https://lh3.googleusercontent.com/-6u1wLkwp9gI/W5chbBWK83I/AAAAAAAAAX8/P95diV00laEFaTIzr1aUk8U99sQ5UTreACHMYCw/I/15366311481945.jpg" alt=""></p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.getInstance().shareWebpage(context, webapgeUrl, title, description, thumbImage, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RSinaWeiboManager.instance.shareWebpage(context, webpageUrl, title, description, thumbImage,callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-vbuWfq1M1n8/W5coCWrME6I/AAAAAAAAAYM/MFi4hsw7h-kFGdA3qhpjNn9vGp0NMPFVACHMYCw/I/15366328390733.jpg" alt=""></p>
<blockquote>
<p>âš ï¸ 1. ç½‘é¡µ <code>thumbImage</code> å­—æ®µçš„ç¼©ç•¥å›¾æ•°æ®ä¸èƒ½å¤§äº 550 Kb <strong>(æ–°æµªçš„ SDK æ§åˆ¶çš„å¾ˆä¸¥æ ¼)</strong>.<br>âš ï¸ 2. åœ¨è¿™é‡Œè¡¨ç°å’Œ iOS ç•¥æœ‰ä¸åŒ.</p>
</blockquote>
<h3 id="Facebook"><a href="#Facebook" class="headerlink" title="Facebook"></a>Facebook</h3><h4 id="å‡†å¤‡-3"><a href="#å‡†å¤‡-3" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://developers.facebook.com/" target="_blank" rel="noopener">Facebook å¼€å‘è€…ä¸»é¡µ</a>, Facebook SDK <strong>æ”¯æŒ compile é›†æˆ</strong>, <a href="https://developers.facebook.com/docs/sharing/android" target="_blank" rel="noopener">åˆ†äº«æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-3"><a href="#é›†æˆ-3" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a.<br>åœ¨ <strong>Project çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <strong>Application çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation 'com.facebook.android:facebook-share:4.34.0'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>b. åœ¨ <strong>AndroidManifest.xml</strong> çš„ <code>&lt;application&gt;</code> èŠ‚ç‚¹ä¸‹å¢åŠ :</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">"com.facebook.sdk.ApplicationId"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"@string/facebook_app_id"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">provider</span> <span class="attr">android:authorities</span>=<span class="string">"com.facebook.app.FacebookContentProviderYOURAPPID"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">"com.facebook.FacebookContentProvider"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:exported</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">"com.facebook.CustomTabActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:exported</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.BROWSABLE"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">"fbYOURAPPID"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. å†…éƒ¨åˆå§‹åŒ– SDK</strong></p>
<p>Facebook åˆ†äº«åœ¨é…ç½® <strong>AndroidManifest.xml</strong> åæ— éœ€ä»£ç ä»£ç åˆå§‹åŒ–.</p>
<p><strong>b. åˆ†äº«</strong></p>
<p>å‚æ•°çš„åŒ…è£…, å€ŸåŠ©å·¥å…·ç±» <code>RFacebookHelper</code> æ¥å¤„ç†, Facebook å·²ç»å°è£…å¥½äº†å„ä¸ªç±»å‹çš„åˆ†äº«å†…å®¹è½½ä½“ (SharePhotoContentã€ShareVideoContent â€¦), å¯¹åº”è®¾ç½®å±æ€§å€¼å°±å¯ä»¥; å¯¹äºå›¾ç‰‡çš„åˆ†äº«, å’Œæ–°æµªçš„å›¾ç‰‡åˆ†äº«æ€è·¯ç›¸åŒ, å³: æ— è®ºæ˜¯å•å¼ è¿˜æ˜¯å¤šå›¾, ä¸€æ¦‚é€šè¿‡æ•°ç»„åŒ…è£…ä¼ é€’ç»™ <code>RFacebookHelper</code>, ç„¶åå®ƒè‡ªè¡Œå¤„ç†.</p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFacebookManager.getInstance().shareWebpage(context, webapgeUrl, description, hashTag, mode , listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFacebookManager.instance.shareWebpage(context, webpageUrl, description, hashTag, mode, callback)</span><br></pre></td></tr></table></figure>
<p>Facebook çš„ SDK åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­, èˆå¼ƒäº†å¾ˆå¤šå­—æ®µ, åˆ†äº«å‚æ•°ä¸å¦‚æ–°æµªé‚£æ ·å¤šæ ·, ä½†æ˜¯å…¶åˆ†äº«çš„è¡¨ç°å½¢å¼å´æ¯”å›½å†…çš„è¦å‹å¥½å¾ˆå¤š, ç‰¹åˆ«æ˜¯åœ¨ç½‘é¡µåˆ†äº«è¿™å—ä½“ç°çš„æ›´åŠ æ˜æ˜¾, å€¼å¾—æ³¨æ„çš„æ˜¯, <strong>éç½‘é¡µå½¢å¼çš„åˆ†äº«å›è°ƒæ— æ•ˆ</strong>, åŠªåŠ›åœ°åœ¨ <strong>Github</strong>ã€<strong>Stack Overflow</strong> å’Œ <strong>Facebook Developer è®ºå›</strong>æ‰¾ç­”æ¡ˆä½†éƒ½æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•, æ ¹æ® <code>postId</code> çš„åˆ¤æ–­åˆ†äº«ç»“æœçŠ¶æ€çš„æ–¹æ³•æ—©å·²å¤±æ•ˆ, æ— è®ºæ˜¯ Android è¿˜æ˜¯ iOS ç«¯, ç›®å‰éƒ½æ²¡åŠæ³•.</p>
<blockquote>
<p>âš ï¸ <code>hashTag (è¯é¢˜)</code> çš„è¡¨ç°å½¢å¼ä¸åŒäºå›½å†…, æ–°æµªçš„è¯é¢˜æ ¼å¼: <strong>#è¯é¢˜#</strong>, ä¸¤ä¸ª <strong>#</strong> ä¹‹é—´ä¸€åˆ‡å†…å®¹éƒ½èƒ½æˆä¸ºè¯é¢˜, è€Œ Twitterã€Instagramã€Facebook çš„æ ¼å¼: <strong>#è¯é¢˜</strong>, è¯é¢˜å†…å®¹è¯ç»„ä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•ç¬¦å·ä¸”å¿…é¡»è¿åœ¨ä¸€èµ·.</p>
</blockquote>
<p>è¡¨ç°:<br>å®¢æˆ·ç«¯å½¢å¼çš„åˆ†äº«(æ— å›è°ƒ):<br><img src="https://lh3.googleusercontent.com/-Xqf4psPm0SM/W5cu2VZiQyI/AAAAAAAAAYY/v3kmkYC1C0QYCm83zH9_CyVwVdtVtdYmwCHMYCw/I/15366345820939.jpg" alt=""></p>
<p><strong>iOS ç«¯æ˜¯è·³è½¬åˆ° Facebook å®¢æˆ·ç«¯åˆ†äº«, ä¸”åœ¨é€šè¿‡å®¢æˆ·ç«¯åˆ†äº«çš„è¿‡ç¨‹ä¸­, <code>quote</code> å­—æ®µå·²ç»ä¸¢å¤±; ä¸” Android é€šè¿‡å®¢æˆ·ç«¯åˆ†äº«éœ€è¦æå‰æ‰“å¼€ Facebook å®¢æˆ·ç«¯, å¦åˆ™æ— æ³•å¼¹å‡ºåˆ†äº«å¯¹è¯æ¡†, æµ‹è¯•è¿‡ç¾å›¾ç§€ç§€çš„å›¾ç‰‡åˆ†äº«, ä¹Ÿæ˜¯ä¸€æ ·, éœ€è¦æå‰æ‰“å¼€å®¢æˆ·ç«¯.</strong></p>
<p>ç½‘é¡µå½¢å¼çš„åˆ†äº«(æœ‰å›è°ƒ):<br><img src="https://lh3.googleusercontent.com/-YXURoOGNuJc/W5cxUoJ8M9I/AAAAAAAAAYk/_T40tCXIkz0tlRDreQ-sEYG5xJMpmRZywCHMYCw/I/15366352153227.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFacebookManager.getInstance().sharePhoto(context, targetImages);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFacebookManager.instance.sharePhoto(context, targetImages)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-yFCTb2hHMAU/W5cyjMJqnWI/AAAAAAAAAYw/JxFTudmZYYA2IEDRjo7JUSbPB_xT1vP5wCHMYCw/I/15366355297333.jpg" alt=""></p>
<p><strong>æœ¬åœ°è§†é¢‘åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFacebookManager.getInstance().shareLocalVideo(context, localVideoUrl);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RFacebookManager.instance.shareLocalVideo(context, localVideoUrl)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-abqHI4K0exU/W5czPT4tQXI/AAAAAAAAAY4/_lWw41A4zig5LnA-ocY1SnT6x21V7ptmgCHMYCw/I/15366357079456.jpg" alt=""></p>
<p><strong>c. è·å–æ•£åˆ—</strong></p>
<p><code>RFacebookManager</code> æä¾›äº†è·å–æ•£åˆ—çš„æ–¹æ³•.</p>
<h3 id="Twitter"><a href="#Twitter" class="headerlink" title="Twitter"></a>Twitter</h3><h4 id="å‡†å¤‡-4"><a href="#å‡†å¤‡-4" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://developer.twitter.com/content/developer-twitter/en.html" target="_blank" rel="noopener">Twitter å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://apps.twitter.com/" target="_blank" rel="noopener">æ³¨å†Œåº”ç”¨ä¸»é¡µ</a>, Twitter SDK <strong>æ”¯æŒ compile é›†æˆ</strong>, <a href="https://github.com/twitter/twitter-kit-android/wiki/Compose-Tweets" target="_blank" rel="noopener">åˆ†äº«æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<p><strong>âš ï¸: Twitter SDK å°†äº 2018/10/31 åä¸å†è¿›è¡Œç»´æŠ¤, ä½†æ˜¯ä¸å½±å“åç»­ä½¿ç”¨, éœ€è‡ªè¡Œç»´æŠ¤, <a href="https://blog.twitter.com/developer/en_us/topics/tools/2018/discontinuing-support-for-twitter-kit-sdk.html" target="_blank" rel="noopener">Twitter äº§å“ç»ç† Neil Shah å¯¹ Twitter SDK æ”¾å¼ƒç»´æŠ¤è¿­ä»£çš„å£°æ˜åšå®¢</a>.</strong></p>
<h4 id="é›†æˆ-4"><a href="#é›†æˆ-4" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. åœ¨ <strong>Project çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <strong>Application çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation 'com.twitter.sdk.android:tweet-composer:3.1.1'</span><br><span class="line">    implementation 'com.twitter.sdk.android:twitter-core:3.1.1'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-1"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-1" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. å†…éƒ¨åˆå§‹åŒ– SDK</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TwitterConfig config = <span class="keyword">new</span> TwitterConfig.Builder(context)</span><br><span class="line">                .logger(<span class="keyword">new</span> DefaultLogger(Log.DEBUG))</span><br><span class="line">                .twitterAuthConfig(<span class="keyword">new</span> TwitterAuthConfig(key, secret))</span><br><span class="line">                .debug(<span class="keyword">true</span>)</span><br><span class="line">                .build();</span><br><span class="line">Twitter.initialize(config);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> config = TwitterConfig.Builder(context)</span><br><span class="line">                .logger(DefaultLogger(Log.DEBUG))</span><br><span class="line">                .twitterAuthConfig(TwitterAuthConfig(key, secret))</span><br><span class="line">                .debug(<span class="literal">true</span>)</span><br><span class="line">                .build()</span><br><span class="line">Twitter.initialize(config)</span><br></pre></td></tr></table></figure>
<p><strong>b. æˆæƒ Twitter å®¢æˆ·ç«¯</strong><br>ä¸å…¶ä»–å¹³å°åˆ†äº«ä¸åŒçš„æ˜¯, Twitter åœ¨è¿›è¡Œå‘æ¨(åˆ†äº«)çš„æ—¶å€™ä¼šå…ˆè¿›è¡Œæ£€æµ‹æœ¬åœ°çš„ <code>activeSession</code> çš„æ ‡è®°åˆ¤æ–­æ˜¯å¦ç™»å½•(æˆæƒ)è¿‡, æ‰€ä»¥åœ¨è¿›è¡Œå‘æ¨çš„æ—¶å€™éœ€è¦è¿›è¡Œè¿™ä¸€æ­¥çš„åˆ¤æ–­, åœ¨æœªç™»å½•çš„æƒ…å†µä¸‹éœ€è¿›è¡Œæˆæƒ, åœ¨æ­¤ä½¿ç”¨ <code>RTwitterAuthHelper</code> è¿›è¡Œå¤„ç†, ç™»å½•(æˆæƒç›‘å¬æ¥å£ä»¥åŠ callback):</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RTwitterAuthCallback</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">onFail</span><span class="params">(String errorInfo)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">internal</span> typealias RTwitterAuthCallback = ((state : <span class="built_in">Int</span>) -&gt; <span class="built_in">Unit</span>)</span><br></pre></td></tr></table></figure>
<p>Kotlin çš„ callback <code>state</code> åŒ…æ‹¬æˆåŠŸå¤±è´¥ä¸¤ç§ç»“æœ.</p>
<p><strong>åˆ¤æ–­æ˜¯å¦ç™»å½•è¿‡:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTwitterAuthHelper.getInstance().hasLogged()</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTwitterAuthHelper.instance.hasLogged</span><br></pre></td></tr></table></figure>
<p><strong>ç™»å½•æˆæƒ:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RTwitterAuthHelper.getInstance().authorizeTwitter(context, <span class="keyword">new</span> RTwitterAuthCallback() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFail</span><span class="params">(String errorInfo)</span> </span>&#123;</span><br><span class="line">       <span class="comment">// ...                    &#125;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RTwitterAuthHelper.instance.authorizeTwitter(context) &#123; state -&gt;</span><br><span class="line">    <span class="keyword">when</span> (state) &#123;</span><br><span class="line">        <span class="number">1</span> -&gt; &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="number">0</span> -&gt; &#123;</span><br><span class="line">            <span class="comment">// ...     </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€æ­¥<strong>ç›®å‰çš„æƒ…å†µå°±æ˜¯æŠŠ Twitter SDK æä¾›çš„æˆæƒæ–¹æ³•é‡æ–°åŒ…è£…å†™äº†é, ä½†æ˜¯è€ƒè™‘åˆ°æœªæ¥å¯èƒ½ç”¨åˆ° <code>session</code> å’Œ <code>token</code> ç­‰ä¿¡æ¯å¹¶å¤„ç†, æ‰€ä»¥å•ç‹¬å†™äº†ç±»è®²æˆæƒå’Œåˆ†äº«éš”ç¦».</strong></p>
<p><strong>c. åˆ†äº«</strong></p>
<p>åœ¨æœ¬äººå†™çš„ demo ä¸­, <em>åˆ†äº«</em>å’Œ<em>ç™»å½•æˆæƒ</em>æ˜¯è¡”æ¥çš„, å³: è‹¥æœªç™»å½•è¿‡ -&gt; ç™»å½•æˆæƒ -&gt; åˆ†äº«.<br>Twitter èƒ½åˆ†äº«çš„å†…å®¹ç›¸å¯¹è¾ƒå°‘, æ‰€ä»¥å…³äº<strong>æ–‡å­—ã€ç½‘é¡µã€å›¾ç‰‡</strong>çš„åˆ†äº«, ç»Ÿä¸€åˆ°ä¸€ä¸ªåˆ†äº«æ¥å£é‡Œ, ä¸‰è€…ä¸èƒ½åŒæ—¶ä¸ºç©º.<br>å¦, Twitter Android åˆ†äº«åŒ…æ‹¬ä¸¤ç§æ¨¡å¼: <strong>ç›´æ¥æ„å»º Intent åˆ†äº«å’Œè·³è½¬ Twitter å®¢æˆ·ç«¯åˆ†äº«</strong>, å‰è€…æœ‰å›è°ƒ(Demo ä¸­æ³¨å†Œ <code>RTwitterTweetResultReciver</code> ç›‘å¬å›è°ƒ), åè€…æ— å›è°ƒä¸”æ”¯æŒ <code>hashTag</code>.</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTwitterManager.getInstance().share(context, webapgeUrl, description, targetImage, hashTag, mode, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTwitterManager.instance.share(context, webpageUrl, description, targetImage, hashTag, mode, callback)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ æµ‹è¯•å¤šæ¬¡å‘æ¨å†…å®¹ä¸è¦é‡å¤, å¦åˆ™ä¼šåˆ†äº«å¤±è´¥.</p>
</blockquote>
<p>è¡¨ç°:</p>
<p>åº”ç”¨å†…åˆ†äº«(æœ‰å›è°ƒ):<br><img src="https://lh3.googleusercontent.com/-c5I4chuawhk/W5dnV0p1ksI/AAAAAAAAAZE/HBu1kom59Rs_q2B3ZMtQqzqPJBnbJRccACHMYCw/I/15366490447032.jpg" alt=""></p>
<p>è·³è½¬ Twitter å®¢æˆ·ç«¯åˆ†äº«(æ— å›è°ƒ):</p>
<p><img src="https://lh3.googleusercontent.com/-oA7HlkrGvx0/W5dnu8fKzKI/AAAAAAAAAZU/g6qT1kewvPk-Yzb1LnlH_kad--REvEQDQCHMYCw/I/15366491440513.jpg" alt=""></p>
<h3 id="Instagram"><a href="#Instagram" class="headerlink" title="Instagram"></a>Instagram</h3><h4 id="å‡†å¤‡-5"><a href="#å‡†å¤‡-5" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«æ— éœ€æ³¨å†Œå¹³å°æ— éœ€ SDK, <a href="https://www.instagram.com/developer/" target="_blank" rel="noopener">Instagram å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://www.instagram.com/developer/mobile-sharing/android-intents/" target="_blank" rel="noopener">æ„å»º Intent æ–¹å¼åˆ†äº«</a>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-2"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-2" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>åˆ†äº«</strong></p>
<p>Intent æ„å»º(ä»¥ Java ä¸ºä¾‹):</p>
<p>å›¾ç‰‡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line">intent.setType(<span class="string">"image/*"</span>);</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM, targetImageUrl);</span><br><span class="line">intent.setPackage(<span class="string">"com.instagram.android"</span>);</span><br><span class="line">context.startActivity(intent);</span><br></pre></td></tr></table></figure>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RInstagramManager.getInstance().shareImage(context, targetImage);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RInstagramManager.instance.shareImage(context, targetImage)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-nXN8PeYeBI8/W5druQz7D7I/AAAAAAAAAZg/tqdkoNdlZ_gYq5pb2VTS6qe7nB8go0slwCHMYCw/I/15366501677018.jpg" alt=""></p>
<p>æœ¬åœ°è§†é¢‘:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line">intent.setType(<span class="string">"video/*"</span>);</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM, localVideoUrl);</span><br><span class="line">intent.setPackage(<span class="string">"com.instagram.android"</span>);</span><br><span class="line">context.startActivity(intent);</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬åœ°è§†é¢‘åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RInstagramManager.getInstance().shareVideo(context, localVideoUrl);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RInstagramManager.instance.shareVideo(context, localVideoUrl)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-53x4U8Iht94/W5drxU3QLhI/AAAAAAAAAZk/zebiYGtry1McCJ6P35Es-niqeCMyzfh-ACHMYCw/I/15366501815031.jpg" alt=""></p>
<h3 id="Tumblr"><a href="#Tumblr" class="headerlink" title="Tumblr"></a>Tumblr</h3><h4 id="å‡†å¤‡-6"><a href="#å‡†å¤‡-6" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://www.tumblr.com/developers" target="_blank" rel="noopener">Tumblr å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://dev.flurry.com/admin/applications" target="_blank" rel="noopener">æ³¨å†Œåº”ç”¨ä¸»é¡µ</a>, Tumblr SDK <strong>æ”¯æŒ compile é›†æˆ</strong>, <a href="https://developer.yahoo.com/flurry/docs/integrateflurry/android/" target="_blank" rel="noopener">åˆ†äº«æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-5"><a href="#é›†æˆ-5" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. æ­¤ Demo ä¸­æ˜¯æ‰‹åŠ¨é›†æˆçš„ 6.1.0 ç‰ˆæœ¬çš„ SDK.</p>
<p>âš ï¸: ä¸€å®šæ˜¯è¿™ä¸ªç‰ˆæœ¬çš„, æœ€æ–°ç‰ˆæœ¬çš„ SDK æˆ‘æ²¡æœ‰æ‰¾åˆ°åˆ†äº«çš„æ¥å£.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-3"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-3" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. å†…éƒ¨åˆå§‹åŒ– SDK</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FlurryAgent.setLogEnabled(<span class="keyword">true</span>);</span><br><span class="line">FlurryAgent.init(context, flurryKey);</span><br><span class="line">TumblrShare.setOAuthConfig(key, secret);</span><br></pre></td></tr></table></figure>
<p>âš ï¸ åœ¨ iOS ç«¯åˆå§‹åŒ– SDK ä»…éœ€è¦ <code>key</code> å’Œ <code>secret</code> ä¸¤ä¸ªå‚æ•°.</p>
<p><strong>b. åˆ†äº«</strong></p>
<p>Tumblr åˆ†äº«ä½“åªåŒ…æ‹¬<strong>å›¾ç‰‡</strong>å’Œ<strong>æ–‡å­—</strong>ä¸¤ç§, å¹¶ä¸”å›¾ç‰‡è¿˜æ˜¯ç½‘ç»œå›¾ç‰‡çš„é“¾æ¥, å¹¶ä¸èƒ½åˆ†äº«æœ¬åœ°å›¾ç‰‡, æ‰€ä»¥ Tumblr çš„å±€é™æ€§å¾ˆå¤§, è¿™ä¸¤ç§åˆ†äº«ä½“çš„æ¨¡å‹é€šè¿‡ SDK ä¸­ <code>PhotoPost</code> å’Œ <code>TextPost</code> æ¥æ„å»º;<br>Tumblr åˆ†äº«æ˜¯é€šè¿‡å½“å‰ç•Œé¢å¼¹å‡ºå¯¹è¯æ¡†åˆ†äº«çš„, å’Œ Twitter ç±»ä¼¼, æ‰€ä»¥ä¸éœ€è¦åˆ¤æ–­ Tumblr ç¨‹åºæ˜¯å¦å®‰è£…;<br>Tumblr çš„åˆ†äº«æµç¨‹æ˜¯: <strong>ç™»å½• -&gt; åˆ†äº«</strong>, ä½†æ˜¯ç™»å½•çš„é€»è¾‘ä¸éœ€è¦åœ¨ä»£ç ä¸­å®ç°, ä»–ä¼šè‡ªåŠ¨å‘ˆç°æµè§ˆå™¨çš„ç™»å½•ç•Œé¢.</p>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTumblrManager.getInstance().shareText(context, description, title, webapgeUrl, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTumblrManager.instance.shareText(context, description, title, webpageUrl, callback)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-cuff8oox2QA/W5dut_wRKII/AAAAAAAAAZ0/b0KlLvRRbicTVejB97QaI5DSn-5yWABXQCHMYCw/I/15366509337750.jpg" alt=""></p>
<p><strong>å›¾ç‰‡é“¾æ¥åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTumblrManager.getInstance().shareImage(context, targetImageUrl, description, webapgeUrl, listener);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RTumblrManager.instance.shareImage(context, targetImageUrl, description, webpageUrl, callback )</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-MOOQGS65kE4/W5dvOW95NhI/AAAAAAAAAZ8/xdpBtn3Lr187Fm6zjHKoCfl-fsj64uDMwCHMYCw/I/15366510641749.jpg" alt=""></p>
<h3 id="Pinterest"><a href="#Pinterest" class="headerlink" title="Pinterest"></a>Pinterest</h3><h4 id="é›†æˆ-6"><a href="#é›†æˆ-6" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>Android ç«¯æ— éœ€é›†æˆ SDK, ä»…é€šè¿‡ Intent æ–¹å¼å°±å¯ä»¥åˆ†äº«, ä½†æ˜¯ iOS éœ€è¦.</p>
<p><strong>b. åˆ†äº«</strong></p>
<p><strong>Pinterest åªèƒ½åˆ†äº«å›¾ç‰‡é“¾æ¥.</strong></p>
<p>Intent æ„å»º(ä»¥ Java ä¸ºä¾‹):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line">intent.setPackage(<span class="string">"com.pinterest"</span>);</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM, Uri.parse(targetImageUrl));</span><br><span class="line">intent.setType(<span class="string">"*/*"</span>);</span><br><span class="line">context.startActivity(intent);</span><br></pre></td></tr></table></figure>
<p><strong>å›¾ç‰‡é“¾æ¥åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RPinterestManager.getInstance().shareImage(context, targetImageUrl);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RPinterestManager.instance.shareImage(context, targetImageUrl)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-IQc0WbK_d2Q/W5dyAGaQ1AI/AAAAAAAAAaI/M1V76h1-NFg-Kh84iCjFOQ50BI9AYCT7QCHMYCw/I/15366517749056.jpg" alt=""></p>
<h3 id="Line"><a href="#Line" class="headerlink" title="Line"></a>Line</h3><h4 id="é›†æˆ-7"><a href="#é›†æˆ-7" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>æ— éœ€é›†æˆ SDK, ä»…é€šè¿‡ Intent æ–¹å¼å°±å¯ä»¥åˆ†äº«.</p>
<p><strong>b. åˆ†äº«</strong></p>
<p>Intent æ„å»º(ä»¥ Java ä¸ºä¾‹):</p>
<p>æ–‡å­—ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">intent.setAction(Intent.ACTION_SEND);</span><br><span class="line">intent.putExtra(Intent.EXTRA_TEXT, text);</span><br><span class="line">intent.setType(<span class="string">"text/*"</span>);</span><br><span class="line">intent.setPackage(<span class="string">"jp.naver.line.android"</span>);</span><br><span class="line">context.startActivity(intent);</span><br></pre></td></tr></table></figure>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RLineManager.getInstance().shareText(context, text);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RLineManager.instance.share(context, text)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-ps4ZtMCw-R0/W5d-SMQEz0I/AAAAAAAAAaY/BgkApt-Nzgo3LBvYIBACO0uYO2EgR-thQCHMYCw/I/15366549202862.jpg" alt=""></p>
<p>å›¾ç‰‡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line">intent.setType(<span class="string">"image/*"</span>);</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM, targetImageUrl);</span><br><span class="line">intent.setPackage(<span class="string">"jp.naver.line.android"</span>);</span><br><span class="line">context.startActivity(intent);</span><br></pre></td></tr></table></figure>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RLineManager.getInstance().shareImage(context, targetImage);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RLineManager.instance.share(context, targetImage)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-WIxiBag-ZsE/W5d-I4YUj9I/AAAAAAAAAaU/-4XSuRZpELsRUzbNFssC7AgHAUkD9hgNgCHMYCw/I/15366548801345.jpg" alt=""></p>
<h3 id="WhatsApp"><a href="#WhatsApp" class="headerlink" title="WhatsApp"></a>WhatsApp</h3><h4 id="å‡†å¤‡-7"><a href="#å‡†å¤‡-7" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«æ— éœ€æ³¨å†Œå¹³å°.</p>
<p>Android ç«¯æ— éœ€é›†æˆ SDK, ä»…é€šè¿‡ Intent æ–¹å¼å°±å¯ä»¥åˆ†äº«, ä½†æ˜¯ iOS éœ€è¦.</p>
<p><strong>b. åˆ†äº«</strong></p>
<p>WhatsApp æ”¯æŒåŒæ—¶åˆ†äº«æ–‡å­—å’Œå›¾ç‰‡, iOS ç«¯ä¸å¯ä»¥.</p>
<p>Intent æ„å»º(ä»¥ Java ä¸ºä¾‹):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">intent.setAction(Intent.ACTION_SEND);</span><br><span class="line">intent.putExtra(Intent.EXTRA_TEXT, description);</span><br><span class="line">intent.setType(<span class="string">"text/plain"</span>);</span><br><span class="line">intent.putExtra(Intent.EXTRA_STREAM, targetImageUrl);</span><br><span class="line">intent.setType(<span class="string">"image/jpeg"</span>);</span><br><span class="line">intent.setPackage(<span class="string">"com.whatsapp"</span>);</span><br><span class="line">context.startActivity(intent);</span><br></pre></td></tr></table></figure>
<p><strong>å›¾æ–‡åˆ†äº«:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWhatsAppManager.getInstance().share(context, targetImage, description);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWhatsAppManager.instance.share(context, targetImage, description)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-b2WSm80d_Us/W5eC13XcH1I/AAAAAAAAAak/3CsSs5ULiQ8Ng_-6zU3vyVrmCyzbEw2VgCHMYCw/I/15366560853962.jpg" alt=""></p>
<h3 id="GooglePlus"><a href="#GooglePlus" class="headerlink" title="GooglePlus"></a>GooglePlus</h3><h4 id="å‡†å¤‡-8"><a href="#å‡†å¤‡-8" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>éœ€è¦æ³¨å†Œå¹³å°, <a href="https://developers.google.com/+/" target="_blank" rel="noopener">Google Plus å¼€å‘è€…ä¸»é¡µ</a><br>, <a href="https://developers.google.com/+/mobile/android/getting-started" target="_blank" rel="noopener">åˆ›å»ºæµç¨‹</a>.</p>
<h4 id="é›†æˆ-8"><a href="#é›†æˆ-8" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>éœ€è¦ <strong>Google Service çš„æ”¯æŒ</strong>, åœ¨ <strong>Application çº§ <code>build.gradle</code> ä¸­é…ç½®:</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation 'com.google.android.gms:play-services-plus:15.0.1'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-4"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-4" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p>Google Plus åˆ†äº«åªæ”¯æŒ<strong>åˆ†äº«ç½‘é¡µ</strong>,  é€šè¿‡ <code>PlusShare.Builder</code> æ¥æ„å»ºç½‘é¡µåˆ†äº«æ¨¡å‹, Java ä¸ºä¾‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent shareIntent = <span class="keyword">new</span> PlusShare.Builder(context)</span><br><span class="line">                .setType(<span class="string">"text/plain"</span>)</span><br><span class="line">                .setText(text)</span><br><span class="line">                .setContentUrl(Uri.parse(webpageUrl)</span><br><span class="line">                .getIntent();</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†äº«ç½‘é¡µ:</strong></p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RGooglePlusManager.getInstance().share(context, webapgeUrl, description);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RGooglePlusManager.instance.share(context, webpageUrl, description)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-1yxGGEo9QuI/W5eHx0NVl3I/AAAAAAAAAaw/og3n-vItwB8ruMgT6rfqD5OA46CS3QjoQCHMYCw/I/15366573475615.jpg" alt=""></p>
<h2 id="ç»Ÿä¸€åˆ†äº«æ¥å£"><a href="#ç»Ÿä¸€åˆ†äº«æ¥å£" class="headerlink" title="ç»Ÿä¸€åˆ†äº«æ¥å£"></a>ç»Ÿä¸€åˆ†äº«æ¥å£</h2><h3 id="ç¼ºé™·"><a href="#ç¼ºé™·" class="headerlink" title="ç¼ºé™·"></a>ç¼ºé™·</h3><p><strong>ç¼ºé™·è¯´åœ¨å‰é¢, å…¶å®æœ¬æ¥ä¸æ‰“ç®—ç»Ÿä¸€æ¥å£çš„.</strong></p>
<ul>
<li>ä¸»åˆ†äº« Manager å’Œå­å¹³å°åˆ†äº« Manager å­˜åœ¨è€¦å’Œ(æ²¡æœ‰å‚è€ƒ ShareSDK çš„ jar åŒ…æ–¹å¼å»åš);</li>
<li>åˆ†äº«æ¥å£ä¼˜åŒ–å—é™åˆ¶, ç”±äºå‰é¢çš„å¹³å°åˆ†äº«å¯¹æ¯”è¡¨æ ¼å¯çŸ¥, å›½å¤–çš„å¹³å°åˆ†äº«å¾ˆå¤šéƒ½æ²¡æœ‰å›è°ƒ, è€Œå›½å†…çš„å¹³å°åˆ†äº«å†…å®¹åˆå­˜åœ¨å¤šç§å½¢å¼, æ— æ³•å®ç°é«˜åº¦ç»Ÿä¸€;</li>
<li>æ·»åŠ å¹³å°æ²¡æœ‰åš<strong>å»é‡å¤„ç†</strong>, é€ æˆä¸å¿…è¦çš„å¼€é”€;</li>
</ul>
<h3 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h3><p><img src="https://lh3.googleusercontent.com/-O0rTTel0iHc/W5eJdrZJVII/AAAAAAAAAbI/JdickRAMap45EJT6Lrmizg1X6z9mJqtOACHMYCw/I/Android%2B" alt="Android ç»Ÿä¸€æ¥å£ç±»å›¾"></p>
<ul>
<li><strong>RShareManger:</strong> ä¸»åˆ†äº« Manager, å­å¹³å° Manager çš„åˆå§‹åŒ–ã€åˆ†äº«ã€åº”ç”¨è·³è½¬å’Œä¸€äº›å…¶ä»–æ“ä½œéƒ½åœ¨æ­¤è¿›è¡Œ;</li>
<li><strong>RImageContentã€RVideoContentã€RTextContentã€RWebpageContent</strong> ä¸ºå››ç§å¯¹åº”åˆ†äº«å†…å®¹æ¨¡å‹.</li>
</ul>
<h3 id="è¯¦ç»†è®¾è®¡"><a href="#è¯¦ç»†è®¾è®¡" class="headerlink" title="è¯¦ç»†è®¾è®¡"></a>è¯¦ç»†è®¾è®¡</h3><p><strong>åˆ†äº«é¢‘é“</strong></p>
<p>ä»¥ Java ä¸ºä¾‹, åœ¨ <code>RShareManager</code> ç§å®šä¹‰äº†åˆ†äº«é€šé“æšä¸¾:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">ShareChannel</span> </span>&#123;</span><br><span class="line">    QQSession,</span><br><span class="line">    QQFavorite,</span><br><span class="line">    QQDataLine,</span><br><span class="line">    QZone,</span><br><span class="line">    WechatSession,</span><br><span class="line">    WechatFavorite,</span><br><span class="line">    WechatTimeline,</span><br><span class="line">    FacebookClient,</span><br><span class="line">    FacebookBroswer,</span><br><span class="line">    TwitterInnerApp,</span><br><span class="line">    TwitterClient,</span><br><span class="line">    SinaWeibo,</span><br><span class="line">    SinaWeiboStory,</span><br><span class="line">    Line,</span><br><span class="line">    Instagram,</span><br><span class="line">    Tumblr,</span><br><span class="line">    Pinterest,</span><br><span class="line">    GooglePlus,</span><br><span class="line">    WhatsApp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p><strong>æ„å»ºåˆ†äº«æ¨¡å‹</strong></p>
<p>ä»¥ <code>RImageContent</code> ä¸ºä¾‹:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RImageContent content = <span class="keyword">new</span> RImageContent.Builder(targetImage, targetImageUrl)</span><br><span class="line">                 <span class="comment">// ...</span></span><br><span class="line">                .build();</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> content : RImageContent = RImageContent().apply &#123; </span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†äº«ï¼š</strong></p>
<p>ä»¥åˆ†äº« <code>RImageContent</code> ä¸ºä¾‹:</p>
<p>Java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">RShareManager.getInstance().shareImage(context, content, channel, <span class="keyword">new</span> RShareListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">(RSharePlatform.Platform platform)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// ...  </span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFail</span><span class="params">(RSharePlatform.Platform platform, String errorInfo)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(RSharePlatform.Platform platform)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<p>Kotlin:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> RShareManager.instance.shareImage(context, content, channel) &#123; platform, state, errorInfo -&gt;</span><br><span class="line">           <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p><a href="https://github.com/rexzx/rshare_java" target="_blank" rel="noopener">Java ç‰ˆæœ¬æºç </a>ã€ <a href="https://github.com/rexzx/rshare_kotlin" target="_blank" rel="noopener">Kotlin ç‰ˆæœ¬æºç </a>, è¿˜åœ¨å­¦ä¹ ä¸­, è¯·å¤šæŒ‡æ•™.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/28/rshare-ios-vesion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="115 106 99">
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="I'M REXZX">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/28/rshare-ios-vesion/" itemprop="url">
                  ã€ŒRSHAREã€ ä¸€é”®åˆ†äº« iOS ç‰ˆ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-28 17:05:43" itemprop="dateCreated datePublished" datetime="2018-08-28T17:05:43+08:00">2018-08-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-09-04 15:17:58" itemprop="dateModified" datetime="2018-09-04T15:17:58+08:00">2018-09-04</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å› ä¸ºå…¬å¸çš„é¡¹ç›®é‡Œé›†æˆäº†ä¸€é”®åˆ†äº«çš„è¿™ä¸ªæ¨¡å—, è€Œåœ¨æˆ‘è®¾è®¡çš„æ—¶å€™å‘ç°å›½å†…çš„å®˜æ–¹æ–‡æ¡£å’Œæä¾›çš„ Sample æœ‰æ··ä¹±å’Œå®¹æ˜“æ··æ·†çš„åœ°æ–¹, è€Œä¸”é™¤äº†æ™®é€šçš„ç½‘é¡µã€å›¾ç‰‡ã€æ–‡å­—åˆ†äº«åˆ°å„å¤§ Social å¹³å°ä»¥å¤–, å¯¹äºè§†é¢‘ã€æ–‡ä»¶å’Œå…¶ä»–å†…å®¹çš„åˆ†äº« Demo åœ¨ç™¾åº¦æˆ–è€… Google å‡ ä¹æœä¸åˆ°. è‡ªå·±ä¹Ÿæ˜¯è¸©äº†å¾ˆå¤šå‘æ‰æŠŠå¾ˆå¤šé—®é¢˜è§£å†³.</p>
<h2 id="æµ‹è¯•è®¾å¤‡"><a href="#æµ‹è¯•è®¾å¤‡" class="headerlink" title="æµ‹è¯•è®¾å¤‡"></a>æµ‹è¯•è®¾å¤‡</h2><p>iPhone 7 Plus, iOS 11.4.1.</p>
<h2 id="æ”¯æŒå¹³å°"><a href="#æ”¯æŒå¹³å°" class="headerlink" title="æ”¯æŒå¹³å°"></a>æ”¯æŒå¹³å°</h2><p><strong>RSHARE</strong> è¿™ä¸ª Demo ä¸­æ”¯æŒ: å¾®ä¿¡ã€QQã€æ–°æµªå¾®åšã€Facebookã€GooglePlus(Google +)ã€Twitterã€WhatsAppã€Lineã€Tumblrã€Instagramã€Pinterest 11 ä¸ª Social å¹³å°.</p>
<h3 id="å¹³å°å·®å¼‚"><a href="#å¹³å°å·®å¼‚" class="headerlink" title="å¹³å°å·®å¼‚"></a>å¹³å°å·®å¼‚</h3><p>ä¸»è¦ç½—åˆ—äº†å¸¸ç”¨çš„ 5 ä¸ªåˆ†äº«å†…å®¹çš„å¯¹æ¯”èœå•(ç½‘é¡µã€æ–‡å­—ã€å›¾ç‰‡ã€æœ¬åœ°è§†é¢‘ã€æ–‡ä»¶).<br><strong>æ³¨æ„èœå•å†…å­—æ¯ä»¥åŠèœå•åé¢å¯¹åº”å­—æ¯çš„æ³¨é‡Šâš ï¸</strong></p>
<table>
<thead>
<tr>
<th>â¤ï¸</th>
<th>QQ</th>
<th>å¾®ä¿¡</th>
<th>å¾®åš</th>
<th>Facebook</th>
<th>Twitter</th>
<th>Instagram</th>
<th>WhatsApp</th>
<th>Line</th>
<th>Tumblr</th>
<th>Pinterest</th>
<th>Google+</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç½‘é¡µ</td>
<td>âœ“a</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“b</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
</tr>
<tr>
<td>æ–‡å­—</td>
<td>âœ“c</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
<tr>
<td>å›¾ç‰‡</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“d</td>
<td>âœ“d</td>
<td>âœ—</td>
</tr>
<tr>
<td>è§†é¢‘</td>
<td>?e</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
<tr>
<td>æ–‡ä»¶</td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
</tr>
</tbody>
</table>
<p>a. QQ è™½æ”¯æŒç½‘é¡µåˆ†äº«, ä½†æ˜¯ä¸å…è®¸å¸¦ç€ç½‘é¡µçš„ <code>description</code> å­—æ®µ, ä¸”åˆ†äº«åˆ° QQ ç©ºé—´åªæ”¯æŒé€šè¿‡æ–‡å­—åˆ†äº«, è¿™å’Œ Android è¡¨ç°ä¸åŒ;<br>b. Facebook çš„ç½‘é¡µåˆ†äº«æ”¯æŒ <strong>hashtag</strong>;<br>c. iOS ç«¯åˆ†äº«æ–‡å­—åˆ° QQ å®¢æˆ·ç«¯æ˜¯å¯è¡Œçš„, ä½†æ˜¯ Android ç«¯ä¸å…è®¸, å…¶å® QQ çš„åˆ†äº«ç›®åœ°å°±æ˜¯<strong>è®©ç”¨æˆ·è‡ªè¡Œè¾“å…¥æœ‰ä»·å€¼ã€æœ‰æ„ä¹‰çš„æ–‡å­—ä¿¡æ¯</strong>;<br>d. Pinterest å’Œ Tumblr è™½æ”¯æŒå›¾ç‰‡åˆ†äº«, ä½†ä»…ä»…æ”¯æŒåˆ†äº«å›¾ç‰‡çš„ URL, å®ƒä¼šè‡ªè¡Œè§£æå¹¶æ˜¾ç¤º;<br>e. QQ å®¢æˆ·ç«¯åˆ†äº«åˆ†ä¸¤ç±»: 1 å¥½å‹ã€æ”¶è—ã€æ•°æ®çº¿(æˆ‘çš„ç”µè„‘)åˆ†äº«; 2 QQ ç©ºé—´åˆ†äº«. æœ¬åœ°è§†é¢‘çš„åˆ†äº«åªæ”¯æŒ QQ ç©ºé—´åˆ†äº«.</p>
<blockquote>
<ol>
<li>å¯¹æ¯”åˆ—è¡¨å¾—çŸ¥, å›½å†…çš„å¹³å°åˆ†äº«å†…å®¹æ˜¯æœ€ä¸°å¯Œçš„, ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªä¸»è¦çš„é—®é¢˜(ä¸»è¦æ˜¯ QQ), iOS å’Œ Android åŒç«¯çš„æ¥å£ä»¥åŠå®ç°çš„åŠŸèƒ½ä¹Ÿå¹¶ä¸ç»Ÿä¸€(åé¢çš„éƒ¨åˆ†ä¼šå…·ä½“è¯´); å¾®ä¿¡åŒç«¯å½“åˆ†äº«çš„å›¾ç‰‡è¿‡å¤§çš„æ—¶å€™çš„è¡¨ç°ä¹Ÿæœ‰ä¸ç»Ÿä¸€çš„æ—¶å€™, å…¶ä½™éƒ½å¾ˆå®Œå–„; æ–°æµªçš„è¡¨ç°æ˜¯æœ€ç»Ÿä¸€çš„, ä¸”æ²¡æœ‰è¿‡å¤šé™åˆ¶; å›½å†…çš„å¹³å°åˆ†äº«æœ€è®©äººå¤´ç–¼çš„å°±æ˜¯å®˜æ–¹çš„ Sample å¾ˆæ··ä¹±, ä½†æ˜¯åœ¨å®è·µä»£ç çš„æ—¶å€™è¿˜æ˜¯è¦ä»¥å®˜æ–¹ä¸ºä¸».</li>
<li>å›½å¤–çš„æ–‡æ¡£å’Œ Sample å¾ˆæ˜äº†ä¸”æ³¨é‡Šè¯¦ç»†, ä½†ä¹Ÿå­˜åœ¨åŒç«¯ä¸ç»Ÿä¸€çš„æƒ…å†µ, Twitter çš„åŒç«¯è¡¨ç°å°±ä¸ä¸€æ ·(åé¢ç»†è¯´), ä½†æ˜¯å›½å¤–çš„å¹³å°åˆ†äº«å‡ ä¹æ²¡æœ‰å›è°ƒ, Facebook çš„å›è°ƒåªæœ‰ Feed å½¢å¼çš„åˆ†äº«æ‰æœ‰æ•ˆ, Instagramã€Lineã€Google+è¿™äº›æ˜¯æ²¡æœ‰ SDK çš„, ä»…ä»…æ˜¯é€šè¿‡æ‰“å¼€ Application URL scheme æ¥åˆ†äº«.</li>
</ol>
</blockquote>
<h2 id="åˆ†äº«æ€»ä½“è®¾è®¡"><a href="#åˆ†äº«æ€»ä½“è®¾è®¡" class="headerlink" title="åˆ†äº«æ€»ä½“è®¾è®¡"></a>åˆ†äº«æ€»ä½“è®¾è®¡</h2><p>å¤§æ¦‚çš„åˆ†äº«é€»è¾‘å¦‚ä¸‹:<br><img src="https://lh3.googleusercontent.com/-nkYbZ2cgYmc/W4UX1OlhWtI/AAAAAAAAAOs/1L_K_q1HlqgShbk-crxnCNfHRCEu6lDWwCHMYCw/I/iOS%2B" alt=" åˆ†äº«é€»è¾‘"></p>
<p>iOS çš„åˆ†äº«æ˜¯å‚ç…§å„å¤§å¹³å°çš„åˆ†äº«é€»è¾‘å¾—åˆ°æ¯”è¾ƒç»Ÿä¸€æ€è·¯, å³: å…ˆåˆ¤æ–­æ˜¯å¦å®‰è£…å¯¹åº”åº”ç”¨, ç„¶ååˆå§‹åŒ– SDK ä¸å®˜æ–¹å¹³å°è¿æ¥, ç„¶ååŒ…è£…åˆ†äº«å‚æ•°è¿›è¡Œåˆ†äº«, æœ€åå¤„ç†åˆ†äº«å›è°ƒ.</p>
<blockquote>
<ol>
<li>æœ‰äº›å¹³å°ä¸å­˜åœ¨ SDK, æ‰€ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦å¹³å°å®‰è£…ç„¶ååŒ…è£…åˆ†äº«å‚æ•°è¿›è¡Œåˆ†äº«;</li>
<li>Tumblr æ¯”è¾ƒç‰¹æ®Š, æœ‰ SDK ä½†æ˜¯ä¸éœ€è¦åˆ¤æ–­åº”ç”¨æ˜¯å¦å®‰è£…å°±å¯ä»¥åˆ†äº«, Twitter ä¹Ÿå¦‚æ­¤, å…·ä½“æƒ…å†µåœ¨ Twitter çš„éƒ¨åˆ†è¯´æ˜;</li>
<li>SDK çš„åˆå§‹åŒ–, ç»Ÿä¸€å‡½æ•°åå­—ä¸º <code>sdkInitialize</code>, <code>Key</code>ã€<code>Secret</code>ä»¥åŠ<code>AppID</code>ç­‰ä¿¡æ¯åœ¨æ³¨é‡Šä¸­æœ‰æ ‡æ˜.</li>
</ol>
</blockquote>
<h2 id="è¯¦ç»†é€»è¾‘"><a href="#è¯¦ç»†é€»è¾‘" class="headerlink" title="è¯¦ç»†é€»è¾‘"></a>è¯¦ç»†é€»è¾‘</h2><p><strong>å…³äºå„ä¸ªå¹³å°çš„å¼€å‘è€…ä¸»é¡µå’Œæ–‡æ¡£ä¿¡æ¯ä»¥è¿™é‡Œä¸ºä¸», ä»£ç æ³¨é‡Šçš„å¯èƒ½ä¸å‡†ç¡®.</strong></p>
<p>å¹³å°åˆ†äº«éƒ½æ˜¯é€šè¿‡<strong>å•ä¾‹æ¨¡å¼</strong>å®ç°.</p>
<p><strong>åœ¨æ‰‹åŠ¨å¯¼å…¥æ¡†æ¶çš„æ—¶å€™å°½é‡, æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç„¶åé€šè¿‡ä¸‹å›¾çš„æ–¹å¼å¯¼å…¥:</strong><br><img src="https://lh3.googleusercontent.com/-nBpiXhkaRik/W4UYPSwxW0I/AAAAAAAAAO0/q5MIjcFrvikjPcupMmDhnpwjb2pPI8I5gCHMYCw/I/15354491482307.jpg" alt=""></p>
<blockquote>
<p>åœ¨é¡¹ç›®çº§ <code>Framework</code> ç›®å½•ä¸‹å³é”®æ‰§è¡Œ <code>Add Files to &quot;name&quot;</code>.</p>
</blockquote>
<p>å­å¹³å°åˆ†äº«å®Œæ¯•<strong>è¿”å›åˆ°æœ¬åº”ç”¨</strong>çš„æ¥å£å†å°è£… Objective-C ç‰ˆæœ¬ç”¨çš„æ˜¯<strong>å®ä¾‹æ–¹æ³•</strong>, Swift ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯<strong>ç±»æ–¹æ³•</strong>.</p>
<h3 id="åŸºç±»"><a href="#åŸºç±»" class="headerlink" title="åŸºç±»"></a>åŸºç±»</h3><p>å­å¹³å° Manager éƒ½æ˜¯ç»§æ‰¿è‡ª<strong>RShare</strong>, è¿™ä¸ªç±»ä¸­å®šä¹‰äº†åˆ†äº« <strong>Mode(ä»£ç æ³¨é‡Šä¸­æœ‰æ ‡æ˜, iOS ä¸­ä½¿ç”¨èŒƒå›´è¾ƒå°)</strong>ã€åˆ†äº«ç»“æœ <strong>ShareResult</strong> (æˆåŠŸã€å–æ¶ˆã€å¤±è´¥)ä»¥åŠæœ€é‡è¦çš„<strong>å›è°ƒ</strong>.</p>
<p><strong>å›è°ƒ:</strong><br>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^RShareCompletion)(RShareSDKPlatform platform, ShareResult result, <span class="built_in">NSString</span>* _Nullable errorInfo);</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">RShareCompletion</span> = (<span class="number">_</span> paltform : <span class="type">RShareSDKPlatform</span>,<span class="number">_</span> result : <span class="type">ShareResult</span>,<span class="number">_</span> errorInfo : <span class="type">String</span>?) -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<p><strong>Mode(ä»…å¯¹ Facebookã€Twitterã€Instagram æœ‰æ•ˆ, Android äº¦ç„¶):</strong><br>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, Mode) &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays ä¼˜å…ˆé€‰æ‹©åŸç”Ÿåº”ç”¨åˆ†äº«, åŸç”Ÿåº”ç”¨æœªå®‰è£…çš„æƒ…å†µå¯èƒ½è·³è½¬å†…ç½® WebView æˆ–è€… Safari è¿›è¡Œåˆ†äº«.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeAutomatic,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays åŸç”Ÿåº”ç”¨åˆ†äº«.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeNative,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays åº”ç”¨å†…ç½® UIWebView åˆ†äº«.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeWeb,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays the dialog in the iOS integrated share sheet, ä»…å¯¹ Facebook åˆ†äº«æœ‰æ•ˆ.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeSheet,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays è·³è½¬è‡³ Safari åˆ†äº«, ä»…å¯¹ Facebook åˆ†äº«æœ‰æ•ˆ.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeBrowser,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays è·³è½¬è‡³ Safari è¿›è¡Œ Feed å½¢å¼çš„åˆ†äº«, ä»…å¯¹ Facebook åˆ†äº«æœ‰æ•ˆ.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeFeedBrowser,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays åº”ç”¨å†…ç½® UIWebView çš„ Feed å½¢å¼åˆ†äº«, ä»…å¯¹ Facebook åˆ†äº«æœ‰æ•ˆ.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeFeed,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     @Displays iOS çš„ç³»ç»Ÿåˆ†äº«.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    ShareModeSystem</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="QQ"><a href="#QQ" class="headerlink" title="QQ"></a>QQ</h3><h4 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="http://open.qq.com/" target="_blank" rel="noopener">è…¾è®¯å¼€å‘è€…ä¸»é¡µ</a>, <a href="http://wiki.open.qq.com/wiki/mobile/SDK%E4%B8%8B%E8%BD%BD" target="_blank" rel="noopener">SDK ä¸‹è½½</a>, QQ SDK ç›®å‰<strong>ä¸æ”¯æŒ pod å®‰è£…</strong>, iOS API è°ƒç”¨è¯´æ˜<a href="http://wiki.open.qq.com/index.php?title=iOS_API%E8%B0%83%E7%94%A8%E8%AF%B4%E6%98%8E&amp;oldid=46716" target="_blank" rel="noopener">æ–‡æ¡£</a>.</p>
<h4 id="é›†æˆ"><a href="#é›†æˆ" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. <code>TencentOpenAPI.framework</code>å¯¼å…¥é¡¹ç›®ä¸­;<br>b. æ·»åŠ ç³»ç»Ÿä¾èµ–<code>Security.framework</code>ã€<code>SystemConfiguration.framework</code>ã€<code>CoreGraphic.framework</code>ã€<code>libsqilte3.0.tbd</code>ã€<code>CoreTelephony.framework</code>ã€<code>libz.tbd</code>.<br>c. è®¾ç½® <strong>The Other Flags</strong> ä¸º <strong>-ObjC</strong>.<br>d. åœ¨<code>info.plist</code>æ–‡ä»¶çš„<code>CFBundleURLTypes</code>ä¸­æ·»åŠ :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">&lt;array&gt;</span><br><span class="line">    &lt;string&gt;tencentYOURAPPID&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br></pre></td></tr></table></figure>
<p>e. æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;mqq&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqapi&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqwpa&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqbrowser&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mttbrowser&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqOpensdkSSoLogin&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqopensdkapiV2&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqopensdkapiV3&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqopensdkapiV4&lt;/string&gt;</span><br><span class="line">&lt;string&gt;wtloginmqq2&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqzone&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqzoneopensdk&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqzoneopensdkapi&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqzoneopensdkapi19&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqzoneopensdkapiV2&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqapiwallet&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqopensdkfriend&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqopensdkdataline&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqgamebindinggroup&lt;/string&gt;</span><br><span class="line">&lt;string&gt;mqqopensdkgrouptribeshare&lt;/string&gt;</span><br><span class="line">&lt;string&gt;tencentapi.qq.reqContent&lt;/string&gt;</span><br><span class="line">&lt;string&gt;tencentapi.qzone.reqContent&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>f. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] sdkInitializeByAppID:yourAppId appKey:yourAppKey];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.sdkInitialize(appID: yourAppId, appKey: yourAppKey)</span><br></pre></td></tr></table></figure>
<p>å†…éƒ¨å®ç° (Objective-C):</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[TencentOAuth alloc]initWithAppId:appID andDelegate:<span class="keyword">self</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”±æ­¤çœ‹å‡º, å…¶å®ä»…ä»…æ˜¯ç”¨ä½œ<strong><em>åˆ†äº«</em></strong>åŠŸèƒ½çš„è¯, æ˜¯ä¸éœ€è¦ <code>appKey</code> è¿™ä¸ªå­—æ®µçš„.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p>å¯¹äºåˆ†äº«å†…å®¹çš„åŒ…è£…, é€šè¿‡å»ºç«‹ <strong>RQqHelper</strong> æ¥å®ç°åˆ†äº«å†…å®¹çš„å¤„ç†å’Œå¹³å° <strong>Manager</strong> çš„åˆ†éš”, è¿™æ ·æœ‰åˆ©äºé€»è¾‘çš„å¤„ç†, ç»“æ„æ˜æ˜¾, ä»£ç å¯æ§.<br>å…³äºå‚æ•°åŒ…è£…çš„ç»†èŠ‚, æ²¡ä»€ä¹ˆå¥½ç»†è¯´çš„, QQ æä¾›çš„æ¥å£ç®€å•æ˜äº†(Android ä¸æ˜¯è¿™æ ·).</p>
<p>å¦, é™¤åœ¨ <code>QQApiInterfaceDelegate</code> ä»£ç†å‡½æ•° <code>- (void)onResp:(QQBaseResp *)resp</code> ä¸­å¤„ç†åˆ†äº«å›è°ƒå¤–, åœ¨å‘èµ·æ‰‹ Q åˆ†äº«è¯·æ±‚çš„æ¥å£ <code>[QQApiInterface sendReq: request]</code> è¿”å›çš„ <strong>QQApiSendResultCode</strong> åšäº†<strong>åˆ†äº«å¤±è´¥çš„è¯·æ±‚ç </strong>å¤„ç†, Objective-C ä¸­å•ç‹¬å»ºç«‹çš„å¤„ç†å‡½æ•° <code>- (void)handleResultCode:(QQApiSendResultCode)code</code>, Swift åˆ™ç›´æ¥åœ¨ <strong>resultCode</strong> çš„ <code>set æ–¹æ³•</code>å¤„ç†.</p>
<p>åˆ†äº«åˆ° QQ çš„æ¥å£ä¸­ <code>scene</code> å­—æ®µç»†åˆ†åˆ° QQ å¥½å‹ã€æˆ‘çš„æ”¶è—ã€æ•°æ®çº¿(æˆ‘çš„ç”µè„‘), <strong>ä½† Android ä¸­ä¸æ”¯æŒç›´æ¥æ‰“å¼€â€˜æˆ‘çš„æ”¶è—â€™å’Œâ€˜æ•°æ®çº¿(æˆ‘çš„ç”µè„‘)â€™é¢æ¿, é¡»è‡ªè¡Œé€‰æ‹©.</strong></p>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareTextToQQ:text scene:scene completion:completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(text: text, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(QQ å¥½å‹åˆ†äº«):</p>
<p><img src="https://lh3.googleusercontent.com/-Vp5k2Jeea5s/W4UbVJdJGkI/AAAAAAAAAPU/D2NEk19T6mQ9x2vPu3-GyXQhZztjF7l_gCHMYCw/I/15354499398368.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareImageToQQ:targetImage title:title description:description scene:scene completion:completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(image: targetImage, title: title, description: description, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(QQ å¥½å‹åˆ†äº«ä¸”åˆ†äº«é¢æ¿æ ·å¼):<br><img src="https://lh3.googleusercontent.com/-ErRQl0eJpeg/W4Ubi-g9cII/AAAAAAAAAPY/-bbsGVhG8RItJh1X-_jVycwA_LiDkWVggCHMYCw/I/15354499949591.jpg" alt=""></p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareWebpageToQQWithURL:webpageURL title:title description:description thumbImage:image scene:scene completion:completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(webpageURL: webpageURL, title: title, description: description, thumbImage: image, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(QQ å¥½å‹åˆ†äº«):<br><img src="https://lh3.googleusercontent.com/-MHYM0SOfRHk/W4Ub4rRBDjI/AAAAAAAAAPo/YKnnwsVd7cEGjwwjqZWJCQlCcgo2Ws-egCHMYCw/I/15354500801834.jpg" alt=""></p>
<p><strong>è§†é¢‘é“¾åˆ†äº«:</strong><br>å®è´¨å°±æ˜¯ç½‘é¡µçš„åˆ†äº«, åœ¨æ­¤ä¸ä½œä»£ç ç¤ºä¾‹.</p>
<p><strong>éŸ³é¢‘é“¾åˆ†äº«:</strong><br>å¤§è‡´å’Œç½‘é¡µçš„åˆ†äº«ç›¸åŒ, ä½†æ˜¯å¤šäº†ä¸€ä¸ª <code>streamURL</code> çš„å­—æ®µ.</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareAudioToQQWithStreamURL:audioStreamURL title:title description:description thumbImage:image webpageURL:webpageURL scene:scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(audioStreamURL: audioStreamURL, title: title, description: description, thumbImage: image, webpageURL: webpageURL, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1.<code>Tencent.framework</code> ä¸­ <code>QQApiVideoObject</code>çš„<code>flashURL</code> å±æ€§è®¾ç½®éŸ³é¢‘æµ.<br>âš ï¸ 2. <code>audioStreamURL</code> è¯·è®¾ç½®éŸ³é¢‘çš„éŸ³é¢‘æµé“¾æ¥, ä¸è¦æŠŠéŸ³ä¹å¹³å°åˆ†äº«çš„éŸ³ä¹ç½‘é“¾ç›´æ¥èµ‹å€¼åœ¨è¯¥å­—æ®µä¸Š, å¦åˆ™ç‚¹å‡»æ’­æ”¾æŒ‰é’®æ˜¯æ— æ³•æ’­æ”¾çš„, éŸ³ä¹ç½‘é“¾æ˜¯æ”¾åœ¨ <code>webpageURL</code> å­—æ®µä¸Šçš„.</p>
</blockquote>
<p>è¡¨ç°(QQ å¥½å‹åˆ†äº«):<br><img src="https://lh3.googleusercontent.com/-5p5QMz5CkGY/W4Ucppvr1CI/AAAAAAAAAPw/qdCLblW82x8udcHyzTjCEAPHaj5JBC1pACHMYCw/I/15354502762733.jpg" alt=""></p>
<p><strong>æ–‡ä»¶åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareFileToQQWithFileData:fileData fileName:fileName title:title description:description thumbImage:image completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(fileData: filedata, fileName: fileName, title: title, description: description, thumbImage: image, compeltion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. <code>fileName</code> å­—æ®µè®¾ç½®æ–¹å¼æ˜¯: â€˜æ–‡ä»¶åâ€™+â€˜.æ‰©å±•åâ€™, å½¢å¦‚:HelloWorld.doc, è¿™æ · QQ ç³»ç»Ÿå†…éƒ¨èƒ½å¤Ÿè§£æå¹¶ä¸”å¯ä»¥å‹å¥½çš„å±•ç¤ºåˆ†äº«å†…å®¹, ç»æµ‹è¯•å¤§éƒ¨åˆ†å¸¸è§„çš„æ–‡ä»¶éƒ½èƒ½å‹å¥½çš„å±•ç¤º.<br>âš ï¸ 2. æ–‡ä»¶åˆ†äº«<strong>åªæ”¯æŒ</strong> QQ å®¢æˆ·ç«¯æ•°æ®çº¿(æˆ‘çš„ç”µè„‘)åˆ†äº«, å¹¶ä¸” Android ç«¯æ— æ³•åˆ†äº«æ–‡ä»¶, ä¹Ÿæˆ–è®¸å…¶å®æ˜¯å¯ä»¥åˆ†äº«æ–‡ä»¶åªä¸è¿‡æœ¬äººæŠ€æ‹™æ²¡å‘ç°å®ç°æ–¹æ³•ç½¢.</p>
</blockquote>
<p>è¡¨ç°(ä»¥è§†é¢‘ä¸ºä¾‹):<br><img src="https://lh3.googleusercontent.com/-xKnv6_7ebBg/W4UdbhyfQTI/AAAAAAAAAQA/ZZFvVKmYFvICLoQ5BlxSje1YPfZ7AEvrQCHMYCw/I/15354504763841.jpg" alt=""><br><img src="https://lh3.googleusercontent.com/-Pl9WwhypgYo/W4Udejynh2I/AAAAAAAAAQE/vYrYyzjFDHQaFZrB6qcmVF7ia9VoRATIwCHMYCw/I/15354504904821.jpg" alt=""></p>
<p><strong>åˆ†äº«æ–‡å­—åˆ° QQ ç©ºé—´:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareTextToQZone:description completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(text: description, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ Android ç«¯ä¸æ”¯æŒçº¯æ–‡å­—åˆ†äº«åˆ° QQ ç©ºé—´, ä¸” iOS ç«¯ä¸æ”¯æŒç½‘é¡µåˆ†äº«åˆ° QQ ç©ºé—´, é™¤éæŠŠå­—ç¬¦ä¸²å½¢å¼çš„ç½‘é“¾é€šè¿‡æ–‡å­—çš„æ–¹å¼åˆ†äº«, è¿™æ˜¯å¯è¡Œçš„.</p>
</blockquote>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-ryCutX6_irs/W4Ud0B8t3NI/AAAAAAAAAQQ/uDY0aOn5fpM1dOZfruxhEOh_kerWf9jBgCHMYCw/I/15354505745293.jpg" alt=""></p>
<p><strong>åˆ†äº«å›¾ç‰‡åˆ° QQ ç©ºé—´:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareImagesToQZone: targetImageArray  description:description completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(images: targetImageArray, description: description, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ <code>description</code> å­—æ®µå®é™…æ˜¯å¤±æ•ˆçš„, ä½†ä¸ä¿è¯æœªæ¥ä¸€å®šä¸ç”¨è¿™ä¸ªå­—æ®µ, æ‰€ä»¥æš‚ä¸”ä¿ç•™è¿™ä¸ªå­—æ®µ.</p>
</blockquote>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-syLYwcpYpWY/W4Ud5CLTBOI/AAAAAAAAAQU/fYiLQzFjTWYyTP5nYwbUx1YBohhiZ4ePACHMYCw/I/15354505948736.jpg" alt=""></p>
<p><strong>åˆ†äº«æœ¬åœ°è§†é¢‘åˆ° QQ ç©ºé—´:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] shareVideoToQZoneWithAssetURL:videoAssetURL description:description completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.shared.share(videoAssetURL: videoAssetURL, description: description, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. <code>description</code> å­—æ®µå®é™…æ˜¯å¤±æ•ˆçš„.<br>âš ï¸ 2. æœ¬åœ°è§†é¢‘ URL ä¸ºé€šè¿‡ <code>UIImagePickerController</code> é€‰æ‹©çš„åª’ä½“ <strong>info</strong> çš„ <code>UIImagePickerControllerReferenceURL</code> çš„å€¼, <strong>å½¢å¦‚: assets-library://asset/asset.MP4?id=8FF2F03F-DD84-41A5-A20C-B745E793C0DC&amp;ext=MP4</strong></p>
</blockquote>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-8G6RSAMHpOc/W4UeDvPPAlI/AAAAAAAAAQY/Y7ylDXDDK34aVE5E_A-x04QyLhtAUsXjgCHMYCw/I/15354506381172.jpg" alt=""></p>
<p><strong>c. è¿”å›æœ¬åº”ç”¨</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RQqManager shared] application:app openURL:url options: options];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RQqManager</span>.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<h3 id="å¾®ä¿¡"><a href="#å¾®ä¿¡" class="headerlink" title="å¾®ä¿¡"></a>å¾®ä¿¡</h3><h4 id="å‡†å¤‡-1"><a href="#å‡†å¤‡-1" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://open.weixin.qq.com/" target="_blank" rel="noopener">å¾®ä¿¡å¼€æ”¾å¹³å°</a>, <a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419319164&amp;token=015161c07a6a155cf6424904a9febe4301efaa49&amp;lang=zh_CN" target="_blank" rel="noopener">SDK ä¸‹è½½</a>, å¾®ä¿¡ SDK <strong>æ”¯æŒ pod å®‰è£…</strong>, <a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419317332&amp;token=&amp;lang=zh_CN" target="_blank" rel="noopener">åˆ†äº« &amp; æ”¶è— API è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-1"><a href="#é›†æˆ-1" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. æ‰‹åŠ¨: <code>libWeChatSDK.a</code>ã€<code>WXApi.h</code>ã€<code>WXApiObject.h</code>, å¯¼å…¥é¡¹ç›®ä¸­;<br>pod é›†æˆ: <code>pod &#39;WechatOpenSDK&#39;</code>, è‹¥å‡ºç°:</p>
<blockquote>
<p>Use the $(inherited) flag, or<br>Remove the build settings from the target.<br>ğŸ”§è§£å†³æ–¹æ³•(å¼•è‡ª<a href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=1417694084&amp;token=&amp;lang=zh_CN" target="_blank" rel="noopener">å¾®ä¿¡é›†æˆè¯´æ˜</a>, æœªäº²è‡ªæµ‹è¯•): æŠŠå·¥ç¨‹ target ä¸­çš„ build Setting é‡Œé¢ <strong>PODS_ROOT</strong> çš„å€¼æ›¿æ¢æˆ <strong>\$(inherited)</strong>, <strong>Other Linker Flags</strong> ä¸­ <strong>-all_load</strong> æ›¿æ¢æˆ <strong>\$(inherited).</strong></p>
</blockquote>
<p>b. æ·»åŠ ç³»ç»Ÿä¾èµ– <code>SystemConfiguration.framework</code>, <code>libz.dylib</code>, <code>libsqlite3.0.dylib</code>, <code>libc++.dylib</code>, <code>Security.framework</code>, <code>CoreTelephony.framework</code>, <code>CFNetwork.framework</code>.<br>c. æ‰‹åŠ¨é›†æˆçš„æƒ…å†µä¸‹, éœ€è®¾ç½® <strong>The Other Flags</strong> ä¸º <strong>-ObjC</strong>.<br>d. åœ¨<code>info.plist</code> æ–‡ä»¶çš„ <code>CFBundleURLTypes</code> ä¸­æ·»åŠ :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">&lt;array&gt;</span><br><span class="line">    &lt;string&gt;wxYOURAPPID&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br></pre></td></tr></table></figure>
<p>e. æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;weixin&lt;/string&gt;</span><br><span class="line">&lt;string&gt;wechat&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>f. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-1"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-1" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] sdkInitializeByAppID:appID appSecret:secret];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.sdkInitialize(appID: appID, appSecret: secret)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>åŠŸèƒ½çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p>åˆå§‹åŒ–å†…éƒ¨å®ç°ç•¥å¾®æœ‰åŒºåˆ«:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UInt64</span> typeFlag = MMAPP_SUPPORT_TEXT | MMAPP_SUPPORT_PICTURE | MMAPP_SUPPORT_VIDEO | MMAPP_SUPPORT_LOCATION | MMAPP_SUPPORT_AUDIO | MMAPP_SUPPORT_WEBPAGE; </span><br><span class="line">[WXApi registerAppSupportContentFlag:typeFlag];</span><br><span class="line">[WXApi registerApp:appID];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Objective-C ä¸­åŒæ—¶è®¾ç½®å¤šä¸ªæšä¸¾å€¼å¯ä»¥é€šè¿‡ â€˜|â€™ æ¥å®ç° option çš„è®¾ç½®.</p>
</blockquote>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> typeFlag : <span class="type">TypeFlag</span> = [.<span class="type">Text</span>, .<span class="type">Picture</span>, .<span class="type">Video</span>, .<span class="type">Audio</span>, .<span class="type">Webpage</span>]</span><br><span class="line"><span class="type">WXApi</span>.registerAppSupportContentFlag(typeFlag.rawValue)</span><br><span class="line"><span class="type">WXApi</span>.registerApp(appID)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Swift ä¸­è®¾ç½®å¤šä¸ªæšä¸¾å€¼ä¸å¯ç”¨ â€˜|â€™ æ¥å®ç°, æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœ, å¿…é¡»æ–°å»ºç»“æ„ä½“å¹¶ä¸”å®ç° <code>OptionSetType</code> åè®®, <code>OptionSetType</code> æ”¹å˜äº† Objective-C ä¸­ <code>NS_ENUM</code> / <code>NS_OPTIONS</code> çš„è¡Œä¸ºæ–¹å¼èµ‹äºˆå¯å¤šé€‰çš„èƒ½åŠ›.</p>
</blockquote>
<p>TypeFlag çš„å£°æ˜(æ²¡æœ‰å†™å…¨, ä½†å®é™…æµ‹è¯•å¹¶ä¸å½±å“<em>æ–‡ä»¶</em>çš„åˆ†äº«):</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">TypeFlag</span> : <span class="title">OptionSet</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> rawValue: <span class="type">UInt64</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">Text</span> = <span class="type">TypeFlag</span>(rawValue: enAppSupportContentFlag.<span class="type">MMAPP_SUPPORT_TEXT</span>.rawValue)</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">Picture</span> = <span class="type">TypeFlag</span>(rawValue: enAppSupportContentFlag.<span class="type">MMAPP_SUPPORT_PICTURE</span>.rawValue)</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">Video</span> = <span class="type">TypeFlag</span>(rawValue: enAppSupportContentFlag.<span class="type">MMAPP_SUPPORT_VIDEO</span>.rawValue)</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">Audio</span> = <span class="type">TypeFlag</span>(rawValue: enAppSupportContentFlag.<span class="type">MMAPP_SUPPORT_AUDIO</span>.rawValue)</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> <span class="type">Webpage</span> = <span class="type">TypeFlag</span>(rawValue: enAppSupportContentFlag.<span class="type">MMAPP_SUPPORT_WEBPAGE</span>.rawValue)     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>b. åˆ†äº«</strong></p>
<p>å¾®ä¿¡åˆ†äº«çš„å†…å®¹åŒ…è£…åŒæ ·é€šè¿‡ä¸€ä¸ª <code>RWechatHelper</code> è¿›è¡Œå•ç‹¬å¤„ç†, å¯¹äºæ–‡å­—ã€ç½‘é¡µã€å›¾ç‰‡ã€è§†é¢‘ç½‘é“¾ã€å°ç¨‹åºã€æ–‡ä»¶çš„åˆ†äº«å†…å®¹å¤„ç†éƒ½å¾ˆç®€å•, ç‰¹åˆ«æ³¨æ„çš„å°±æ˜¯å¯¹äºéŸ³ä¹é“¾çš„åˆ†äº«, åŒ QQ ä¸€æ ·, éœ€è¦åŒºåˆ«ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªæ˜¯<strong>éŸ³é¢‘æµ</strong>é“¾, ä¸€ä¸ªæ˜¯<strong>éŸ³é¢‘ç½‘é¡µ</strong>, æ’­æ”¾çš„æ˜¯éŸ³é¢‘æµ, ç‚¹å‡»èƒŒæ™¯è¿›å…¥çš„æ˜¯éŸ³é¢‘ç½‘é¡µ.</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WXMusicObject* obj = [WXMusicObject object];</span><br><span class="line">obj.musicDataUrl = musicURL;</span><br><span class="line">obj.musicUrl = webpageURL;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = <span class="type">WXMusicObject</span>()</span><br><span class="line">obj.musicUrl = audioStreamURL</span><br><span class="line">obj.musicUrl = webpageURL</span><br></pre></td></tr></table></figure>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] shareText:text scene: scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.share(text: shareDescription, scene: scene, completion: shareCompletion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹):</p>
<p><img src="https://lh3.googleusercontent.com/-o2fUUxvNwcs/W4YI-snwrLI/AAAAAAAAAQs/mHN1KvfzSCIielykQq5yhdkFQTbMo_H5QCHMYCw/I/15355107755808.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] shareImage:targetImage scene: scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.share(image: targetImage, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹åˆ—è¡¨):</p>
<p><img src="https://lh3.googleusercontent.com/-TmP4cckgG5k/W4YJJKitRkI/AAAAAAAAAQw/GLlGIFGTVOwWA1VCWJrI1pgCDecxeXUfgCHMYCw/I/15355108192461.jpg" alt=""></p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] shareWebpageWithURL:webpageURL title:title description:description thumbImage:thumbImage scene: scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.share(webpageURL: webpageURL, title: title, description: description, thumbImage: thumbImage, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. <code>thumbImage</code> å­—æ®µçš„ç¼©ç•¥å›¾å¤§å°ä¸èƒ½è¶…è¿‡ 32 Kb, ä½†å®é™…æµ‹è¯• 100 Kb å·¦å³ä¹Ÿæ˜¯å®Œå…¨å¯è¡Œçš„, ä½†ä¸€å®šä¸èƒ½è¿‡å¤§, å¦åˆ™ä¼šå‡ºç°:<strong>åˆ†äº« N æ¬¡æ‰èƒ½æˆåŠŸä¸€æ¬¡, æˆ–è€…å¹²è„†æ— æ³•è°ƒèµ·å¾®ä¿¡çš„å®¢æˆ·ç«¯è¿›è¡Œåˆ†äº«</strong>.<br>âš ï¸ 2. Android  å¯¹äºç¼©ç•¥å›¾çš„å¤„ç†ç›¸å¯¹å‹å¥½å¾ˆå¤š, å¯¹äº iOS æ— æ³•åˆ†äº«çš„è¿‡å¤§çš„ç¼©ç•¥å›¾æ•°æ®ä¸€èˆ¬æƒ…å†µä¸‹ Android éƒ½èƒ½æˆåŠŸå¯åŠ¨å¾®ä¿¡å®¢æˆ·ç«¯å¹¶ä¸”æˆåŠŸåˆ†äº«(äº²æµ‹).<br>âš ï¸ 3. åœ¨ç¼©ç•¥å›¾æ²¡æœ‰ç¬¦åˆè§„èŒƒçš„æ—¶å€™, å³ä½¿æˆåŠŸåˆ†äº«åœ¨ iOS ç«¯ä¹Ÿä¼šå‡ºç°<strong>ç¼©ç•¥å›¾ä¸æ˜¾ç¤º</strong>çš„æƒ…å†µ, Android å‡ ä¹éƒ½ä¼šæ˜¾ç¤º.</p>
</blockquote>
<p>è¡¨ç°(åˆ†äº«åˆ°å¥½å‹):<br><img src="https://lh3.googleusercontent.com/-7NvBzYlIjXI/W4YJXjkMN1I/AAAAAAAAAQ0/2anBhoYU_Zon4vPh-DqchfGxFJXfFx3sQCHMYCw/I/15355108753889.jpg" alt=""></p>
<p><strong>è§†é¢‘é“¾åˆ†äº«:</strong><br>å®è´¨å°±æ˜¯ç½‘é¡µçš„åˆ†äº«, åœ¨æ­¤ä¸ä½œä»£ç ç¤ºä¾‹.</p>
<p><strong>éŸ³é¢‘é“¾åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] shareMusicWithStreamURL: audioStreamURL webpageURL:audioWebpageURL title: title description: description thumbImage:image scene:scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.share(audioStreamURL: audioStreamURL, webpageURL: audioWebpageURL, title: title, description: description, thumbImage: thumbImage, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ æ³¨æ„ <code>audioStreamURL</code> å’Œ <code>webpageURL</code> çš„åŒºåˆ«, å‰é¢æœ‰æåŠ.</p>
</blockquote>
<p>è¡¨ç°(åˆ†äº«åˆ°å¾®ä¿¡å¥½å‹):<br><img src="https://lh3.googleusercontent.com/-cDx4NkYCZPc/W4YJjFYPhCI/AAAAAAAAAQ4/CVokIDzFsHktVslrXC0ywoTij51u4RAtgCHMYCw/I/15355109233109.jpg" alt=""></p>
<p><strong>å°ç¨‹åºåˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] shareMiniProgramWithUserName:userName path:path type:type webpageURL:webpageURL title:title description:description thumbImage:image scene: scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.shareMiniProgram(userName: userName, path: path, type: type, webpageURL: webpageURL, title: title, description: description, thumbImage: thumbImage, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. demo ä¸­ç¬”è€…å¹¶æ²¡æœ‰ç¼–å†™å°ç¨‹åº, ä»…ä»…ä¾ç…§å¾®ä¿¡çš„ SDK è¿›è¡Œäº†å‚æ•°çš„è®¾ç½®, æ‰€ä»¥æ— æ³•åˆ†äº«, ä½†å…·ä½“çš„å‚æ•°è®¾ç½®å½¢å¼åœ¨ demo ä¸­æ˜ç¡®æ ‡æ˜.<br>âš ï¸ 2. å°ç¨‹åºåˆ†ä¸‰ç§ç±»å‹, <code>type</code> å­—æ®µåˆ†: <strong>å‘å¸ƒ</strong>ã€<strong>é¢„è§ˆ</strong>ä»¥åŠ<strong>ä½“éªŒ</strong>ä¸‰ä¸ªç‰ˆæœ¬.</p>
</blockquote>
<p><strong>æ–‡ä»¶åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] shareFileWithData:fileData extension:fileExtensionName title:title thumbImage:image scene:scene completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.shared.share(fileData: fileData, extensionName: fileExtensionName, title: title, thumbImage: thumbImage, scene: scene, completion: completion)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºä½“ç§¯ç¨å¤§çš„å›¾ç‰‡ã€å°ä½“ç§¯è§†é¢‘ã€doc æ–‡æœ¬ã€PDF æ–‡ä»¶ éƒ½æµ‹è¯•è¿‡, å¯ä»¥æ­£å¸¸åˆ†äº«, ä¸”é€šè¿‡å¾®ä¿¡å†…éƒ¨çš„è§£æå¯ä»¥æ˜¾ç¤º.</p>
<blockquote>
<p>âš ï¸ 1. å¿…é¡»è®¾ç½®æ–‡ä»¶çš„<strong>æ‰©å±•å</strong>.<br>âš ï¸ 2. æ–‡ä»¶åˆ†äº«<strong>ä¸æ”¯æŒåˆ†äº«åˆ°æœ‹å‹åœˆ</strong>.<br>âš ï¸ 3. åœ¨è®¾ç½®<strong>ç¼©ç•¥å›¾</strong>çš„æƒ…å†µä¸‹, iOS ç«¯çš„å¯¹è¯æ¡†æ˜¯ä¸æ˜¾ç¤ºç¼©ç•¥å›¾çš„, ä½†æ˜¯ Android å¯ä»¥, ä½†ä¹Ÿä»…é™äºå‘é€æ–¹èƒ½çœ‹è§.</p>
</blockquote>
<p>è¡¨ç°(åˆ†äº«è§†é¢‘åˆ°å¾®ä¿¡å¥½å‹):<br><img src="https://lh3.googleusercontent.com/-QGo4SsF44vo/W4YJ3SOMecI/AAAAAAAAAQ8/6gKbrNg0OVs2Tu5PqrK8KtMy6Xt7Y62DgCHMYCw/I/15355110031716.jpg" alt=""></p>
<p><img src="https://lh3.googleusercontent.com/-cyVIk6orcNM/W4YJ4qrqPrI/AAAAAAAAARA/mAhpKKsDtF4YrTJ1wxePbuV2RUPJkY4aQCHMYCw/I/15355110092048.jpg" alt=""></p>
<p><strong>c. è¿”å›æœ¬åº”ç”¨</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWechatManager shared] application:app openURL:url options:options];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWechatManager</span>.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<h3 id="æ–°æµª"><a href="#æ–°æµª" class="headerlink" title="æ–°æµª"></a>æ–°æµª</h3><h4 id="å‡†å¤‡-2"><a href="#å‡†å¤‡-2" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="http://open.weibo.com/" target="_blank" rel="noopener">æ–°æµªå¼€æ”¾å¹³å°</a>, <a href="http://open.weibo.com/wiki/SDK#iOS_SDK" target="_blank" rel="noopener">SDK ä¸‹è½½</a>, æ–°æµª SDK <strong>æ”¯æŒ pod å®‰è£…</strong>, <a href="https://github.com/sinaweibosdk/weibo_ios_sdk" target="_blank" rel="noopener">iOS æ¥å£è°ƒç”¨æ–‡æ¡£</a>.</p>
<h4 id="é›†æˆ-2"><a href="#é›†æˆ-2" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. æ‰‹åŠ¨å¯¼å…¥ <code>WeiboSDK.h</code>ã€ <code>WBHttpRequest.h</code>ã€<code>libWeiboSDK.a</code> å’Œ <code>WeiboSDK.bundle</code> åˆ°é¡¹ç›®ä¸­.<br>pod é›†æˆ: <code>pod &quot;Weibo_SDK&quot;, :git =&gt; &quot;https://github.com/sinaweibosdk/weibo_ios_sdk.git&quot;</code> (æœªå®é™…æµ‹è¯•è¿‡).</p>
<p>b. æ·»åŠ ç³»ç»Ÿä¾èµ–<code>QuartzCore.framework</code>ã€<code>SystemConfiguration.framework</code>ã€<code>ImageIO.framework</code>ã€<code>CoreGraphic.framework</code>ã€<code>Security.framework</code>ã€<code>libsqilte3.0.tbd</code>ã€<code>CoreTelephony.framework</code>ã€<code>CoreText.framework</code>ã€<code>libz.tbd</code>.<br>c. è®¾ç½® <strong>The Other Flags</strong> ä¸º <strong>-ObjC</strong>.<br>d. åœ¨ <code>info.plist</code> æ–‡ä»¶çš„ <code>CFBundleURLTypes</code> ä¸­æ·»åŠ :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">&lt;array&gt;</span><br><span class="line">    &lt;string&gt;wbYOURAPPKEY&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br></pre></td></tr></table></figure>
<p>e.å¯¹ä¼ è¾“å®‰å…¨çš„æ”¯æŒ, åœ¨å½“ä¸‹çš„ iOS ç³»ç»Ÿä¸­ï¼Œé»˜è®¤éœ€è¦ä¸ºæ¯æ¬¡ç½‘ç»œä¼ è¾“å»ºç«‹ <strong>SSL</strong>, æ‰€ä»¥éœ€åœ¨ plist ä¸­è®¾ç½® <strong>NSAppTransportSecurity çš„ NSAllowsArbitraryLoads</strong> ä¸º <strong>YES</strong>.</p>
<p>f. è§£é™¤åŸæœ‰ <strong>ATS</strong>è®¾ç½®åœ¨ iOS 10+ çš„ç½‘ç»œé™åˆ¶:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;sina.com.cn&lt;/key&gt;</span><br><span class="line">  	&lt;dict&gt;</span><br><span class="line">  		&lt;key&gt;NSIncludesSubdomains&lt;/key&gt;</span><br><span class="line">  		&lt;<span class="literal">true</span>/&gt;</span><br><span class="line">  		&lt;key&gt;NSThirdPartyExceptionAllowsInsecureHTTPLoads&lt;/key&gt;</span><br><span class="line">  		&lt;<span class="literal">true</span>/&gt;</span><br><span class="line">  		&lt;key&gt;NSExceptionMinimumTLSVersion&lt;/key&gt;</span><br><span class="line">  		&lt;string&gt;TLSv1.0&lt;/string&gt;</span><br><span class="line">  		&lt;key&gt;NSThirdPartyExceptionRequiresForwardSecrecy&lt;/key&gt;</span><br><span class="line">  		&lt;<span class="literal">false</span>/&gt;</span><br><span class="line">  	&lt;/dict&gt;</span><br></pre></td></tr></table></figure>
<p>g. æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;sinaweibohd&lt;/string&gt;</span><br><span class="line">&lt;string&gt;sinaweibo&lt;/string&gt;</span><br><span class="line">&lt;string&gt;weibosdk&lt;/string&gt;</span><br><span class="line">&lt;string&gt;weibosdk2.5&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>h. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-2"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-2" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RSinaWeiboManager shared] sdkInitializeByAppKey:YourAppKey appSecret:YourAppSecret];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RSinaWeiboManager</span>.shared.sdkInitialize(appKey: <span class="type">YourAppKey</span>, appSecret: <span class="type">YourAppSecret</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p>å¯¹äºåˆ†äº«å†…å®¹çš„åŒ…è£…æ–°æµªå¤„ç†çš„æ¯” QQ ç®€ç»ƒ, æ‰€ä»¥æ— éœ€å€ŸåŠ©æ–°çš„ç±»å»å¤„ç†åˆ†äº«å†…å®¹, æ–‡å­—æ˜¯æœ€ç®€å•çš„, ä¸éœ€è¦å¯¹æ–‡å­—å†…å®¹è¿›è¡ŒäºŒæ¬¡åŒ…è£…, ç›´æ¥å¯¹ <code>WBMessageObject</code> è¿›è¡Œæ–‡å­—è®¾ç½®ç„¶åå‘é€åˆ†äº«è¯·æ±‚å³å¯; </p>
<p>å›¾ç‰‡å’Œè§†é¢‘(åŒ…æ‹¬åˆ°ã€Œå¾®åšæ•…äº‹ã€)çš„åˆ†äº«éœ€è¦ <code>WBImageObject</code> å’Œ <code>WBNewVideoObject</code> çš„åŒ…è£…, æ‰§è¡Œ <code>addImages</code> å’Œ <code>addVideo</code> æ–¹æ³•å°†è¦åˆ†äº«çš„å›¾ç‰‡/è§†é¢‘å¤„ç†, åœ¨æ­¤éœ€è¦æ³¨æ„çš„æ˜¯:<strong>å®ä¾‹åŒ– <code>WBImageObject</code> å’Œ <code>WBNewVideoObject</code> çš„æ—¶å€™å¿…é¡»è®¾ç½® delegate, å¹¶å®ç° <code>WBMediaTransferProtocol</code> åè®®, ç”±äº <code>addImages</code> å’Œ <code>addVideo</code> æ˜¯å¼‚æ­¥æ“ä½œ, æ‰€ä»¥ <code>wbsdk_TransferDidReceiveObject</code> å›è°ƒä¸­å‘é€åˆ†äº«è¯·æ±‚!</strong></p>
<p>å¦, ç»æµ‹è¯•, åœ¨å‚æ•°å‡†å¤‡å¤±è´¥çš„å›è°ƒå‡½æ•° <code>wbsdk_TransferDidFailWithErrorCode</code> ä¸­, å‡ºç°çš„é”™è¯¯åœºæ™¯æ€»ç»“:</p>
<blockquote>
<ul>
<li>å›¾ç‰‡ã€è§†é¢‘ä½“ç§¯è¿‡å¤§;</li>
<li>å›¾ç‰‡æ•°é‡ä¸åœ¨ 1 ~ 9 èŒƒå›´å†…;</li>
<li>å€˜è‹¥åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€, ç…§ç‰‡åªèƒ½åˆ†äº«ä¸€å¼ , è€Œä¼ äº†å¤šå¼ å›¾ç‰‡;</li>
<li><code>WBImageObject</code> å¤šå‚æ•°å¹¶å­˜: å•å¼ çš„ Data æ ¼å¼çš„å›¾ç‰‡å’Œå›¾ç‰‡æ•°ç»„å…±å­˜;</li>
<li>è§†é¢‘ URL é”™è¯¯.</li>
</ul>
</blockquote>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RSinaWeiboManager shared] shareText: text completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RSinaWeiboManager</span>.shared.share(text: text, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-n6JtHRllWwQ/W4YK1a9xZbI/AAAAAAAAARc/xhiZef6skBUY_sr9V3zvuH08c1Ot0YXbQCHMYCw/I/15355112516411.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RSinaWeiboManager shared] shareImage:images text: text toStory: yesOrNo completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RSinaWeiboManager</span>.shared.share(images: images, text: text, isToStory: trueOrFalse, completion: completion)</span><br></pre></td></tr></table></figure>
<p>ä¸ºç»Ÿä¸€æ¥å£, å›¾ç‰‡ç”¨æ•°ç»„åŒ…è£…; åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€åŠŸèƒ½ä¸­ <code>text</code> å­—æ®µä¼šå¤±æ•ˆ.</p>
<blockquote>
<p>âš ï¸ 1. å¼€å¯ã€Œåˆ†äº«åˆ°å¾®åšæ•…äº‹ã€åŠŸèƒ½å›¾ç‰‡åªèƒ½ä¼ ä¸€å¼ ; å¤šå¼ å›¾ç‰‡åˆ†äº«çš„æƒ…å†µä¸‹ã€Œåˆ†äº«åˆ°å¾®åšæ•…äº‹ã€çš„åŠŸèƒ½å¿…é¡»å…³é—­!<br>âš ï¸ 2. å›¾ç‰‡å•å¼ ä¸èƒ½è¶…è¿‡ 10 MB, æœ€å¤š 9 å¼ å›¾ç‰‡.</p>
</blockquote>
<p>è¡¨ç°:<br>åˆ†äº«åˆ°å¾®åš:<br><img src="https://lh3.googleusercontent.com/-aCBLxWXifUA/W4YLXeo0OTI/AAAAAAAAARo/VdzbwYQwydAv6EG66DgaWTF2CPiN_QY0ACHMYCw/I/15355113873506.jpg" alt=""></p>
<p>åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€:</p>
<p><img src="https://lh3.googleusercontent.com/-I6gUuJZj1Ag/W4YK_2MRjaI/AAAAAAAAARg/9zJxYQknfxU8XpeNTVTrXRThKui_65cMACHMYCw/I/15355112934927.jpg" alt=""></p>
<p><strong>æœ¬åœ°è§†é¢‘åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RSinaWeiboManager shared] shareVideoWithLocalURL:videoFileURL text:text toStory:YesOrNo completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RSinaWeiboManager</span>.shared.share(localVideoURL: videoFileURL, text: text, isToStory: trueOrFalse, completion: completion)</span><br></pre></td></tr></table></figure>
<p>åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€åŠŸèƒ½ä¸­ <code>text</code> å­—æ®µä¼šå¤±æ•ˆ.</p>
<blockquote>
<p>âš ï¸ æœ¬åœ°è§†é¢‘ URL ä¸ºé€šè¿‡ <code>UIImagePickerController</code> é€‰æ‹©çš„åª’ä½“ <strong>info</strong> çš„ <code>UIImagePickerControllerMediaURL</code> çš„å€¼,<strong>å½¢å¦‚: file:///private/var/mobile/Containers/Data/Application/3B368706-001D-4018-901B-284D64FA50E2/tmp/17BD98B4-A498-46E7-9715-6F39E73DFD75.MOV</strong></p>
</blockquote>
<p>è¡¨ç°:<br>åˆ†äº«åˆ°å¾®åš:<br><img src="https://lh3.googleusercontent.com/-hotp8LeIirg/W4YNSYqE6pI/AAAAAAAAASA/azcKxSHX3_4OHh29cLjtEK_IbAzlOMvaQCHMYCw/I/15355118787181.jpg" alt=""></p>
<p>åˆ†äº«åˆ°ã€Œå¾®åšæ•…äº‹ã€:<br><img src="https://lh3.googleusercontent.com/-WmJCSwfIlD0/W4YNAsLSyCI/AAAAAAAAAR4/YrO0ceKCmAoZZF6NV_tJ5iAiKwvftfJAQCHMYCw/I/15355118081232.jpg" alt=""></p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RSinaWeiboManager shared] shareWebpageWithURL: webpageURL objectID: <span class="string">@"id"</span> title: title description: description thumbImage:thumbImage completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RSinaWeiboManager</span>.shared.share(webpageURL: webpageURL, objectID: <span class="string">"id"</span>, title: title, description: description, thumbImage: thumbImage, completion: completion)</span><br></pre></td></tr></table></figure>
<p><code>objectID</code> å­—æ®µç”¨äºè¡¨ç¤ºä¸€ä¸ªå¤šåª’ä½“å†…å®¹; ç½‘é¡µçš„æ¶ˆæ¯ä½“è®¾ç½®æ— éœ€è®¾ç½® <strong>delegate</strong>, å› ä¸ºä¸æ¶‰åŠå¼‚æ­¥æ“ä½œ, è€Œä¸” <code>thumbImage</code> å­—æ®µåº”è¯¥æ˜¯å¤±æ•ˆçš„, å³ä¸æ˜¾ç¤ºç¼©ç•¥å›¾.</p>
<blockquote>
<p>âš ï¸ 1. ç½‘é¡µ <code>thumbImage</code> å­—æ®µçš„ç¼©ç•¥å›¾æ•°æ®ä¸èƒ½å¤§äº 32 Kb <strong>(æ–°æµªçš„ SDK æ§åˆ¶çš„å¾ˆä¸¥æ ¼)</strong>.<br>âš ï¸ 2. <code>WBWebpageObject</code> çš„ <code>description</code> è®¾ç½®æ— æ•ˆ, æƒ³è¦æ˜¾ç¤ºç½‘é¡µçš„ç›¸å…³æè¿°, åªèƒ½è®¾ç½® <code>WBMessageObject</code> çš„ <code>text</code> å­—æ®µ.</p>
</blockquote>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-fjHloKNsXbw/W4YNme4qZXI/AAAAAAAAASE/rWh2Yf5V20IRCPqeTd5pmPmQuFUJlew8wCHMYCw/I/15355119596149.jpg" alt=""></p>
<p><strong>c. è¿”å›æœ¬åº”ç”¨</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RSinaWeiboManager shared] application:app openURL:url options:options];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RSinaWeiboManager</span>.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<h3 id="Facebook"><a href="#Facebook" class="headerlink" title="Facebook"></a>Facebook</h3><h4 id="å‡†å¤‡-3"><a href="#å‡†å¤‡-3" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://developers.facebook.com/" target="_blank" rel="noopener">Facebook å¼€å‘è€…ä¸»é¡µ</a>, Facebook SDK <strong>æ”¯æŒ pod é›†æˆ</strong>, <a href="https://developers.facebook.com/docs/sharing/ios" target="_blank" rel="noopener">åˆ†äº«æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-3"><a href="#é›†æˆ-3" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. pod é›†æˆ: <code>pod &#39;FBSDKLoginKit&#39;</code><br>b. åœ¨<code>info.plist</code>æ–‡ä»¶çš„<code>CFBundleURLTypes</code>ä¸­æ·»åŠ :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">&lt;array&gt;</span><br><span class="line">    &lt;string&gt;fbYOURAPPID&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br><span class="line">&lt;key&gt;FacebookAppID&lt;/key&gt;</span><br><span class="line">&lt;string&gt;YOURAPPID&lt;/string&gt;</span><br><span class="line">&lt;key&gt;FacebookDisplayName&lt;/key&gt;</span><br><span class="line">&lt;string&gt;SOMENAME&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>c. æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;fbapi&lt;/string&gt;</span><br><span class="line">&lt;string&gt;fb-messenger-share-api&lt;/string&gt;</span><br><span class="line">&lt;string&gt;fbauth2&lt;/string&gt;</span><br><span class="line">&lt;string&gt;fbshareextension&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>d. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-3"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-3" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared] sdkInitializeByID:appID secret:secret];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.shared.sdkInitialize(appID: appID, secret: secret)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>åŠŸèƒ½çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong><br>å‚æ•°çš„åŒ…è£…, å€ŸåŠ©å·¥å…·ç±» <code>RFacebookHelper</code> æ¥å¤„ç†, Facebook å·²ç»å°è£…å¥½äº†å„ä¸ªç±»å‹çš„åˆ†äº«å†…å®¹è½½ä½“ (FBSDKSharePhotoContentã€FBSDKShareVideoContent â€¦), å¯¹åº”è®¾ç½®å±æ€§å€¼å°±å¯ä»¥; å¯¹äºå›¾ç‰‡çš„åˆ†äº«, å’Œæ–°æµªçš„å›¾ç‰‡åˆ†äº«æ€è·¯ç›¸åŒ, å³: æ— è®ºæ˜¯å•å¼ è¿˜æ˜¯å¤šå›¾, ä¸€æ¦‚é€šè¿‡æ•°ç»„åŒ…è£…ä¼ é€’ç»™ <code>RFacebookHelper</code>, ç„¶åå®ƒè‡ªè¡Œå¤„ç†.</p>
<p><strong>ç½‘é¡µåˆ†äº«:</strong><br>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared] shareWebpageWithURL: webpageURL</span><br><span class="line">                           quote: quote</span><br><span class="line">                         hashTag: hashTag</span><br><span class="line">                            from: context</span><br><span class="line">                            mode: mode</span><br><span class="line">                      completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.shared.share(webpageURL: webpageURL, quote: quote, hashTag: hashTag, from: context, mode: mode, completion: completion)</span><br></pre></td></tr></table></figure>
<p>Facebook çš„ SDK åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­, èˆå¼ƒäº†å¾ˆå¤šå­—æ®µ, åˆ†äº«å‚æ•°ä¸å¦‚æ–°æµªé‚£æ ·å¤šæ ·, ä½†æ˜¯å…¶åˆ†äº«çš„è¡¨ç°å½¢å¼å´æ¯”å›½å†…çš„è¦å‹å¥½å¾ˆå¤š, ç‰¹åˆ«æ˜¯åœ¨ç½‘é¡µåˆ†äº«è¿™å—ä½“ç°çš„æ›´åŠ æ˜æ˜¾, å€¼å¾—æ³¨æ„çš„æ˜¯, <strong>éç½‘é¡µå½¢å¼çš„åˆ†äº«å›è°ƒæ— æ•ˆ</strong>, åŠªåŠ›åœ°åœ¨ <strong>Github</strong>ã€<strong>Stack Overflow</strong> å’Œ <strong>Facebook Developer è®ºå›</strong>æ‰¾ç­”æ¡ˆä½†éƒ½æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•, æ ¹æ® <code>postId</code> çš„åˆ¤æ–­åˆ†äº«ç»“æœçŠ¶æ€çš„æ–¹æ³•æ—©å·²å¤±æ•ˆ, æ— è®ºæ˜¯ Android è¿˜æ˜¯ iOS ç«¯, ç›®å‰éƒ½æ²¡åŠæ³•.</p>
<blockquote>
<p>âš ï¸ <code>hashTag (è¯é¢˜)</code> çš„è¡¨ç°å½¢å¼ä¸åŒäºå›½å†…, æ–°æµªçš„è¯é¢˜æ ¼å¼: <strong>#è¯é¢˜#</strong>, ä¸¤ä¸ª <strong>#</strong> ä¹‹é—´ä¸€åˆ‡å†…å®¹éƒ½èƒ½æˆä¸ºè¯é¢˜, è€Œ Twitterã€Instagramã€Facebook çš„æ ¼å¼: <strong>#è¯é¢˜</strong>, è¯é¢˜å†…å®¹è¯ç»„ä¹‹é—´ä¸èƒ½æœ‰ä»»ä½•ç¬¦å·ä¸”å¿…é¡»è¿åœ¨ä¸€èµ·.</p>
</blockquote>
<p>è¡¨ç°:<br>å®¢æˆ·ç«¯å½¢å¼çš„åˆ†äº«(æ— å›è°ƒ):<br><img src="https://lh3.googleusercontent.com/-9s9itZnYAGU/W4YO10hlHrI/AAAAAAAAASU/4QsiueemIrYkysCjjj2SA-OozJlDHPBFwCHMYCw/I/15355122765780.jpg" alt=""></p>
<p>ç”±ä¸Šå›¾å¯è§, åœ¨é€šè¿‡å®¢æˆ·ç«¯åˆ†äº«çš„è¿‡ç¨‹ä¸­, <code>quote</code> å­—æ®µå·²ç»ä¸¢å¤±, <strong>Android è¡¨ç°ä¸åŒ, <code>quote</code> ä¿ç•™, å…¶æ¬¡, iOS æ˜¯è·³è½¬åˆ° Facebook å®¢æˆ·ç«¯åˆ†äº«, Android æ˜¯åœ¨æœ¬åº”ç”¨å†…å¼¹å‡ºå¯¹è¯æ¡†åˆ†äº«, ä¸” Android é€šè¿‡å®¢æˆ·ç«¯åˆ†äº«éœ€è¦æå‰æ‰“å¼€ Facebook å®¢æˆ·ç«¯, å¦åˆ™æ— æ³•å¼¹å‡ºåˆ†äº«å¯¹è¯æ¡†, æµ‹è¯•è¿‡ç¾å›¾ç§€ç§€çš„å›¾ç‰‡åˆ†äº«, ä¹Ÿæ˜¯ä¸€æ ·, éœ€è¦æå‰æ‰“å¼€å®¢æˆ·ç«¯.</strong>  </p>
<p>ç½‘é¡µå½¢å¼çš„åˆ†äº«(æœ‰å›è°ƒ):<br><img src="https://lh3.googleusercontent.com/-7IgEDiuEqLY/W4YOSe_rlUI/AAAAAAAAASI/CfX0IhaYObU9cokYviBpS_0OsL6BP6WEgCHMYCw/I/15355121341100.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared] sharePhotos: targetImageArray</span><br><span class="line">                    from:context</span><br><span class="line">              completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.shared.share(photos: targetImageArray, from: context, completion: completion)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ 1. ç…§ç‰‡å¤§å°å¿…é¡»å°äº 12MB.<br>âš ï¸ 2. ç”¨æˆ·éœ€è¦å®‰è£…ç‰ˆæœ¬ 7.0 æˆ–ä»¥ä¸Šçš„åŸç”Ÿ iOS ç‰ˆ Facebook åº”ç”¨.</p>
</blockquote>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-7s5lsBjmdsA/W4YPBKPBeeI/AAAAAAAAASY/uMC9yyi8N88rH6NOWUh8zNFw-FFk8e30gCHMYCw/I/15355123174456.jpg" alt=""></p>
<p><strong>æœ¬åœ°è§†é¢‘åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared] shareVideoWithLocalURL: videoURL from: context];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.shared.share(localVideoURL: videoURL, from: context)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸  æœ¬åœ°è§†é¢‘ URL ä¸ºé€šè¿‡ <code>UIImagePickerController</code> é€‰æ‹©çš„åª’ä½“ <strong>info</strong> çš„ <code>UIImagePickerControllerReferenceURL</code> çš„å€¼, <strong>å½¢å¦‚: assets-library://asset/asset.MP4?id=8FF2F03F-DD84-41A5-A20C-B745E793C0DC&amp;ext=MP4</strong></p>
</blockquote>
<p>å€˜è‹¥é€šè¿‡ Facebook çš„ SDK <strong>è‡ªè¡Œ</strong>æ„å»ºæœ¬åœ°è§†é¢‘åˆ†äº«æ¨¡å‹, éœ€æ³¨æ„ iOS 11 å‰åçš„æ¨¡å‹å±æ€§è®¾ç½®ä¸åŒ:<br>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)imagePickerController:(<span class="built_in">UIImagePickerController</span> *)picker</span><br><span class="line">didFinishPickingMediaWithInfo:(<span class="built_in">NSDictionary</span> *)info</span><br><span class="line">&#123;</span><br><span class="line">  FBSDKShareVideo *video = [[FBSDKShareVideo alloc] init];</span><br><span class="line">  <span class="keyword">if</span> (@available(iOS <span class="number">11</span>, *)) &#123;</span><br><span class="line">    video.videoAsset = [info objectForKey:<span class="built_in">UIImagePickerControllerPHAsset</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    video.videoURL = [info objectForKey:<span class="built_in">UIImagePickerControllerReferenceURL</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">imagePickerController</span><span class="params">(<span class="number">_</span> picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any])</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> video = <span class="type">FBSDKShareVideo</span>()</span><br><span class="line">    <span class="keyword">if</span> #available(iOS <span class="number">11</span>, *) &#123;</span><br><span class="line">        video.videoAsset = info[<span class="type">UIImagePickerControllerPHAsset</span>]     </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        video.videoURL = info[<span class="type">UIImagePickerControllerReferenceURL</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ç»Ÿä¸€ä½¿ç”¨ URL åˆ†äº«æœ¬åœ°è§†é¢‘, æ‰€ä»¥ç¬”è€…å¹¶æ²¡æœ‰è€ƒè™‘ä½¿ç”¨ä¸Šè¿°çš„å†™æ³•.</p>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-nqS8NqcuAWA/W4YPhs9jfPI/AAAAAAAAASk/L7tpwjijq8Q1KKY_mbgd1HVRYm24BGNXgCHMYCw/I/15355124530548.jpg" alt=""></p>
<p><strong>C. è¿”å›æœ¬åº”ç”¨</strong></p>
<p>Objective-Cï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared]application:app openURL:url options:options];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<p><strong>d. å…¶ä»–è®¾ç½®</strong></p>
<p>åœ¨å®Œæˆ Facebook ç™»å½•ã€åˆ†äº«ç­‰æ“ä½œçš„æ—¶å€™è¿˜éœ€è¦è¿æ¥æœ¬åº”ç”¨çš„ <code>AppDelegate</code> , æ•…åœ¨ <code>didFinishLaunchingWithOptions</code> å‡½æ•°ä¸­æ·»åŠ :</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared] application:application didFinishLaunchingWithOptions:launchOptions];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.shared.application(application, didFinishLaunchingWithOptions: launchOptions)</span><br></pre></td></tr></table></figure>
<p>å½“éœ€è¦è®°å½•æœ‰å¤šå°‘ç”¨æˆ·æ¿€æ´»çš„æ—¶å€™éœ€è¦åœ¨ <code>applicationDidBecomeActive</code> æ–¹æ³•ä¸­æ·»åŠ :</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RFacebookManager shared]applicationDidBecomeActive:application];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RFacebookManager</span>.shared.applicationDidBecomeActive(application)</span><br></pre></td></tr></table></figure>
<h3 id="Twitter"><a href="#Twitter" class="headerlink" title="Twitter"></a>Twitter</h3><h4 id="å‡†å¤‡-4"><a href="#å‡†å¤‡-4" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://developer.twitter.com/content/developer-twitter/en.html" target="_blank" rel="noopener">Twitter å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://apps.twitter.com/" target="_blank" rel="noopener">æ³¨å†Œåº”ç”¨ä¸»é¡µ</a>, Twitter SDK <strong>æ”¯æŒ pod é›†æˆ</strong>, <a href="https://github.com/twitter/twitter-kit-ios/wiki/Compose-Tweets" target="_blank" rel="noopener">åˆ†äº«æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<p><strong>âš ï¸: Twitter SDK å°†äº 2018/10/31 åä¸å†è¿›è¡Œç»´æŠ¤, ä½†æ˜¯ä¸å½±å“åç»­ä½¿ç”¨, éœ€è‡ªè¡Œç»´æŠ¤, <a href="https://blog.twitter.com/developer/en_us/topics/tools/2018/discontinuing-support-for-twitter-kit-sdk.html" target="_blank" rel="noopener">Twitter äº§å“ç»ç† Neil Shah å¯¹ Twitter SDK æ”¾å¼ƒç»´æŠ¤è¿­ä»£çš„å£°æ˜åšå®¢</a>.</strong></p>
<h4 id="é›†æˆ-4"><a href="#é›†æˆ-4" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. pod é›†æˆ: <code>pod &#39;TwitterKit&#39;</code><br>b. åœ¨ <code>info.plist</code> æ–‡ä»¶çš„<code>CFBundleURLTypes</code>ä¸­æ·»åŠ :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">&lt;array&gt;</span><br><span class="line">    &lt;string&gt;twitterkit-YOURCONSUMERKEY&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br></pre></td></tr></table></figure>
<p>c. æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;twitter&lt;/string&gt;</span><br><span class="line">&lt;string&gt;twitterauth&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>d. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-4"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-4" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RTwitterManager shared] sdkInitializeByConsumerKey:yourConsumerKey consumerSecret:yourConsumerSecret];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTwitterManager</span>.shared.sdkInitialize(consumerKey: consumerKey, consumerSecret: secret)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. æˆæƒ Twitter å®¢æˆ·ç«¯</strong><br>ä¸å…¶ä»–å¹³å°åˆ†äº«ä¸åŒçš„æ˜¯, Twitter åœ¨è¿›è¡Œå‘æ¨(åˆ†äº«)çš„æ—¶å€™ä¼šå…ˆè¿›è¡Œæ£€æµ‹æœ¬åœ°çš„ <code>SessionStore</code> çš„æ ‡è®°åˆ¤æ–­æ˜¯å¦ç™»å½•(æˆæƒ)è¿‡, æ‰€ä»¥åœ¨è¿›è¡Œå‘æ¨çš„æ—¶å€™éœ€è¦è¿›è¡Œè¿™ä¸€æ­¥çš„åˆ¤æ–­, åœ¨æœªç™»å½•çš„æƒ…å†µä¸‹éœ€è¿›è¡Œæˆæƒ, åœ¨æ­¤ä½¿ç”¨ <code>RTwitterAuthHelper</code> è¿›è¡Œå¤„ç†, ç™»å½•(æˆæƒå›è°ƒ):</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^auth)(RTWAuthState state, <span class="built_in">NSString</span>* _Nullable errorInfo);</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typealias</span> <span class="type">RTWAuthCompletion</span> = (<span class="number">_</span> state : <span class="type">RTWAuthState</span>,<span class="number">_</span> errorInfo : <span class="type">String</span>?) -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<p><code>state</code> åŒ…æ‹¬æˆåŠŸå’Œå¤±è´¥ä¸¤ç§ç»“æœ.</p>
<p><strong>åˆ¤æ–­æ˜¯å¦ç™»å½•è¿‡:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">BOOL</span> flag = [[RTwitterAuthHepler shared] hasLogged];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="number">_</span> = <span class="type">RTwitterAuthHepler</span>.shared.hasLogged</span><br></pre></td></tr></table></figure>
<p><strong>ç™»å½•æˆæƒ:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[[RTwitterAuthHelper shared]authorizeTwitter:^(RTWAuthState state, <span class="built_in">NSString</span> * _Nullable errorInfo) &#123;</span><br><span class="line">    <span class="comment">// some code ...</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTwitterAuthHepler</span>.shared.authorizeTwitter &#123; (state, errorInfo) <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// some code ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸€æ­¥<strong>ç›®å‰çš„æƒ…å†µå°±æ˜¯æŠŠ Twitter SDK æä¾›çš„æˆæƒæ–¹æ³•é‡æ–°åŒ…è£…å†™äº†é, ä½†æ˜¯è€ƒè™‘åˆ°æœªæ¥å¯èƒ½ç”¨åˆ° <code>session</code> å’Œ <code>token</code> ç­‰ä¿¡æ¯å¹¶å¤„ç†, æ‰€ä»¥å•ç‹¬å†™äº†ç±»è®²æˆæƒå’Œåˆ†äº«éš”ç¦».</strong></p>
<p><strong>è¿”å›æœ¬åº”ç”¨:</strong></p>
<p>Twitter åˆ†äº«æ˜¯ä¸éœ€è¦è¿›è¡Œç¨‹åºè·³è½¬çš„, åªæœ‰åœ¨ç™»å½•æˆæƒçš„æ—¶å€™æ‰ä¼šéœ€è¦ä¸‹è¿°æ–¹æ³•, æ‰€ä»¥å½“ä½ æˆåŠŸæˆæƒäº†ä»¥åå¸è½½æ‰ Twitter çš„å®¢æˆ·ç«¯ä¾ç„¶å¯ä»¥è¿›è¡Œåˆ†äº«.</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RTwitterManager shared] application:app openURL:url options:options];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTwitterManager</span>.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ Twitter æœ€æ–° SDK è¦æ±‚é¡¹ç›®çš„  <code>Deloyment Target</code> è‡³å°‘ä¸º <strong>9.0</strong>.</p>
</blockquote>
<p><strong>c. åˆ†äº«</strong></p>
<p>åœ¨æœ¬äººå†™çš„ demo ä¸­, <em>åˆ†äº«</em>å’Œ<em>ç™»å½•æˆæƒ</em>æ˜¯è¡”æ¥çš„, å³: è‹¥æœªç™»å½•è¿‡ -&gt; ç™»å½•æˆæƒ -&gt; åˆ†äº«.<br>å¦, Twitter èƒ½åˆ†äº«çš„å†…å®¹ç›¸å¯¹è¾ƒå°‘, æ‰€ä»¥å…³äº<strong>æ–‡å­—ã€ç½‘é¡µã€å›¾ç‰‡</strong>çš„åˆ†äº«, ç»Ÿä¸€åˆ°ä¸€ä¸ªåˆ†äº«æ¥å£é‡Œ, ä¸‰è€…ä¸èƒ½åŒæ—¶ä¸ºç©º.</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RTwitterManager shared]shareWithWebpageURL: webpageURL text: text image: image from: context completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTwitterManager</span>.shared.share(webpageURL: webpageURL, text: text, image: image, from: context, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-nMmPYSlGflE/W4YQCh8Ae0I/AAAAAAAAASw/unxfmpNFv-UaHYRwEQew8ov00nyOGmNIACHMYCw/I/15355125823965.jpg" alt=""></p>
<p>Twitter åˆ†äº«æ˜¯åœ¨æœ¬åº”ç”¨å†…å¼¹å‡ºåˆ†äº«æ¡†è¿›è¡Œåˆ†äº«.</p>
<h3 id="Instagram"><a href="#Instagram" class="headerlink" title="Instagram"></a>Instagram</h3><h4 id="å‡†å¤‡-5"><a href="#å‡†å¤‡-5" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«æ— éœ€æ³¨å†Œå¹³å°æ— éœ€ SDK, <a href="https://www.instagram.com/developer/" target="_blank" rel="noopener">Instagram å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://www.instagram.com/developer/mobile-sharing/iphone-hooks/" target="_blank" rel="noopener">Custom URL Scheme æ–¹å¼åˆ†äº«</a>.</p>
<h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</span><br><span class="line"></span><br><span class="line">```objc</span><br><span class="line">&lt;string&gt;instagram&lt;/string&gt;</span><br></pre></td></tr></table></figure></p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-5"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-5" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>åˆ†äº«</strong></p>
<p>æ— è®ºç…§ç‰‡è¿˜æ˜¯è§†é¢‘éƒ½æ˜¯é€šè¿‡ <strong>Custom URL Scheme</strong> æ¥æ‰“å¼€ Instagram å®¢æˆ·ç«¯, ä½† demo ä¸­å®é™…çš„æ–¹æ³•å’Œ <a href="https://www.instagram.com/developer/mobile-sharing/iphone-hooks/" target="_blank" rel="noopener">Instagram æä¾›çš„ Custom URL</a>ä¸åŒ.</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">NSURL</span>* instagramLibraryURL() &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *str = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"instagram://library?AssetPath=%@"</span>, <span class="string">@""</span>];</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSURL</span> URLWithString:str];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="keyword">let</span> instagramURL = <span class="type">URL</span>(string: <span class="type">String</span>(format: <span class="string">"instagram://library?AssetPath=%@"</span>, <span class="string">""</span> <span class="keyword">as</span> <span class="type">CVarArg</span>))</span><br></pre></td></tr></table></figure>
<p>åˆ†äº«æµç¨‹æ˜¯<strong>å…ˆä¿å­˜</strong>ç…§ç‰‡/è§†é¢‘å†åˆ†äº«.<br>ä¿å­˜ç…§ç‰‡:</p>
<p>Objective-C</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImageWriteToSavedPhotosAlbum</span>(image, <span class="keyword">self</span>, <span class="keyword">@selector</span>(image:didFinishSavingWithError:contextInfo:), (__bridge <span class="keyword">void</span> *)<span class="keyword">self</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)image:(<span class="built_in">UIImage</span> *)image didFinishSavingWithError:(<span class="built_in">NSError</span> *)error contextInfo:(<span class="keyword">void</span> *)contextInfo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:instagramLibraryURL()]) &#123;</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] openURL:instagramLibraryURL()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UISaveVideoAtPathToSavedPhotosAlbum</span>(localVideoURL.path, <span class="keyword">self</span>, #selector(video(path:didFinishSavingWithError:contextInfo:)), <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@objc</span> <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">image</span><span class="params">(image: UIImage!, didFinishSavingWithError error: NSError!, contextInfo: AnyObject!)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="type">UIApplication</span>.shared.canOpenURL(instagramURL!) &#123;</span><br><span class="line">            <span class="type">UIApplication</span>.shared.openURL(instagramURL!)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜è§†é¢‘:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UISaveVideoAtPathToSavedPhotosAlbum</span>(localeVideoURL.path, <span class="keyword">self</span>, <span class="keyword">@selector</span>(video:didFinishSavingWithError:contextInfo:), <span class="literal">nil</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)video:(<span class="built_in">NSString</span> *)path didFinishSavingWithError:(<span class="built_in">NSError</span> *)error contextInfo:(<span class="keyword">void</span> *)contextInfo &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([[<span class="built_in">UIApplication</span> sharedApplication] canOpenURL:instagramLibraryURL()]) &#123;</span><br><span class="line">        [[<span class="built_in">UIApplication</span> sharedApplication] openURL:instagramLibraryURL()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UISaveVideoAtPathToSavedPhotosAlbum</span>(localVideoURL.path, <span class="keyword">self</span>, #selector(video(path:didFinishSavingWithError:contextInfo:)), <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@objc</span> <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">video</span><span class="params">(path: String!, didFinishSavingWithError error: NSError!, contextInfo: AnyObject!)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="type">UIApplication</span>.shared.canOpenURL(instagramURL!) &#123;</span><br><span class="line">        <span class="type">UIApplication</span>.shared.openURL(instagramURL!)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†äº«å›¾ç‰‡:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RInstagramManager shared] share: targetImage];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RInstagramManager</span>.shared.share(image: targetImage)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-KOdrkJJWdhg/W4YQMFwhXgI/AAAAAAAAAS0/PP0Jd2caT6IONmtn2T_ejcUbESMGJw6OgCHMYCw/I/15355126186609.jpg" alt=""></p>
<p><strong>åˆ†äº«æœ¬åœ°è§†é¢‘:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RInstagramManager shared]shareVideoWithLocalURL: videoURL description: description]</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RInstagramManager</span>.shared.share(localVideoURL: videoFileURL!, description: description)</span><br></pre></td></tr></table></figure>
<p><code>description</code> å­—æ®µåœ¨å®é™…ä¼ é€’è¿‡ç¨‹ä¸­æ˜¯å¤±æ•ˆçš„.</p>
<blockquote>
<p>âš ï¸ æœ¬åœ°è§†é¢‘ URL ä¸ºé€šè¿‡ <code>UIImagePickerController</code> é€‰æ‹©çš„åª’ä½“ <strong>info</strong> çš„ <code>UIImagePickerControllerMediaURL</code> çš„å€¼,<strong>å½¢å¦‚: file:///private/var/mobile/Containers/Data/Application/3B368706-001D-4018-901B-284D64FA50E2/tmp/17BD98B4-A498-46E7-9715-6F39E73DFD75.MOV</strong></p>
</blockquote>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-adPs5mfSxuU/W4ZKVbqhdWI/AAAAAAAAAUU/7dYZkYK_zJ4wYF4vc1Mnt2bSPiMOmb1CgCHMYCw/I/15355275057159.jpg" alt=""></p>
<h3 id="Tumblr"><a href="#Tumblr" class="headerlink" title="Tumblr"></a>Tumblr</h3><h4 id="å‡†å¤‡-6"><a href="#å‡†å¤‡-6" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://www.tumblr.com/developers" target="_blank" rel="noopener">Tumblr å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://dev.flurry.com/admin/applications" target="_blank" rel="noopener">æ³¨å†Œåº”ç”¨ä¸»é¡µ</a>, Tumblr SDK <strong>æ”¯æŒ pod é›†æˆ</strong>, <a href="https://developer.yahoo.com/flurry/docs/tumblrsharing/iOS/" target="_blank" rel="noopener">åˆ†äº«æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-5"><a href="#é›†æˆ-5" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. pod é›†æˆ: <code>pod &#39;Flurry-iOS-SDK/TumblrAPI&#39;</code><br>âš ï¸: ä¸€å®šæ˜¯è¿™ä¸ª, æœ€æ–°ç‰ˆæœ¬çš„ SDK æˆ‘æ²¡æœ‰æ‰¾åˆ°åˆ†äº«çš„æ¥å£.</p>
<p>b. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-6"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-6" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RTumblrManager shared] sdkInitializeByConsumerKey:yourConsumerKey consumerSecret: yourConsumerSecret];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTumblrManager</span>.shared.sdkInitialize(consumerKey: yourConsumerKey, consumerSecret: yourConsumerSecret)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>âš ï¸ åœ¨ iOS ç«¯åˆå§‹åŒ– SDK éœ€è¦ <code>consumerKey</code> å’Œ <code>consumerSecret</code> ä¸¤ä¸ªå‚æ•°, Android ç«¯è¿˜éœ€è¦ <code>flurryKey</code> è¿™ä¸ªå‚æ•°æ‰èƒ½å®Œæˆåˆ†äº«.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p>Tumblr åˆ†äº«ä½“åªåŒ…æ‹¬<strong>å›¾ç‰‡</strong>å’Œ<strong>æ–‡å­—</strong>ä¸¤ç§, å¹¶ä¸”å›¾ç‰‡è¿˜æ˜¯ç½‘ç»œå›¾ç‰‡çš„é“¾æ¥, å¹¶ä¸èƒ½åˆ†äº«æœ¬åœ°å›¾ç‰‡, æ‰€ä»¥ Tumblr çš„å±€é™æ€§å¾ˆå¤§, è¿™ä¸¤ç§åˆ†äº«ä½“çš„æ¨¡å‹é€šè¿‡ SDK ä¸­ <code>FlurryImageShareParameters</code> å’Œ <code>FlurryTextShareParameters</code> æ¥æ„å»º;<br>Tumblr åˆ†äº«æ˜¯é€šè¿‡å½“å‰ç•Œé¢å¼¹å‡ºå¯¹è¯æ¡†åˆ†äº«çš„, å’Œ Twitter ç±»ä¼¼, æ‰€ä»¥ä¸éœ€è¦åˆ¤æ–­ Tumblr ç¨‹åºæ˜¯å¦å®‰è£…;<br>Tumblr çš„åˆ†äº«æµç¨‹æ˜¯: <strong>ç™»å½• -&gt; åˆ†äº«</strong>, ä½†æ˜¯ç™»å½•çš„é€»è¾‘ä¸éœ€è¦åœ¨ä»£ç ä¸­å®ç°, ä»–ä¼šè‡ªåŠ¨å‘ˆç°æµè§ˆå™¨çš„ç™»å½•ç•Œé¢.</p>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RTumblrManager shared] shareText: text title: title webpageURL: webpageURL from: context completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTumblrManager</span>.shared.share(text: text, title: title, webpageURL: webpageURL, from: context, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-rxIzydhFUx8/W4YQj8-tj-I/AAAAAAAAAS8/D0aXCfI4dnEZ5kQhMSuaPgpJN7ZXgZ-JQCHMYCw/I/15355127160288.jpg" alt=""></p>
<p><strong>å›¾ç‰‡é“¾æ¥åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RTumblrManager shared] shareImageWithURL: targetImageURL description: description webpageURL: webpageURL from: context completion: completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RTumblrManager</span>.shared.share(imageURL: targetImageURL, description: description, webpageURL: webpageURL, from: context, completion: completion)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-D28ugrWNaAo/W4YQndOmnhI/AAAAAAAAATI/Ld5F_uF6_Oor4qbfVrlljAuZs3pV8q0EACHMYCw/I/15355127308166.jpg" alt=""></p>
<h3 id="Pinterest"><a href="#Pinterest" class="headerlink" title="Pinterest"></a>Pinterest</h3><h4 id="å‡†å¤‡-7"><a href="#å‡†å¤‡-7" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«éœ€è¦æ³¨å†Œå¹³å°, <a href="https://developers.pinterest.com/" target="_blank" rel="noopener">Pinterest å¼€å‘è€…ä¸»é¡µ</a>, <a href="https://developers.pinterest.com/apps/" target="_blank" rel="noopener">æ³¨å†Œåº”ç”¨ä¸»é¡µ</a>, Pinterest SDK <strong>æ”¯æŒ pod é›†æˆ</strong>, <a href="https://developers.pinterest.com/docs/sdks/ios/" target="_blank" rel="noopener">æ¥å£è°ƒç”¨è¯´æ˜</a>.</p>
<h4 id="é›†æˆ-6"><a href="#é›†æˆ-6" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h4><p>a. pod é›†æˆ: <code>pod â€œPinterestSDKâ€, :git =&gt; â€œgit@github.com:pinterest/ios-pdk.gitâ€</code></p>
<p>d. åœ¨ <code>info.plist</code> æ–‡ä»¶çš„ <code>CFBundleURLTypes</code> ä¸­æ·»åŠ :</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;CFBundleURLTypes&lt;/key&gt;</span><br><span class="line">  &lt;array&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">      &lt;key&gt;CFBundleURLName&lt;/key&gt;</span><br><span class="line">      &lt;string&gt;&lt;/string&gt;</span><br><span class="line">      &lt;key&gt;CFBundleURLSchemes&lt;/key&gt;</span><br><span class="line">      &lt;array&gt;</span><br><span class="line">        &lt;string&gt;pdkYOURAPPID&lt;/string&gt;</span><br><span class="line">      &lt;/array&gt;</span><br><span class="line">    &lt;/dict&gt;</span><br><span class="line">  &lt;/array&gt;</span><br></pre></td></tr></table></figure>
<p>e. æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;pinterestsdk.v1&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<p>b. Swift è¯­è¨€é›†æˆéœ€è¦ <strong>Objective-C - Swift æ¡¥æ¥æ–‡ä»¶</strong>.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-7"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-7" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>a. åˆå§‹åŒ– SDK</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RPinterestManager shared] sdkInitializeByAppID: yourAppID appSecret:yourAppSecret];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RPinterestManager</span>.shared.sdkInitialize(appID: yourAppID, appSecret: yourAppSecret)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»…åš<em>åˆ†äº«</em>åŠŸèƒ½çš„è¯, <code>secret</code> å­—æ®µæ— ç”¨.</p>
</blockquote>
<p><strong>b. åˆ†äº«</strong></p>
<p><strong>âš ï¸: Pinterest åˆ†äº«è¦æ±‚é¡¹ç›®çš„ CFBundleDisplayName ä¸€å®šä¸èƒ½ä¸ºç©º!!!</strong></p>
<p><strong>å›¾ç‰‡é“¾æ¥åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RPinterestManager shared] shareImageWithURL: targetImageURL webpageURL: webpageURL onBoard:boardName description: description  from: context completion:completion];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RPinterestManager</span>.shared.share(imageURL: targetImageURL, webpageURL: webpageURL, boardName: boardName, description: description, from: context, completion: completion)</span><br></pre></td></tr></table></figure>
<p><code>boardName</code> å­—æ®µå³ä½¿éšä¾¿è®¾ç½®ä¹Ÿä¸å½±å“, è€ƒè™‘åˆ°æœ‰å¯èƒ½å¯¹ Pinterest åŠŸèƒ½ç»†åŒ–çš„æ—¶å€™ä¼šç”¨åˆ°è¿™ä¸ªå­—æ®µå°±ä¿ç•™ä¸‹æ¥äº†.</p>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-Zl6L5gyovmg/W4YQzHlhROI/AAAAAAAAATM/k-eeicQBCHEeKkR_JqaBey6tYVUe7M5TQCHMYCw/I/15355127771748.jpg" alt=""></p>
<p><strong>c. è¿”å›æœ¬åº”ç”¨</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RPinterestManager shared] application:app openURL:url options:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RPinterestManager</span>.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<h3 id="Line"><a href="#Line" class="headerlink" title="Line"></a>Line</h3><h4 id="å‡†å¤‡-8"><a href="#å‡†å¤‡-8" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«æ— éœ€æ³¨å†Œå¹³å°.</p>
<h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨<code>info.plist</code>æ–‡ä»¶ä¸­:<br>æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;line&lt;/string&gt;</span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-8"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-8" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>åˆ†äº«</strong></p>
<p>Line åˆ†äº«æ˜¯é€šè¿‡ <strong>Custom URL Scheme</strong> æ¥æ‰“å¼€ Line å®¢æˆ·ç«¯è¿›è¡Œåˆ†äº«, ä½† demo ä¸­å®é™…çš„æ–¹æ³•å’Œ <a href="https://developers.line.me/en/docs/messaging-api/using-line-url-scheme/" target="_blank" rel="noopener">Line æä¾›çš„ Custom URL</a>.</p>
<p>æ–‡æœ¬åˆ†äº«çš„ URL ä¸º <code>line://msg/text/?targetText</code>, è¦å¯¹ <code>targetText</code> ä¸­çš„<strong>ä¸­æ–‡ã€ç‰¹æ®Šå­—ç¬¦ç­‰</strong>è¿›è¡Œå¤„ç†:</p>
<p>Object-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[targetText stringByAddingPercentEncodingWithAllowedCharacters:[<span class="built_in">NSCharacterSet</span> URLQueryAllowedCharacterSet]];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">targetText.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)</span><br></pre></td></tr></table></figure>
<p>å›¾ç‰‡åˆ†äº«çš„ URL ä¸º <code>line://msg/image/</code>, URL åé¢çš„éƒ¨åˆ†å¯é€šè¿‡ UIPasteboard å®ä¾‹çš„ <code>name</code> å±æ€§æ‹¼æ¥:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIPasteboard</span>* p = [<span class="built_in">UIPasteboard</span> generalPasteboard];</span><br><span class="line">[p setData:(<span class="built_in">UIImageJPEGRepresentation</span>(image, <span class="number">1</span>)) forPasteboardType:<span class="string">@"public.jpeg"</span>];</span><br><span class="line"><span class="built_in">NSURL</span>* lineURL = [<span class="built_in">NSURL</span> URLWithString:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"line://msg/image/%@"</span>,p.name]];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="type">UIPasteboard</span>.general</span><br><span class="line">p.setData(<span class="type">UIImageJPEGRepresentation</span>(image, <span class="number">0.1</span>)!, forPasteboardType:<span class="string">"public.jpeg"</span>)</span><br><span class="line"><span class="keyword">let</span> lineURL = <span class="type">URL</span>(string: <span class="type">String</span>(format: lineURLPrefix + <span class="string">"line://msg/image/%@"</span>, p.name <span class="keyword">as</span> <span class="type">CVarArg</span>))</span><br></pre></td></tr></table></figure>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RLineManager shared] shareText: text];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RLineManager</span>.shared.share(text: text)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-Of4c5pwNEgk/W4YQ9tIGYLI/AAAAAAAAATQ/0_jYP-ZUPngqxOTY1_yzdZ-tJCr5yMLIgCHMYCw/I/15355128195870.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RLineManager shared] shareImage: targetImage];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RLineManager</span>.shared.share(image: targetImage)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:</p>
<p><img src="https://lh3.googleusercontent.com/-vQoxgTyCGw8/W4YRA72WbLI/AAAAAAAAATU/WOc97RD-b-8aZoqVTIDYdt_F4DDioa85gCHMYCw/I/15355128334097.jpg" alt=""></p>
<h3 id="WhatsApp"><a href="#WhatsApp" class="headerlink" title="WhatsApp"></a>WhatsApp</h3><h4 id="å‡†å¤‡-9"><a href="#å‡†å¤‡-9" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«æ— éœ€æ³¨å†Œå¹³å°.</p>
<h4 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨<code>info.plist</code>æ–‡ä»¶ä¸­:<br>æ·»åŠ ä»¥ä¸‹è‡³ç™½åå•:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;string&gt;whatsapp&lt;/string</span><br></pre></td></tr></table></figure>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-9"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-9" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>åˆ†äº«</strong><br>é€šè¿‡ <strong>Custom URL Scheme</strong> åˆ†äº«æ–‡å­—, å›¾ç‰‡æ˜¯é€šè¿‡ <code>UIDocumentInteractionController</code> æ¥å®ç°åº”ç”¨é—´æ•°æ®å…±äº«, æ„å»ºæ–‡å­—çš„ URL ä¸º <code>whatsapp://send?text=targetText</code></p>
<p><strong>æ–‡å­—åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWhatsAppManager shared]shareText: text]</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RWhatsAppManager.shared.share(text: text)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-xb2FYN3K0iU/W4YRR8B2ooI/AAAAAAAAATY/REtWJ6bOf3oIIpgCOqpIA4Y6S1uBM9ErgCHMYCw/I/15355129015872.jpg" alt=""></p>
<p><strong>å›¾ç‰‡åˆ†äº«:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RWhatsAppManager shared]shareImage: targetImage from: context];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RWhatsAppManager</span>.shared.share(image: targetImage , from: context)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-OyXKD3CaCjw/W4YRUpjYnJI/AAAAAAAAATc/bUSIY503n7QLm56sS6eNwboBpPY4NCIEgCHMYCw/I/15355129126452.jpg" alt=""></p>
<h3 id="GooglePlus"><a href="#GooglePlus" class="headerlink" title="GooglePlus"></a>GooglePlus</h3><h4 id="å‡†å¤‡-10"><a href="#å‡†å¤‡-10" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h4><p>åˆ†äº«æ— éœ€æ³¨å†Œå¹³å°, <a href="https://developers.google.com/+/" target="_blank" rel="noopener">Google Plus å¼€å‘è€…ä¸»é¡µ</a>å·²ç»æŠŠ iOS ç›¸å…³ç§»é™¤äº†.</p>
<h4 id="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-10"><a href="#æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°-10" class="headerlink" title="æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°"></a>æ¥å£è°ƒç”¨åŠå†…éƒ¨å®ç°</h4><p><strong>åˆ†äº«</strong><br>Google Plus åªæ”¯æŒé€šè¿‡ <strong>Custom URL Scheme</strong> åˆ†äº«ç½‘é¡µ, æ„å»º URL ä¸º <code>https://plus.google.com/share</code></p>
<p>å†…éƒ¨æ„å»º:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURLComponents</span>* urlComponents = [[<span class="built_in">NSURLComponents</span> alloc]</span><br><span class="line">                                      initWithString:<span class="string">@"https://plus.google.com/share"</span>];</span><br><span class="line">urlComponents.queryItems = @[[[<span class="built_in">NSURLQueryItem</span> alloc]</span><br><span class="line">                                  initWithName:<span class="string">@"url"</span></span><br><span class="line">                                  value:[shareURL absoluteString]]];</span><br><span class="line"><span class="built_in">NSURL</span>* url = [urlComponents URL];    </span><br><span class="line"><span class="keyword">if</span> ([SFSafariViewController <span class="keyword">class</span>]) &#123;</span><br><span class="line">    SFSafariViewController* controller = [[SFSafariViewController alloc] initWithURL:url];</span><br><span class="line">    controller.delegate = <span class="keyword">self</span>;</span><br><span class="line">    [from presentViewController:controller animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] openURL:url];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> components = <span class="type">URLComponents</span>(string: <span class="string">"https://plus.google.com/share"</span>)</span><br><span class="line">components?.queryItems = [<span class="type">URLQueryItem</span>(name: <span class="string">"url"</span>, value: webpageURL.absoluteString)]</span><br><span class="line"><span class="keyword">let</span> url = components?.url</span><br><span class="line"><span class="keyword">if</span> #available(iOS <span class="number">9</span>, *) &#123;</span><br><span class="line">    <span class="keyword">let</span> vc = <span class="type">SFSafariViewController</span>(url: url!)</span><br><span class="line">    vc.delegate = <span class="keyword">self</span></span><br><span class="line">    from.present(vc, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="type">UIApplication</span>.shared.openURL(url!)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç½‘é¡µåˆ†äº«:</strong><br>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RGooglePlusManager shared]shareURL:[<span class="built_in">NSURL</span> URLWithString: targetURL] from: context];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RGooglePlusManager</span>.shared.share(webpageURL: <span class="type">URL</span>(string: targetURL)!, from: context)</span><br></pre></td></tr></table></figure>
<p>è¡¨ç°:<br><img src="https://lh3.googleusercontent.com/-RBbwgH1Ny_U/W4YTC4ngt3I/AAAAAAAAAUI/TXhK8rrXdOE9_-tlzNqehW91DmqGW7eGwCHMYCw/I/15355133524598.jpg" alt=""></p>
<h2 id="ç»Ÿä¸€åˆ†äº«æ¥å£"><a href="#ç»Ÿä¸€åˆ†äº«æ¥å£" class="headerlink" title="ç»Ÿä¸€åˆ†äº«æ¥å£"></a>ç»Ÿä¸€åˆ†äº«æ¥å£</h2><h3 id="ç¼ºé™·"><a href="#ç¼ºé™·" class="headerlink" title="ç¼ºé™·"></a>ç¼ºé™·</h3><p><strong>ç¼ºé™·è¯´åœ¨å‰é¢, å…¶å®æœ¬æ¥ä¸æ‰“ç®—ç»Ÿä¸€æ¥å£çš„.</strong></p>
<ul>
<li>å‡å¦‚åªæƒ³åˆ†äº«æŸäº”ä¸ªå¹³å°, å…¶ä½™çš„å…­ä¸ªå¹³å°ä»ç„¶ä¸å¯ä»¥åˆ æ‰, ä¸»åˆ†äº« Manager å’Œå­å¹³å°åˆ†äº« Manager å­˜åœ¨è€¦å’Œ;</li>
<li>åˆ†äº«æ¥å£ä¼˜åŒ–å—é™åˆ¶, ç”±äºå‰é¢çš„å¹³å°åˆ†äº«å¯¹æ¯”è¡¨æ ¼å¯çŸ¥, å›½å¤–çš„å¹³å°åˆ†äº«å¾ˆå¤šéƒ½æ²¡æœ‰å›è°ƒ, è€Œå›½å†…çš„å¹³å°åˆ†äº«å†…å®¹åˆå­˜åœ¨å¤šç§å½¢å¼, æ— æ³•å®ç°é«˜åº¦ç»Ÿä¸€;</li>
<li>æ·»åŠ å¹³å°æ²¡æœ‰åš<strong>å»é‡å¤„ç†</strong>, é€ æˆä¸å¿…è¦çš„å¼€é”€;</li>
<li>åˆ†äº«å®Œæ¯•è¿”å›åˆ°æœ¬åº”ç”¨çš„ç»Ÿä¸€å¤„ç†ä¸­å­å¹³å°åˆ†äº« Manager å’Œä¸»åˆ†äº« Manager å­˜åœ¨ä»£ç æ±¡æŸ“. </li>
</ul>
<h3 id="ç±»å›¾"><a href="#ç±»å›¾" class="headerlink" title="ç±»å›¾"></a>ç±»å›¾</h3><p><img src="https://lh3.googleusercontent.com/-qS7DNoxlpi0/W4YRwCQ7qhI/AAAAAAAAATw/2KMok4xcqTg-qLFtY9V9h9xV8ys8jf9sgCHMYCw/I/iOS%2B" alt="iOS åˆ†äº«ç»Ÿä¸€æ¥å£ç±»å›¾"></p>
<ul>
<li><strong>RShareManger:</strong> ä¸»åˆ†äº« Manager, å­å¹³å° Manager çš„åˆå§‹åŒ–ã€åˆ†äº«ã€åº”ç”¨è·³è½¬å’Œä¸€äº›å…¶ä»–æ“ä½œéƒ½åœ¨æ­¤è¿›è¡Œ;</li>
<li><strong>RPlatform:</strong> ä¸»è¦è¿›è¡Œåº”ç”¨æ˜¯å¦å®‰è£…ã€æ·»åŠ ç›®æ ‡åº”ç”¨çš„æ“ä½œ;</li>
<li><strong>RRegister:</strong> ä¸»è¦è¿›è¡Œ <code>RShareManager</code> å’Œå­å¹³å°åˆ†äº« Manager çš„ SDK åˆå§‹åŒ–è¡”æ¥;</li>
<li><strong>RImageContentã€RVideoContentã€RTextContentã€RWebpageContent</strong> ä¸ºå››ç§å¯¹åº”åˆ†äº«å†…å®¹æ¨¡å‹.</li>
</ul>
<h3 id="è¯¦ç»†è®¾è®¡"><a href="#è¯¦ç»†è®¾è®¡" class="headerlink" title="è¯¦ç»†è®¾è®¡"></a>è¯¦ç»†è®¾è®¡</h3><p><strong>a. å¹³å°æ·»åŠ  </strong></p>
<p>å¹³å°ç›¸å…³éƒ½äº¤ç»™ <code>RPlatform</code> å»å¤„ç†, å¹³å°çš„æ·»åŠ å€Ÿé‰´äº† Java ä¸­çš„ <strong>Builder æ¨¡å¼</strong>æ€è·¯å»å¤„ç†, <code>RPlatform</code> çš„æˆå‘˜å±æ€§ <code>targets</code> åœ¨ Objective-C ä¸­ä¸º:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSArray</span>&lt;Class&gt;* targets;</span><br></pre></td></tr></table></figure>
<p>Swift ä¸­ä¸º:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> targets : <span class="type">Array</span>&lt;<span class="type">RShare</span>.<span class="type">Type</span>&gt; = [] <span class="comment">// å¤šæ€çš„ä½“ç°</span></span><br></pre></td></tr></table></figure>
<p><code>add</code> å‡½æ•°ä¸ºæ·»åŠ å¹³å°çš„æ“ä½œ, å‚æ•°ä¸ºå¹³å°æšä¸¾ <code>RShareSDKPlatform</code>, <code>RPlatform</code> çš„ç§æœ‰æˆå‘˜å±æ€§ <code>info</code> ä¸ºå­—å…¸ç±»å‹, key ä¸ºå¹³å°çš„å­—ç¬¦ä¸²å½¢å¼,  value å¹³å°ç±»å‹ , é€šè¿‡ <code>add</code> æ“ä½œçš„å¹³å°æšä¸¾å»å–å‡º <code>info</code> ä¸­å¯¹åº”çš„å¹³å°ç±»å‹æ·»åŠ åˆ° <code>targets</code> ä¸­.</p>
<p><strong>b. åˆ†äº«é¢‘é“</strong></p>
<p>ä»¥ Objective-C ä¸ºä¾‹, åœ¨ <code>RShareManager</code> å®šä¹‰äº†åˆ†äº«é€šé“æšä¸¾:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, RShareChannel) &#123;</span><br><span class="line">    RShareChannelQQSession, <span class="comment">// QQ å¥½å‹</span></span><br><span class="line">    RShareChannelQQFavorite, <span class="comment">// QQ æ”¶è—</span></span><br><span class="line">    RShareChannelQQDataLine, <span class="comment">// QQ æˆ‘çš„ç”µè„‘(æ•°æ®ä¼ è¾“)</span></span><br><span class="line">    RShareChannelQZone, <span class="comment">// QQ ç©ºé—´</span></span><br><span class="line">    RShareChannelWechatSession, <span class="comment">// å¾®ä¿¡å¥½å‹</span></span><br><span class="line">    RShareChannelWechatFavorite, <span class="comment">// å¾®ä¿¡æ”¶è—</span></span><br><span class="line">    RShareChannelWechatTimeline, <span class="comment">// å¾®ä¿¡æœ‹å‹åœˆ</span></span><br><span class="line">    RShareChannelFacebookClient, <span class="comment">// Facebook å®¢æˆ·ç«¯</span></span><br><span class="line">    RShareChannelFacebookBroswer, <span class="comment">// Facebook Feed å½¢å¼ç½‘é¡µ</span></span><br><span class="line">    RShareChannelTwitter,<span class="comment">// æ¨ç‰¹</span></span><br><span class="line">    RShareChannelSinaWeibo, <span class="comment">// æ–°æµªå¾®åš</span></span><br><span class="line">    RShareChannelSinaWeiboStory, <span class="comment">// æ–°æµªå¾®åš - æˆ‘çš„æ•…äº‹</span></span><br><span class="line">    RShareChannelLine, <span class="comment">// Line</span></span><br><span class="line">    RShareChannelInstagram, <span class="comment">// Instagram</span></span><br><span class="line">    RShareChannelTumblr, <span class="comment">// Tumblr</span></span><br><span class="line">    RShareChannelPinterest, <span class="comment">// Pinterest</span></span><br><span class="line">    RShareChannelGooglePlus, <span class="comment">// GooglePlus</span></span><br><span class="line">    RShareChannelWhatsApp <span class="comment">// WhatsApp</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>c. åˆå§‹åŒ–ä»¥åŠæ³¨å†Œå¹³å°</strong></p>
<p>ç”± ShareSDK iOS ç‰ˆæ¿€å‘çµæ„Ÿè¿›è¡Œæ„å»º.</p>
<p><code>RShareManager</code> é€šè¿‡å•ä¾‹åˆ›å»º, å®ä¾‹å‡½æ•° <code>registerPlatforms:</code> ä¸ºæ³¨å†Œå®ä¾‹åŒ–å­å¹³å° Manager çš„è¿‡ç¨‹, Objective-C ä¸­é€šè¿‡ <code>runtime</code> å®ç°:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// code snippet ...</span></span><br><span class="line"><span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">    Class cls = p.targets[i];</span><br><span class="line">    <span class="keyword">id</span> obj = objc_msgSend(objc_msgSend(cls, <span class="keyword">@selector</span>(alloc)), <span class="keyword">@selector</span>(init));</span><br><span class="line">    SEL sel = <span class="keyword">@selector</span>(connect:);</span><br><span class="line">    ((<span class="keyword">void</span>(*)(<span class="keyword">id</span>,SEL, RConfiguration))objc_msgSend)(obj, sel, c);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift ä¸­æš‚æ—¶æ²¡æ‰¾åˆ°ç±»ä¼¼çš„æ–¹æ³•, é‡‡ç”¨äº†åŸå§‹çš„ <code>switch-case</code> é€ä¸ªåˆ¤æ–­å¹¶åˆå§‹åŒ–.<br>å…¶ä¸­ <code>RConfiguration</code> ä¸º:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰åœ¨ RShare.h ä¸­</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^RConfiguration)(RShareSDKPlatform platform, RRegister* obj);</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰åœ¨ RShareManager ä¸­</span></span><br><span class="line"><span class="keyword">typealias</span> <span class="type">RConfiguration</span> = (<span class="number">_</span> paltform : <span class="type">RShareSDKPlatform</span>,<span class="number">_</span> obj : <span class="type">RRegister</span>) -&gt; <span class="type">Void</span></span><br></pre></td></tr></table></figure>
<p>æ¯ä¸ªå­å¹³å° Manager éƒ½æœ‰ <code>connect</code> å‡½æ•°, å‚æ•°æ˜¯ <code>RConfiguration</code> ç±»å‹, è¿”å›å¹³å°ä¿¡æ¯æ˜¯å› ä¸ºä¸æ˜¯æ‰€æœ‰çš„å¹³å°éƒ½éœ€è¦åˆå§‹åŒ– SDK, è¿”å› <code>RRegister</code> å®ä¾‹çš„ç›®çš„æ˜¯æŠŠå®ä¾‹åŒ–çš„å·¥ä½œäº¤ç»™ <code>RRegister</code> å»åš.</p>
<p><code>RRegister</code> å†…éƒ¨é€»è¾‘å¾ˆç®€å•, åªæœ‰åˆå§‹åŒ–ä¸‰æ–¹å¹³å° SDK çš„å·¥ä½œ.</p>
<p><strong>d. è¿”å›æœ¬åº”ç”¨</strong></p>
<p>Objective-C ä¸­é€šè¿‡ <code>runtime</code> å®ç°:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application openURL:(<span class="built_in">NSURL</span> *)url options:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">UIApplicationOpenURLOptionsKey</span>,<span class="keyword">id</span>&gt; *)options &#123; </span><br><span class="line">    SEL sel = <span class="keyword">@selector</span>(application:openURL:options:);</span><br><span class="line">    <span class="keyword">id</span> obj = objc_msgSend(objc_msgSend(_cls, <span class="keyword">@selector</span>(alloc)), <span class="keyword">@selector</span>(init));</span><br><span class="line">    <span class="keyword">return</span> ((<span class="built_in">BOOL</span>(*)(<span class="keyword">id</span>,SEL,<span class="keyword">id</span>,<span class="keyword">id</span>,<span class="keyword">id</span>))objc_msgSend)(obj, sel, application,url,options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>_cls</code> æ˜¯åœ¨åˆ†äº«çš„æ—¶å€™é€šè¿‡åˆ†äº«æ¥å£ä¸­ <code>channel</code> å­—æ®µé€šè¿‡ <code>-(Class)getCls:(RShareChannel)channel</code> ç¡®å®š, <code>objCls</code> åœ¨ Swift ä¸­é€šè¿‡åŒæ ·çš„æ–¹æ³•è·å¾—: <code>func getSubCls(channel : RShareChannel) -&gt; RShare.Type</code>.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> app: UIApplication, <span class="keyword">open</span> url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:])</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> objCls.application(app, <span class="keyword">open</span>: url, options : options)     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p><strong>æ·»åŠ å¹³å°åŠåˆå§‹åŒ–éœ€è¦æ³¨å†Œçš„å¹³å°:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    </span><br><span class="line">    RPlatform* p = [RPlatform make:^(PlatformBuilder *builder) &#123;</span><br><span class="line">        [builder add:RShareSDKPinterest];</span><br><span class="line">        [builder add:RShareSDKWhatsApp];</span><br><span class="line">        [builder add:RShareSDKWechat];</span><br><span class="line">        [builder add:RShareSDKSina];</span><br><span class="line">        [builder add:RShareSDKQQ];</span><br><span class="line">        [builder add:RShareSDKTumblr];</span><br><span class="line">        [builder add:RShareSDKFacebook];</span><br><span class="line">        [builder add:RShareSDKTwitter];</span><br><span class="line">        [builder add:RShareSDKLine];</span><br><span class="line">        [builder add:RShareSDKGooglePlus];</span><br><span class="line">        [builder add:RShareSDKInstagram];</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    [[RShareManager shared] registerPlatforms:p onConfiguration:^(RShareSDKPlatform platform, RRegister *obj) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (platform) &#123;</span><br><span class="line">            <span class="keyword">case</span> RShareSDKPinterest:</span><br><span class="line">                [obj connectPinterestByAppID: yourAppID appSecret: <span class="literal">nil</span>];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RShareSDKQQ:</span><br><span class="line">                [obj connectQQByAppID:yourAppID appKey: yourKey];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">case</span> RShareSDKSina:</span><br><span class="line">                [obj connectSinaWeiboByAppKey: yourKey  appSecret:yourSecret];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RShareSDKWechat:</span><br><span class="line">                [obj connectWechatByAppID: yourAppID appSecret:yourSecret];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RShareSDKTumblr:</span><br><span class="line">                [obj conncetTumblrByConsumerKey: yourKey  consumerSecret: yourSecret];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RShareSDKFacebook:</span><br><span class="line">                [obj connectFacebookByID:yourAppID secret:<span class="literal">nil</span>];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RShareSDKTwitter:</span><br><span class="line">                [obj connectTwitterByConsumerKey:yourKey consumerSecret:yourSecret];</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> platform = <span class="type">RPlatform</span>.make &#123; (builder) <span class="keyword">in</span></span><br><span class="line">        builder.add(p: .<span class="type">Facebook</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Twitter</span>)</span><br><span class="line">        builder.add(p: .<span class="type">QQ</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Wechat</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Instagram</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Tumblr</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Pinterest</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Sina</span>)</span><br><span class="line">        builder.add(p: .<span class="type">GooglePlus</span>)</span><br><span class="line">        builder.add(p: .<span class="type">Line</span>)</span><br><span class="line">        builder.add(p: .<span class="type">WhatsApp</span>)       </span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">RShareManager</span>.shared.registerPlatform(platform: platform) &#123; (p, obj) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">switch</span> p &#123;</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">Facebook</span>:</span><br><span class="line">                obj.connectFacebook(appID: yourAppID, secret: <span class="literal">nil</span>)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">Pinterest</span>:</span><br><span class="line">                obj.connectPinterest(appID: yourAppID, secret: <span class="literal">nil</span>)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">QQ</span>:</span><br><span class="line">                obj.connectQQ(appID: yourAppID, key: yourKey)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">Sina</span>:</span><br><span class="line">                obj.connectSinaWeibo(appKey: yourKey, secret: yourSecret)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">Wechat</span>:</span><br><span class="line">                obj.connectWechat(appID: yourAppID, secret: yourSecret)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">Tumblr</span>:</span><br><span class="line">                obj.connectTumblr(consumerKey: yourKey, secret: yourSecret)</span><br><span class="line">            <span class="keyword">case</span> .<span class="type">Twitter</span>:</span><br><span class="line">                obj.connectTwitter(consumerKey: yourKey, secret: yourSecret)</span><br><span class="line">            <span class="keyword">default</span> : <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ„å»ºåˆ†äº«æ¨¡å‹:</strong></p>
<p>ä»¥ <code>RImageContent</code> ä¸ºä¾‹:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RImageContent* content = RImageContent make:^(RImageContentBuilder *builder) &#123;</span><br><span class="line">     <span class="comment">// ...   </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RImageContent</span>.make &#123; (builder) <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// ...    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†äº«ï¼š</strong></p>
<p>ä»¥åˆ†äº« <code>RImageContent</code> ä¸ºä¾‹:</p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[RShareManager shared] shareImageWithContent:content channel: channel from: context completion:^(RShareSDKPlatform platform, ShareResult result, <span class="built_in">NSString</span> * _Nullable errorInfo) &#123;</span><br><span class="line">     <span class="comment">// ...   </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RShareManager</span>.shared.shareImage(content: content, channel: channel, from: context) &#123; (platform, result, errorInfo <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// ...    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿”å›æœ¬åº”ç”¨:</strong></p>
<p>Objective-C:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[RShareManager shared]application:app openURL:url options:options];</span><br></pre></td></tr></table></figure>
<p>Swift:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RShareManager</span>.shared.application(app, <span class="keyword">open</span>: url, options : options)</span><br></pre></td></tr></table></figure>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p><a href="https://github.com/rexzx/rshare_objective_c" target="_blank" rel="noopener">Objective-C ç‰ˆæœ¬æºç </a>ã€ <a href="https://github.com/rexzx/rshare_swift" target="_blank" rel="noopener">Swift ç‰ˆæœ¬æºç </a>, è¿˜åœ¨å­¦ä¹ ä¸­, è¯·å¤šæŒ‡æ•™.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/logo.jpg"
                alt="" />
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description">115 106 99</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">12</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
